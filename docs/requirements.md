# 需求分析文档（宠物屋）

## 1. 概述
提供宠物日常记录、提醒、统计与档案管理的小程序。UI 基于提供的“黄白暖系、卡通宠物”设计。

## 2. 术语
- 记录：一次宠物事件（喂食、清洁、体重、用药、疫苗、日记、照片）。
- 宠物档案：宠物基础信息与健康档案。
- 订阅消息：微信平台的消息触达能力，需用户授权。

## 3. 用户角色
- 未登录用户：可浏览引导页与部分静态内容。
- 登录用户：创建与管理记录、订阅提醒、管理档案与相册。

## 4. 功能需求
### 4.1 引导与首页
- 欢迎页：插画与“开始记录”按钮；登录授权入口。
- 首页总览：今日待办卡片、快捷打卡入口、最近记录、统计入口、底部导航。

### 4.2 记录模块
- 记录类型：喂食、饮水、清洁（猫砂/洗澡/梳毛）、体重、用药、疫苗、日记/照片。
- 记录行为：新增/编辑/删除；快捷打卡（复用上一次参数）。
- 日历视图：按日/周/月查看；打卡密度提示；筛选记录类型。
- 统计：周/月统计与趋势；体重折线图。

### 4.3 提醒与订阅
- 支持为关键记录配置提醒（如用药、疫苗、驱虫）。
- 使用订阅消息发送提醒；到期前 N 小时提醒；错过提醒后补推一次。

### 4.4 宠物档案
- 基本信息：头像、昵称、生日、性别、品种、绝育、芯片号。
- 健康信息：体重历史、疫苗记录、过敏史。

### 4.5 相册
- 图片上传、预览、删除；自动生成压缩图；支持多图上传。

### 4.6 设置与隐私
- 账号与隐私：用户协议、隐私政策、数据导出、账号注销。

## 5. 非功能需求
- 性能：首屏 < 2.5s；页面切换 < 300ms；图片懒加载与占位。
- 可用性：空状态、错误提示、表单校验、无障碍文本替代。
- 可靠性：离线可写（本地缓存），上线后自动同步；接口超时重试。
- 安全与隐私：仅在授权后获取用户信息；重要数据加密传输与存储；日志脱敏。

## 6. 数据模型（概要）
- User：id、openid、nickname、avatar、createdAt。
- Pet：id、userId、name、birthday、gender、breed、neutered、avatar。
- Record：id、userId、petId、type、payload（JSON）、time、remindAt、createdAt。
- Media：id、userId、petId、recordId、url、thumbUrl、createdAt。

## 7. 约束
- 平台：微信小程序；H5 与其他端可后续适配。
- 兼容：iOS/Android 主流机型，低端机图片与动画降级。


