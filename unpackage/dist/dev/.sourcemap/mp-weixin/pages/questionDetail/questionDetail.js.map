{"version":3,"file":"questionDetail.js","sources":["pages/questionDetail/questionDetail.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVlc3Rpb25EZXRhaWwvcXVlc3Rpb25EZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\" :style=\"dynamicTopPadding\">\n\t\t<!-- 问题卡片 -->\n\t\t<view class=\"qa-card\">\n\t\t\t<view class=\"qa-header\">\n\t\t\t\t<view class=\"urgent-tag\" v-if=\"qa.isUrgent\"><text class=\"urgent-text\">急</text></view>\n\t\t\t\t<text class=\"qa-title\">{{ qa.title }}</text>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"follow-btn\" \n\t\t\t\t\t:class=\"{ 'followed': qa.isFollowed }\"\n\t\t\t\t\ttype=\"default\" \n\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t@tap=\"followQuestion\"\n\t\t\t\t>\n\t\t\t\t\t{{ qa.isFollowed ? '已关注' : '关注问题' }}\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t<view class=\"qa-divider\"></view>\n\t\t\t<view class=\"qa-desc\">\n\t\t\t\t<text class=\"p\">{{ qa.content }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"qa-user-info\">\n\t\t\t\t<image class=\"qa-user-avatar\" :src=\"getUserAvatarSrc(qa.user.avatarUrl)\" :key=\"`qa-user-avatar-${avatarUpdateTrigger}`\" mode=\"aspectFill\" />\n\t\t\t\t<text class=\"qa-user-name\">{{ qa.user.nickname || '用户' }}</text>\n\t\t\t\t<text class=\"qa-time\">{{ qa.time }}</text>\n\t\t\t\t<view v-if=\"qa.user.id === currentUserId\" class=\"qa-delete-btn\" @tap.stop=\"confirmDeleteQuestion\">\n\t\t\t\t\t<image class=\"qa-delete-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 答案区域（叠卡容器） -->\n\t\t<view class=\"answers-section\" @tap=\"cancelReply\">\n\t\t\t<view class=\"answers-card\">\n\t\t\t\t<view class=\"answers-card-bg bg1\"></view>\n\t\t\t\t<view class=\"answers-card-body\">\n\t\t\t\t\t<view class=\"answers-ribbon\"><text>全部回答</text></view>\n\t\t\t\t\t<view class=\"answer-list\">\n\t\t\t\t\t\t<view class=\"answer-card\" v-for=\"answer in qa.answers\" :key=\"answer.id\">\n\t\t\t\t\t\t\t<view class=\"doctor-info\">\n\t\t\t\t\t\t\t\t<image class=\"avatar\" :src=\"getUserAvatarSrc(answer.user.avatarUrl)\" :key=\"`answer-avatar-${answer.id}-${avatarUpdateTrigger}`\"\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t<view class=\"d-meta\">\n\t\t\t\t\t\t\t\t\t<text class=\"d-name\">{{ answer.user.nickname }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"d-title\" v-if=\"answer.pet && answer.pet.name\">{{ answer.pet.name }}｜{{ answer.pet.breed }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"answer-text\">{{ answer.content }}</text>\n\t\t\t\t\t\t\t<view class=\"answer-actions\">\n\t\t\t\t\t\t\t\t<text class=\"answer-time\">{{ answer.time }}</text>\n\t\t\t\t\t\t\t\t<text class=\"answer-reply\" @tap.stop=\"startReplyToAnswer(answer)\">回复</text>\n\t\t\t\t\t\t\t\t<view class=\"like-btn\" @tap=\"likeAnswer(answer)\">\n\t\t\t\t\t\t\t\t\t<image class=\"like-icon\" :src=\"answer.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t<text class=\"like-count\" v-if=\"answer.likes > 0\">{{ answer.likes }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-if=\"answer.user?.id === currentUserId\" class=\"answer-delete-btn\" @tap.stop=\"confirmDeleteAnswer(answer)\">\n\t\t\t\t\t\t\t\t\t<image class=\"delete-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 该回答的评论列表 -->\n\t\t\t\t\t\t\t<view class=\"answer-comments\" v-if=\"answer.showComments && answer.comments && answer.comments.length\" @tap.stop>\n\t\t\t\t\t\t\t\t<view class=\"comment-item\" v-for=\"comment in answer.comments.slice(0, answer.expandedComments)\" :key=\"comment.id\">\n\t\t\t\t\t\t\t\t\t<view class=\"comment-user\">\n\t\t\t\t\t\t\t\t\t<image class=\"c-avatar\" :src=\"getUserAvatarSrc(comment.user.avatarUrl)\" :key=\"`comment-avatar-${comment.id}-${avatarUpdateTrigger}`\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t\t<view class=\"c-info\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"c-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"c-column\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"c-name\">\n\t\t\t\t\t\t\t\t\t\t\t{{ comment.user.nickname }}\n\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"comment.replyTo && comment.replyTo.nickname\" style=\"color:#999; font-size:24rpx; margin-left:8rpx;\">\n\t\t\t\t\t\t\t\t\t\t\t\t▶ {{ comment.replyTo.nickname }}\n\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-role\" v-if=\"comment.pet && comment.pet.name\">{{ comment.pet.name }}｜{{ comment.pet.breed }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<text class=\"c-text\">{{ comment.content }}</text>\n\t\t\t\t\t\t\t\t\t<view class=\"c-actions\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"c-actions-left\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-time\">{{ comment.time }}</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-reply\" @tap.stop=\"startReply(comment, answer)\">回复</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"c-actions-right\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"c-like-btn\" @tap.stop=\"likeComment(comment)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<image class=\"c-like-icon\" :src=\"comment.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-like-count\" v-if=\"comment.likes > 0\">{{ comment.likes }}</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"comment.user?.id === currentUserId\" class=\"c-delete-btn\" @tap.stop=\"confirmDeleteAnswerComment(answer, comment)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<image class=\"delete-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<!-- 此处不再显示评论内的回复展开/列表 -->\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<!-- 回答的评论展开/收起按钮（放在回答+评论整体底部） -->\n\t\t\t\t\t\t\t<view class=\"answer-reply-expand\" v-if=\"answer.comments && answer.comments.length > 0\">\n\t\t\t\t\t\t\t\t<!-- 初始状态：显示展开按钮 -->\n\t\t\t\t\t\t\t\t<view v-if=\"!answer.showComments\" @tap.stop=\"toggleAnswerComments(answer)\">\n\t\t\t\t\t\t\t\t\t<text class=\"expand-text\">展开{{ answer.comments.length }}条回复</text>\n\t\t\t\t\t\t\t\t\t<text class=\"expand-arrow\">↓</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<!-- 展开状态：同时显示展开更多和收起按钮 -->\n\t\t\t\t\t\t\t\t<view v-else class=\"expand-buttons\">\n\t\t\t\t\t\t\t\t\t<view v-if=\"answer.expandedComments < answer.comments.length\" @tap.stop=\"expandMoreComments(answer)\" class=\"expand-more-btn\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-text\">展开更多</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-arrow\">↓</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view @tap.stop=\"collapseComments(answer)\" class=\"collapse-btn\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-text\">收起</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-arrow\">↑</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"answer-card empty\" v-if=\"qa.answers.length === 0\">\n\t\t\t\t\t\t\t<text class=\"empty-text\">暂时还没有人回答，去抢第一个回答吧～</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\n\t\t<!-- 占位高度，避免内容被底部栏遮挡（与广场详情一致） -->\n\t\t<view class=\"bottom-safe-spacer\"></view>\n\n\t\t<!-- 底部输入 -->\n\t\t<view class=\"bottom-input-bar\" @tap.stop>\n\t\t\t<input \n\t\t\t\tref=\"inputRef\"\n\t\t\t\tclass=\"input-field\" \n\t\t\t\tv-model=\"currentAnswer\"\n\t\t\t\t:placeholder=\"replyingToComment ? `回复 ${replyingToComment.user.nickname}：` : replyingToAnswerDirect ? `回复 ${replyingToAnswerDirect.user.nickname}：` : '输入你的回答'\" \n\t\t\t\t:disabled=\"isSubmitting\"\n\t\t\t\t:focus=\"replyingToComment !== null || replyingToAnswerDirect !== null\"\n\t\t\t\t@confirm=\"replyingToComment ? submitReply() : replyingToAnswerDirect ? submitReplyToAnswer() : submitAnswer()\"\n\t\t\t\t@tap.stop\n\t\t\t/>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, ref, onMounted, nextTick } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\n\n// 动态顶部内边距\nconst dynamicTopPadding = ref('')\nonMounted(async () => {\n\ttry {\n\t\tconst info = uni.getSystemInfoSync()\n\t\tconst statusBar = info.statusBarHeight || 0\n\t\tconst screenW = info.screenWidth || 375\n\t\tconst rpxToPx = (rpx) => (rpx * screenW) / 750\n\t\tconst topPx = 15\n\t\tdynamicTopPadding.value = `padding-top:${topPx}px;`\n\t\t\n\t\t// 加载当前用户的宠物信息\n\t\ttry {\n\t\t\tconst pets = await api.getPets()\n\t\t\tconst petsList = Array.isArray(pets) ? pets : (pets.data || [])\n\t\t\tif (petsList.length > 0) {\n\t\t\t\tcurrentUserPet.value = petsList[0] // 使用第一个宠物\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:174','获取宠物信息失败:', e)\n\t\t}\n\n\t\t// 获取当前用户信息\n\t\ttry {\n\t\t\tconst profile = await api.getProfile()\n\t\t\tcurrentUserId.value = profile?.id || profile?.userId || ''\n\t\t} catch (e) {}\n\t} catch (e) {\n\t\tdynamicTopPadding.value = ''\n\t}\n})\n\ntype Doctor = { name: string; title: string; avatar: string }\ntype Answer = {\n\tid: string\n\tcontent: string\n\tisExpert: boolean\n\tlikes: number\n\tisLiked: boolean\n\tcreatedAt: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n\tcomments: Comment[]\n\tnewComment: string\n\tshowComments: boolean\n\texpandedComments: number\n}\n\ntype Comment = {\n\tid: string\n\tcontent: string\n\tlikes: number\n\tisLiked: boolean\n\ttime: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n    replyTo?: {\n        commentId: string\n        userId: string | null\n        nickname: string | null\n    } | null\n    // 已移除评论内的回复展开逻辑\n}\n\n\ntype QA = {\n\tid: string\n\ttitle: string\n\tcontent: string\n\tisUrgent: boolean\n\thasAnswer: boolean\n\tdoctor?: Doctor | null\n\tanswerPreview: string | null\n\tanswerCount: number\n\treadCount: number\n\tfollowCount: number\n\ttime: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n\tanswers: Answer[]\n\tisOwner: boolean\n\tisFollowed: boolean\n}\n\nconst qa = reactive<QA>({\n\tid: '',\n\ttitle: '问题标题',\n\tcontent: '',\n\tisUrgent: false,\n\thasAnswer: false,\n\tdoctor: null,\n\tanswerPreview: '',\n\tanswerCount: 0,\n\treadCount: 0,\n\tfollowCount: 0,\n\ttime: '',\n\tuser: {\n\t\tid: '',\n\t\tnickname: '',\n\t\tavatarUrl: ''\n\t},\n\tpet: null,\n\tanswers: [],\n\tisOwner: false,\n\tisFollowed: false\n})\n\nconst currentAnswer = ref('')\nconst isSubmitting = ref(false)\nconst isSubmittingComment = ref(false)\nconst currentUserPet = ref<any>(null)\nconst replyingToComment = ref<Comment | null>(null)\nconst replyingToAnswer = ref<Answer | null>(null)\nconst replyingToAnswerDirect = ref<Answer | null>(null)\nconst inputRef = ref<any>(null)\nconst currentUserId = ref('')\n\n// 用户头像缓存与下载\nconst avatarCache = new Map<string, string>()\nconst avatarUpdateTrigger = ref(0) // 用于触发响应式更新\n\nfunction getUserAvatarSrc(url?: string) {\n\tif (!url) return '/static/user/user.png'\n\tlet normalized = url\n\tif (normalized.startsWith('/uploads/')) {\n\t\tnormalized = `https://pet-api.zbinli.cn${normalized}`\n\t}\n\tif (normalized.startsWith('http://pet-api.zbinli.cn')) {\n\t\tnormalized = normalized.replace('http://pet-api.zbinli.cn', 'https://pet-api.zbinli.cn')\n\t}\n\tnormalized = normalized.replace('://pet-api.zbinli.cn:80', '://pet-api.zbinli.cn')\n\tif (normalized.startsWith('wxfile://') || normalized.startsWith('/static/')) return normalized\n\tif (avatarCache.has(normalized)) return avatarCache.get(normalized) as string\n\tuni.downloadFile({\n\t\turl: normalized,\n\t\tsuccess: (res) => {\n\t\t\tif (res.statusCode === 200 && res.tempFilePath) {\n\t\t\t\tavatarCache.set(normalized, res.tempFilePath)\n\t\t\t\t// 触发响应式更新\n\t\t\t\tavatarUpdateTrigger.value++\n\t\t\t} else {\n\t\t\t\tavatarCache.set(normalized, '/static/user/user.png')\n\t\t\t\tavatarUpdateTrigger.value++\n\t\t\t}\n\t\t},\n\t\tfail: () => {\n\t\t\tavatarCache.set(normalized, '/static/user/user.png')\n\t\t\tavatarUpdateTrigger.value++\n\t\t}\n\t})\n\treturn '/static/user/user.png'\n}\n\n// 加载问答详情\nasync function loadQuestionDetail(questionId: string) {\n\ttry {\n\t\tconst data = await api.getQuestion(questionId)\n\t\t\n\t\t// 时间格式化\n\t\tlet time = '刚刚'\n\t\tif (data.createdAt) {\n\t\t\ttime = formatRelativeTime(data.createdAt)\n\t\t}\n\t\t\n\t\t// 处理回答数据\n\t\tconst processedAnswers = data.answers.map((answer: any) => {\n\t\t\tlet answerTime = '刚刚'\n\t\t\tif (answer.createdAt) {\n\t\t\t\tanswerTime = formatRelativeTime(answer.createdAt)\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\t...answer,\n\t\t\t\ttime: answerTime,\n\t\t\t\tcomments: [],\n\t\t\t\tnewComment: '',\n\t\t\t\tshowComments: false,\n\t\t\t\texpandedComments: 0\n\t\t\t}\n\t\t})\n\t\t\n\t\tObject.assign(qa, {\n\t\t\t...data,\n\t\t\ttime,\n\t\t\tanswers: processedAnswers,\n\t\t\treadCount: data.views || 0  // 确保阅读数正确映射\n\t\t})\n\t\t\n\t\t// 为每个回答加载评论\n\t\tfor (const answer of qa.answers) {\n\t\t\tawait loadAnswerComments(answer.id)\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:369','加载问答详情失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '加载失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 提交回答\nasync function submitAnswer() {\n\tif (!currentAnswer.value.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入回答内容',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\tif (isSubmitting.value) return\n\t\n\ttry {\n\t\tisSubmitting.value = true\n\t\t\n\t\tawait api.createAnswer(qa.id, {\n\t\t\tcontent: currentAnswer.value.trim(),\n\t\t\tpetId: currentUserPet.value?.id || null\n\t\t})\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '回答成功',\n\t\t\ticon: 'success'\n\t\t})\n\t\t\n\t\t// 清空输入框\n\t\tcurrentAnswer.value = ''\n\t\t\n\t\t// 重新加载问答详情\n\t\tawait loadQuestionDetail(qa.id)\n\t\t\n\t\t// 触发问答列表刷新事件\n\t\ttry {\n\t\t\tuni.$emit('qa:refresh')\n\t\t} catch (e) {}\n\t\t\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:414','提交回答失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '提交失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisSubmitting.value = false\n\t}\n}\n\n// 点赞回答\nasync function likeAnswer(answer: Answer) {\n\ttry {\n\t\tconst result = await api.likeAnswer(answer.id)\n\t\tif (result) {\n\t\t\t// 更新点赞数量和状态\n\t\t\tanswer.likes = result.likes\n\t\t\tanswer.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: answer.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t\t\n\t\t\t// 触发问答列表刷新事件\n\t\t\ttry {\n\t\t\t\tuni.$emit('qa:refresh')\n\t\t\t} catch (e) {}\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:445','点赞操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 关注/取消关注问题\nasync function followQuestion() {\n\ttry {\n\t\tconst result = await api.followQuestion(qa.id)\n\t\tif (result) {\n\t\t\t// 更新关注数量和状态\n\t\t\tqa.followCount = result.followCount\n\t\t\tqa.isFollowed = result.isFollowed\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: qa.isFollowed ? '已关注' : '已取消关注',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t\t\n\t\t\t// 触发问答列表刷新事件\n\t\t\ttry {\n\t\t\t\tuni.$emit('qa:refresh')\n\t\t\t} catch (e) {}\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:474','关注操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 加载评论列表\n// 加载回答的评论\nasync function loadAnswerComments(answerId: string) {\n\ttry {\n\t\tconst data = await api.getAnswerComments(answerId)\n\t\tuni.__f__('log','at pages/questionDetail/questionDetail.vue:487','加载评论数据:', data)\n\t\tconst answer = qa.answers.find(a => a.id === answerId)\n\t\tif (answer) {\n\t\t\tanswer.comments = data.map((comment: any, index: number) => ({\n\t\t\t\t...comment,\n\t\t\t\ttime: formatCommentTime(comment.createdAt),\n\t\t\t\treplies: [],\n\t\t\t\treplyCount: comment.replyCount || (index % 2 === 0 ? 5 : 0), // 临时测试：偶数索引的评论有5条回复\n\t\t\t\tshowReplies: false,\n\t\t\t\texpandedReplies: 0\n\t\t\t}))\n\t\t\tuni.__f__('log','at pages/questionDetail/questionDetail.vue:498','更新后的回答评论:', answer.comments)\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:501','加载评论失败:', error)\n\t}\n}\n\n// 统一的时间格式化函数\nfunction formatRelativeTime(createdAt: string) {\n\tconst now = new Date()\n\t\n\t// 解析createdAt (格式: 2025-10-23T19:56:29.000Z)\n\tconst createdDate = createdAt.split('T')[0] // 2025-10-23\n\tconst createdTime = createdAt.split('T')[1].split('.')[0] // 19:56:29\n\tconst [createdYear, createdMonth, createdDateNum] = createdDate.split('-').map(Number)\n\tconst [createdHour, createdMinute] = createdTime.split(':').map(Number)\n\t\n\t// 获取当前时间的年月日时分秒\n\tconst nowYear = now.getFullYear()\n\tconst nowMonth = now.getMonth() + 1\n\tconst nowDate = now.getDate()\n\tconst nowHour = now.getHours()\n\tconst nowMinute = now.getMinutes()\n\t\n\t// 调试信息\n\t//uni.__f__('log','at pages/questionDetail/questionDetail.vue:523','=== 时间差计算 ===')\n\t//uni.__f__('log','at pages/questionDetail/questionDetail.vue:524','创建时间:', `${createdYear}-${createdMonth.toString().padStart(2,'0')}-${createdDateNum.toString().padStart(2,'0')} ${createdHour.toString().padStart(2,'0')}:${createdMinute.toString().padStart(2,'0')}`)\n\t//uni.__f__('log','at pages/questionDetail/questionDetail.vue:525','当前时间:', `${nowYear}-${nowMonth.toString().padStart(2,'0')}-${nowDate.toString().padStart(2,'0')} ${nowHour.toString().padStart(2,'0')}:${nowMinute.toString().padStart(2,'0')}`)\n\t\n\t// 计算总分钟差（基于年月日时分）\n\tconst totalMinutesDiff = (nowYear - createdYear) * 365 * 24 * 60 + \n\t\t(nowMonth - createdMonth) * 30 * 24 * 60 + \n\t\t(nowDate - createdDateNum) * 24 * 60 + \n\t\t(nowHour - createdHour) * 60 + \n\t\t(nowMinute - createdMinute)\n\t\n\t// 判断是否超过24小时（1440分钟）\n\tif (totalMinutesDiff < 1440) {\n\t\t// 24小时内，显示相对时间\n\t\tif (totalMinutesDiff < 1) {\n\t\t\treturn '刚刚'\n\t\t} else if (totalMinutesDiff < 60) {\n\t\t\treturn `${totalMinutesDiff}分钟前`\n\t\t} else {\n\t\t\tconst hours = Math.floor(totalMinutesDiff / 60)\n\t\t\treturn `${hours}小时前`\n\t\t}\n\t} else {\n\t\t// 超过24小时，显示创建日期时间\n\t\treturn `${createdMonth}/${createdDateNum} ${createdHour.toString().padStart(2,'0')}:${createdMinute.toString().padStart(2,'0')}`\n\t}\n}\n\n// 格式化评论时间\nfunction formatCommentTime(createdAt: string) {\n\treturn formatRelativeTime(createdAt)\n}\n\n// 开始回复评论\nfunction startReply(comment: Comment, answer: Answer) {\n\treplyingToComment.value = comment\n\treplyingToAnswer.value = answer\n\treplyingToAnswerDirect.value = null\n\tcurrentAnswer.value = ''\n}\n\n// 开始回复回答\nfunction startReplyToAnswer(answer: Answer) {\n\treplyingToAnswerDirect.value = answer\n\treplyingToComment.value = null\n\treplyingToAnswer.value = null\n\tcurrentAnswer.value = ''\n}\n\n// 取消回复（点击输入框外部时调用）\nfunction cancelReply() {\n\treplyingToComment.value = null\n\treplyingToAnswer.value = null\n\treplyingToAnswerDirect.value = null\n\tcurrentAnswer.value = ''\n\t\n\t// 失焦输入框以隐藏键盘\n\tif (inputRef.value) {\n\t\tinputRef.value.blur()\n\t}\n}\n\n// 提交回复\nasync function submitReply() {\n\tif (!currentAnswer.value.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入回复内容',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\tif (!replyingToComment.value || !replyingToAnswer.value) return\n\t\n\tif (isSubmitting.value) return\n\t\n\ttry {\n\t\tisSubmitting.value = true\n\t\t\n        const result = await api.createAnswerComment(replyingToAnswer.value.id, {\n            content: currentAnswer.value.trim(),\n            petId: currentUserPet.value?.id || null,\n            replyToCommentId: replyingToComment.value?.id || null\n        })\n\t\t\n\t\t// 添加到该回答的评论列表\n        replyingToAnswer.value.comments.unshift({\n\t\t\t...result,\n\t\t\ttime: formatCommentTime(result.createdAt)\n\t\t})\n\t\t// 提交后自动展开并确保新评论可见\n\t\treplyingToAnswer.value.showComments = true\n\t\treplyingToAnswer.value.expandedComments = Math.min(\n\t\t\treplyingToAnswer.value.comments.length,\n\t\t\tMath.max(replyingToAnswer.value.expandedComments + 1, 3)\n\t\t)\n\t\t\n\t\t// 清空回复状态\n\t\treplyingToComment.value = null\n\t\treplyingToAnswer.value = null\n\t\tcurrentAnswer.value = ''\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '回复成功',\n\t\t\ticon: 'success'\n\t\t})\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:630','提交回复失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '回复失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisSubmitting.value = false\n\t}\n}\n\n// 提交对回答的回复\nasync function submitReplyToAnswer() {\n\tif (!currentAnswer.value.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入回复内容',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\tif (!replyingToAnswerDirect.value) return\n\t\n\tif (isSubmitting.value) return\n\t\n\ttry {\n\t\tisSubmitting.value = true\n\t\t\n\t\tconst result = await api.createAnswerComment(replyingToAnswerDirect.value.id, {\n\t\t\tcontent: currentAnswer.value.trim(),\n\t\t\tpetId: currentUserPet.value?.id || null\n\t\t})\n\t\t\n\t\t// 添加到该回答的评论列表\n\t\treplyingToAnswerDirect.value.comments.unshift({\n\t\t\t...result,\n\t\t\ttime: formatCommentTime(result.createdAt)\n\t\t})\n\t\t// 提交后自动展开并确保新评论可见\n\t\treplyingToAnswerDirect.value.showComments = true\n\t\treplyingToAnswerDirect.value.expandedComments = Math.min(\n\t\t\treplyingToAnswerDirect.value.comments.length,\n\t\t\tMath.max(replyingToAnswerDirect.value.expandedComments + 1, 3)\n\t\t)\n\t\t\n\t\t// 清空回复状态\n\t\treplyingToAnswerDirect.value = null\n\t\tcurrentAnswer.value = ''\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '回复成功',\n\t\t\ticon: 'success'\n\t\t})\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:683','提交回复失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '回复失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisSubmitting.value = false\n\t}\n}\n\n\n// 点赞评论\nasync function likeComment(comment: Comment) {\n\ttry {\n\t\tconst result = await api.likeAnswerComment(comment.id)\n\t\tif (result) {\n\t\t\tcomment.likes = result.likes\n\t\t\tcomment.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: comment.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:709','点赞评论失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 删除自己的评论\nasync function confirmDeleteAnswerComment(answer: Answer, comment: Comment) {\n\ttry {\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除确认',\n\t\t\t\tcontent: '确定要删除这条评论吗？',\n\t\t\t\tconfirmText: '删除',\n\t\t\t\tconfirmColor: '#e64340',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait api.deleteAnswerComment(comment.id)\n\t\t\t\t\t\t\tconst idx = answer.comments.findIndex(c => c.id === comment.id)\n\t\t\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\t\t\tanswer.comments.splice(idx, 1)\n\t\t\t\t\t\t\t\tif (answer.expandedComments > answer.comments.length) {\n\t\t\t\t\t\t\t\t\tanswer.expandedComments = answer.comments.length\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuni.showToast({ title: '已删除', icon: 'success' })\n\t\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tuni.showToast({ title: '删除失败', icon: 'none' })\n\t\t\t\t\t\t\treject(e)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(false)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t} catch (_) {}\n}\n\n// 删除自己的回答\nasync function confirmDeleteAnswer(answer: Answer) {\n\ttry {\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除确认',\n\t\t\t\tcontent: '确定要删除这条回答吗？',\n\t\t\t\tconfirmText: '删除',\n\t\t\t\tconfirmColor: '#e64340',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait api.deleteAnswer(answer.id)\n\t\t\t\t\t\t\tconst idx = qa.answers.findIndex(a => a.id === answer.id)\n\t\t\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\t\t\tqa.answers.splice(idx, 1)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tuni.showToast({ title: '已删除', icon: 'success' })\n\t\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tuni.showToast({ title: '删除失败', icon: 'none' })\n\t\t\t\t\t\t\treject(e)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(false)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t} catch (_) {}\n}\n\n// 删除自己的问答\nasync function confirmDeleteQuestion() {\n\ttry {\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除确认',\n\t\t\t\tcontent: '确定要删除这个问答吗？删除后将无法恢复。',\n\t\t\t\tconfirmText: '删除',\n\t\t\t\tconfirmColor: '#e64340',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait api.deleteQuestion(qa.id)\n\t\t\t\t\t\t\tuni.showToast({ title: '已删除', icon: 'success' })\n\t\t\t\t\t\t\t// 返回上一页\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\t\t}, 1500)\n\t\t\t\t\t\t\tresolve(true)\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tuni.showToast({ title: '删除失败', icon: 'none' })\n\t\t\t\t\t\t\treject(e)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(false)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t} catch (_) {}\n}\n\n// 切换回复展开/收起\nfunction toggleReplies(comment: Comment) {\n    // 已移除：评论级别的展开逻辑不再使用\n}\n\n// 初始展开评论\nfunction toggleAnswerComments(answer: Answer) {\n\tanswer.showComments = true\n\tanswer.expandedComments = Math.min(3, answer.comments.length) // 初始展开3条\n}\n\n// 展开更多评论\nfunction expandMoreComments(answer: Answer) {\n\tanswer.expandedComments = Math.min(answer.expandedComments + 10, answer.comments.length)\n}\n\n// 收起所有评论\nfunction collapseComments(answer: Answer) {\n\tanswer.showComments = false\n\tanswer.expandedComments = 0\n}\n\n// 加载评论的回复\nasync function loadCommentReplies(comment: Comment) {\n    // 已移除：不再加载评论内的回复\n}\n\n\n// 接收列表页传值\ntry {\n\tconst ec = getCurrentPages().pop()?.getOpenerEventChannel?.()\n\tec && ec.on('qa', (data: Partial<QA>) => {\n\t\t// 只设置基本信息，不设置统计数据\n\t\tObject.assign(qa, {\n\t\t\tid: data.id,\n\t\t\ttitle: data.title,\n\t\t\tcontent: data.content,\n\t\t\tisUrgent: data.isUrgent,\n\t\t\tuser: data.user,\n\t\t\tpet: data.pet\n\t\t})\n\t\t// 如果有ID，加载详情（这会获取最新的统计数据）\n\t\tif (data.id) {\n\t\t\tloadQuestionDetail(data.id)\n\t\t}\n\t})\n} catch (e) { }\n\n// 设置顶部导航标题与背景色\nonLoad(() => {\n\ttry {\n\t\tuni.setNavigationBarTitle({ title: '问答详情' })\n\t\tuni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\n\t} catch (e) { }\n})\n</script>\n\n<style scoped>\n.page {\n    padding: 28rpx 30rpx;\n    /* 动态计算顶部间距，避免真机调试时env不生效 */\n    min-height: 100vh;\n    background: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n    padding-bottom: 36rpx; /* 具体高度由占位视图控制 */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n}\n\n.qa-card {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 20rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tpadding: 22rpx 24rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n\twidth: 100%;\n\tmax-width: 624rpx;\n}\n\n/* 左右缺口，和虚线对齐 */\n.qa-card::before,\n.qa-card::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 116rpx;\n\twidth: 26rpx;\n\theight: 26rpx;\n\tbackground: #2c2c2c;\n\tborder-radius: 50%;\n\tbox-shadow: 0 0 0 8rpx #fff;\n}\n\n.qa-card::before {\n\tleft: -13rpx;\n}\n\n.qa-card::after {\n\tright: -13rpx;\n}\n\n.qa-header {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.urgent-tag {\n\twidth: 34rpx;\n\theight: 34rpx;\n\tbackground: #ff6b35;\n\tborder-radius: 6rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.urgent-text {\n\tcolor: #fff;\n\tfont-weight: 700;\n\tfont-size: 22rpx;\n}\n\n.qa-title {\n\tflex: 1;\n\tfont-size: 34rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tpadding: 12rpx 8rpx 10rpx 0;\n}\n\n.follow-btn {\n\tbackground: #fff;\n\tborder: 2rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\tpadding: 6rpx 12rpx;\n\tfont-size: 24rpx;\n\tcolor: #2c2c2c;\n\ttransition: all 0.3s ease;\n}\n\n.follow-btn.followed {\n\tbackground: #2c2c2c;\n\tcolor: #fff;\n}\n\n.qa-divider {\n\theight: 0;\n\tborder-top: 6rpx dashed #2c2c2c;\n\tmargin: 10rpx 0 8rpx;\n}\n\n.qa-desc {\n\tmargin: 18rpx 10rpx 6rpx;\n}\n\n.qa-desc .p {\n\tdisplay: block;\n\tcolor: #2c2c2c;\n\tfont-size: 29rpx;\n\tline-height: 1.8;\n}\n\n/* 问答用户信息 */\n.qa-user-info {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: 16rpx;\n\tgap: 12rpx;\n}\n\n.qa-user-avatar {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.qa-user-name {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tflex: 1;\n}\n\n.qa-time {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.qa-delete-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 48rpx;\n\theight: 48rpx;\n\tborder-radius: 50%;\n\tbackground: #f5f5f5;\n\tmargin-left: 8rpx;\n}\n\n.qa-delete-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.answers-section {\n\tmargin-top: 36rpx;\n\tposition: relative;\n\twidth: 100%;\n\tmax-width: 704rpx;\n}\n\n.answers-card {\n\tposition: relative;\n}\n\n.answers-card-bg {\n\tposition: absolute;\n\tleft: 8rpx;\n\tright: 8rpx;\n\theight: 100%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.answers-card-bg.bg1 {\n\ttop: -2rpx;\n\ttransform: rotate(-2deg);\n}\n\n.answers-card-body {\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tz-index: 1;\n}\n\n.answers-ribbon {\n\tposition: absolute;\n\tleft: 12rpx;\n\ttop: -22rpx;\n\tbackground: #333;\n\tcolor: #fff;\n\tpadding: 8rpx 16rpx;\n\ttransform: rotate(-8deg);\n\tbox-shadow: 0 6rpx 10rpx rgba(0, 0, 0, .15);\n}\n\n.answers-ribbon text {\n\tfont-weight: 700;\n\tfont-size: 24rpx;\n}\n\n.answer-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 16rpx;\n\tmargin-top: 10rpx;\n}\n\n.answer-card {\n\tbackground: #fff;\n\tborder: 2rpx solid #e9e9e9;\n\tborder-radius: 16rpx;\n\tpadding: 18rpx;\n}\n\n/* 回答的评论区域 */\n.answer-comments {\n\tmargin-top: 12rpx;\n\tpadding-top: 12rpx;\n}\n\n/* 回答评论展开/收起按钮 */\n.answer-reply-expand {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 12rpx;\n    padding: 8rpx 0;\n    cursor: pointer;\n}\n\n/* 与圈子详情统一的展开/收起样式 */\n.expand-buttons {\n    display: flex;\n    align-items: center;\n    gap: 24rpx;\n}\n\n.expand-more-btn,\n.collapse-btn {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n}\n\n.expand-text {\n    font-size: 22rpx;\n    color: #666;\n    margin-right: 8rpx;\n}\n\n\n/* 评论输入框 */\n.comment-input {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: 20rpx;\n\tpadding: 16rpx;\n\tbackground: #f8f8f8;\n\tborder-radius: 12rpx;\n}\n\n.comment-input-field {\n\tflex: 1;\n\theight: 60rpx;\n\tpadding: 0 16rpx;\n\tbackground: #fff;\n\tborder: 1rpx solid #e0e0e0;\n\tborder-radius: 8rpx;\n\tfont-size: 28rpx;\n}\n\n.comment-submit-btn {\n\twidth: 120rpx;\n\theight: 60rpx;\n\tmargin-left: 16rpx;\n\tbackground: #4CAF50;\n\tcolor: #fff;\n\tborder: none;\n\tborder-radius: 8rpx;\n\tfont-size: 26rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.cancel-btn {\n\twidth: 100rpx;\n\theight: 60rpx;\n\tbackground: #f5f5f5;\n\tcolor: #666;\n\tborder: 1rpx solid #ddd;\n\tborder-radius: 8rpx;\n\tfont-size: 26rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-left: 16rpx;\n}\n\n.answer-card.empty {\n\ttext-align: center;\n\tcolor: #aaa;\n}\n\n.empty-text {\n\tfont-size: 26rpx;\n}\n\n.doctor-info {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 14rpx;\n}\n\n.avatar {\n\twidth: 64rpx;\n\theight: 64rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.d-meta {\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-left: 14rpx;\n}\n\n.d-name {\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tfont-size: 28rpx;\n}\n\n.d-title {\n\tcolor: #777;\n\tfont-size: 24rpx;\n}\n\n.answer-text {\n\tdisplay: block;\n\tcolor: #333;\n\tfont-size: 26rpx;\n\tline-height: 1.7;\n}\n\n.answer-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\tmargin-top: 8rpx;\n\tgap: 16rpx;\n}\n\n.answer-time {\n\tfont-size: 22rpx;\n\tcolor: #999;\n}\n\n.answer-reply {\n\tfont-size: 22rpx;\n\tcolor: #999;\n\tflex-shrink: 0;\n}\n\n.like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 6rpx;\n\tflex-shrink: 0;\n\tmargin-left: auto;\n\twidth: 48rpx;\n\theight: 48rpx;\n}\n\n.like-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.like-count {\n\tfont-size: 22rpx;\n\tcolor: #666;\n}\n\n/* 评论区 */\n.comments-section {\n\tmargin-top: 36rpx;\n\tposition: relative;\n\twidth: 100%;\n\tmax-width: 704rpx;\n}\n\n.comments-card {\n\tposition: relative;\n}\n\n.comments-card-bg {\n\tposition: absolute;\n\tleft: 8rpx;\n\tright: 8rpx;\n\theight: 100%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.comments-card-bg.bg1 {\n\ttop: -2rpx;\n\ttransform: rotate(-2deg);\n}\n\n.comments-card-body {\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tz-index: 1;\n}\n\n.comments-ribbon {\n\tposition: absolute;\n\tleft: 12rpx;\n\ttop: -22rpx;\n\tbackground: #333;\n\tcolor: #fff;\n\tpadding: 8rpx 16rpx;\n\ttransform: rotate(-8deg);\n\tbox-shadow: 0 6rpx 10rpx rgba(0, 0, 0, .15);\n}\n\n.comments-ribbon text {\n\tfont-weight: 700;\n\tfont-size: 24rpx;\n}\n\n.comment-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 6rpx;\n}\n\n.comment-item {\n\tbackground: #fff;\n\tborder-radius: 16rpx;\n\tpadding: 12rpx;\n\tmargin-left: 20rpx;\n}\n\n.comment-item.empty {\n\ttext-align: center;\n\tcolor: #aaa;\n}\n\n.comment-user {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n\tmargin-bottom: 10rpx;\n}\n\n.c-avatar {\n\twidth: 48rpx;\n\theight: 48rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.c-info {\n\tflex: 1;\n}\n\n.c-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.c-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 8rpx;\n}\n\n.c-name {\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tfont-size: 24rpx;\n}\n\n.c-role {\n\tcolor: #777;\n\tfont-size: 20rpx;\n}\n\n.c-text {\n\tdisplay: block;\n\tcolor: #333;\n\tfont-size: 26rpx;\n\tline-height: 1.7;\n\tmargin-bottom: 10rpx;\n}\n\n.c-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-top: 8rpx;\n}\n\n.c-time {\n\tfont-size: 22rpx;\n\tcolor: #999;\n}\n\n.c-actions-left {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 16rpx;\n}\n\n.c-reply {\n\tfont-size: 22rpx;\n\tcolor: #999;\n\tflex-shrink: 0;\n}\n\n.c-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 38rpx;\n\ttransform: translateX(10rpx);\n}\n\n.c-like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 6rpx;\n\tflex-shrink: 0;\n}\n\n.c-like-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.c-like-count {\n\tfont-size: 22rpx;\n\tcolor: #666;\n}\n\n.c-delete-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 48rpx;\n\theight: 48rpx;\n}\n\n.delete-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.answer-delete-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 48rpx;\n\theight: 48rpx;\n\tmargin-left: 8rpx;\n}\n\n/* 回复展开/收起按钮 */\n.reply-expand {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\tmargin-top: 12rpx;\n\tpadding: 8rpx 0;\n\tcursor: pointer;\n}\n\n.expand-buttons {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 24rpx;\n}\n\n.expand-more-btn,\n.collapse-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n.expand-text {\n\tfont-size: 22rpx;\n    color: #666;\n\tmargin-right: 8rpx;\n}\n\n.expand-arrow {\n\tfont-size: 20rpx;\n\tcolor: #666;\n\ttransition: transform 0.3s ease;\n}\n\n.expand-arrow.expanded {\n\ttransform: rotate(180deg);\n}\n\n/* 回复列表 */\n.reply-list {\n\tmargin-top: 16rpx;\n\tpadding-left: 20rpx;\n\tborder-left: 2rpx solid #f0f0f0;\n}\n\n.reply-item {\n\tbackground: #f8f8f8;\n\tborder: 1rpx solid #e9e9e9;\n\tborder-radius: 12rpx;\n\tpadding: 16rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.reply-user {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.r-avatar {\n\twidth: 48rpx;\n\theight: 48rpx;\n\tborder-radius: 50%;\n\tborder: 1rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.r-info {\n\tflex: 1;\n}\n\n.r-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.r-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.r-name {\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tfont-size: 24rpx;\n}\n\n.r-role {\n\tcolor: #777;\n\tfont-size: 20rpx;\n}\n\n.r-text {\n\tdisplay: block;\n\tcolor: #333;\n\tfont-size: 24rpx;\n\tline-height: 1.6;\n\tmargin-bottom: 8rpx;\n}\n\n.r-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.r-time {\n\tfont-size: 20rpx;\n\tcolor: #999;\n}\n\n.r-actions-left {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.r-reply {\n\tfont-size: 20rpx;\n\tcolor: #999;\n\tflex-shrink: 0;\n}\n\n.r-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.r-like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 4rpx;\n\tflex-shrink: 0;\n}\n\n.r-like-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.r-like-count {\n\tfont-size: 20rpx;\n\tcolor: #666;\n}\n\n\n/* 底部输入条 */\n.bottom-input-bar {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    padding: 24rpx;\n    padding-bottom: calc(24rpx + env(safe-area-inset-bottom));\n    background: #fff;\n    border-top: 4rpx solid #2c2c2c;\n    z-index: 100;\n}\n\n.input-field {\n\twidth: 100%;\n\theight: 60rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\tpadding: 14rpx 22rpx;\n\tfont-size: 26rpx;\n\tbox-sizing: border-box;\n}\n\n/* 底部占位高度，与广场详情一致 */\n.bottom-safe-spacer {\n    height: calc(88rpx + env(safe-area-inset-bottom));\n    height: calc(88rpx + constant(safe-area-inset-bottom));\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/questionDetail/questionDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","api","reactive","_a","_b","onLoad"],"mappings":"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"}