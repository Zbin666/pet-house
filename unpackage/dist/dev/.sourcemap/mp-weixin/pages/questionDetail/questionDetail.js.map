{"version":3,"file":"questionDetail.js","sources":["pages/questionDetail/questionDetail.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVlc3Rpb25EZXRhaWwvcXVlc3Rpb25EZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"page\" :style=\"dynamicTopPadding\">\n\t\t<!-- 问题卡片 -->\n\t\t<view class=\"qa-card\">\n\t\t\t<view class=\"qa-header\">\n\t\t\t\t<view class=\"urgent-tag\" v-if=\"qa.isUrgent\"><text class=\"urgent-text\">急</text></view>\n\t\t\t\t<text class=\"qa-title\">{{ qa.title }}</text>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"follow-btn\" \n\t\t\t\t\t:class=\"{ 'followed': qa.isFollowed }\"\n\t\t\t\t\ttype=\"default\" \n\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t@tap=\"followQuestion\"\n\t\t\t\t>\n\t\t\t\t\t{{ qa.isFollowed ? '已关注' : '关注问题' }}\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t<view class=\"qa-divider\"></view>\n\t\t\t<view class=\"qa-desc\">\n\t\t\t\t<text class=\"p\">{{ qa.content }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"qa-user-info\">\n\t\t\t\t<image class=\"qa-user-avatar\" :src=\"qa.user.avatarUrl || '/static/logo.png'\" mode=\"aspectFill\" />\n\t\t\t\t<text class=\"qa-user-name\">{{ qa.user.nickname || '用户' }}</text>\n\t\t\t\t<text class=\"qa-time\">{{ qa.time }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 答案区域（叠卡容器） -->\n\t\t<view class=\"answers-section\">\n\t\t\t<view class=\"answers-card\">\n\t\t\t\t<view class=\"answers-card-bg bg1\"></view>\n\t\t\t\t<view class=\"answers-card-body\">\n\t\t\t\t\t<view class=\"answers-ribbon\"><text>全部回答</text></view>\n\t\t\t\t\t<view class=\"answer-list\">\n\t\t\t\t\t\t<view class=\"answer-card\" v-for=\"answer in qa.answers\" :key=\"answer.id\">\n\t\t\t\t\t\t\t<view class=\"doctor-info\">\n\t\t\t\t\t\t\t\t<image class=\"avatar\" :src=\"answer.user.avatarUrl || '/static/logo.png'\"\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t<view class=\"d-meta\">\n\t\t\t\t\t\t\t\t\t<text class=\"d-name\">{{ answer.user.nickname }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"d-title\" v-if=\"answer.pet && answer.pet.name\">{{ answer.pet.name }}｜{{ answer.pet.breed }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"answer-text\">{{ answer.content }}</text>\n\t\t\t\t\t\t\t<view class=\"answer-actions\">\n\t\t\t\t\t\t\t\t<text class=\"answer-time\">{{ answer.time }}</text>\n\t\t\t\t\t\t\t\t<view class=\"like-btn\" @tap=\"likeAnswer(answer)\">\n\t\t\t\t\t\t\t\t\t<image class=\"like-icon\" :src=\"answer.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t<text class=\"like-count\">{{ answer.likes }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"answer-card empty\" v-if=\"qa.answers.length === 0\">\n\t\t\t\t\t\t\t<text class=\"empty-text\">暂时还没有人回答，去抢第一个回答吧～</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 评论区 -->\n\t\t<view class=\"comments-section\">\n\t\t\t<view class=\"comments-card\">\n\t\t\t\t<view class=\"comments-card-bg bg1\"></view>\n\t\t\t\t<view class=\"comments-card-body\">\n\t\t\t\t\t<view class=\"comments-ribbon\"><text>全部评论</text></view>\n\t\t\t\t\t<view class=\"comment-list\">\n\t\t\t\t\t\t<view class=\"comment-item\" v-for=\"comment in comments\" :key=\"comment.id\">\n\t\t\t\t\t\t\t<view class=\"comment-user\">\n\t\t\t\t\t\t\t\t<image class=\"c-avatar\" :src=\"comment.user.avatarUrl || '/static/logo.png'\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t<view class=\"c-info\">\n\t\t\t\t\t\t\t\t\t<view class=\"c-row\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"c-column\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-name\">{{ comment.user.nickname }}</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-role\" v-if=\"comment.pet && comment.pet.name\">{{ comment.pet.name }}｜{{ comment.pet.breed }}</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"c-text\">{{ comment.content }}</text>\n\t\t\t\t\t\t\t<view class=\"c-actions\">\n\t\t\t\t\t\t\t\t<text class=\"c-time\">{{ comment.time }}</text>\n\t\t\t\t\t\t\t\t<view class=\"c-action-buttons\">\n\t\t\t\t\t\t\t\t\t<text class=\"reply-btn\" @tap=\"startReply(comment.id)\">回复</text>\n\t\t\t\t\t\t\t\t\t<view class=\"c-like-btn\" @tap=\"likeComment(comment)\">\n\t\t\t\t\t\t\t\t\t\t<image class=\"c-like-icon\" :src=\"comment.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"c-like-count\" v-if=\"comment.likes > 0\">{{ comment.likes }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 回复列表 -->\n\t\t\t\t\t\t\t<view class=\"reply-list\" v-if=\"comment.replies && comment.replies.length\">\n\t\t\t\t\t\t\t\t<view class=\"reply-item\" v-for=\"reply in comment.replies\" :key=\"reply.id\">\n\t\t\t\t\t\t\t\t\t<view class=\"reply-user\">\n\t\t\t\t\t\t\t\t\t\t<image class=\"r-avatar\" :src=\"reply.user.avatarUrl || '/static/logo.png'\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t\t<view class=\"r-info\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"r-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"r-column\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-name\">{{ reply.user.nickname }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-role\" v-if=\"reply.pet && reply.pet.name\">{{ reply.pet.name }}｜{{ reply.pet.breed }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<text class=\"r-text\">{{ reply.content }}</text>\n\t\t\t\t\t\t\t\t\t<view class=\"r-actions\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"r-time\">{{ reply.time }}</text>\n\t\t\t\t\t\t\t\t\t\t<view class=\"r-like-btn\" @tap=\"likeReply(reply)\">\n\t\t\t\t\t\t\t\t\t\t\t<image class=\"r-like-icon\" :src=\"reply.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-like-count\" v-if=\"reply.likes > 0\">{{ reply.likes }}</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<!-- 回复输入框 -->\n\t\t\t\t\t\t\t<view class=\"reply-input\" v-if=\"replyingToComment === comment.id\">\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\tclass=\"reply-input-field\" \n\t\t\t\t\t\t\t\t\tv-model=\"currentReply\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"输入你的回复\" \n\t\t\t\t\t\t\t\t\t:disabled=\"isSubmittingReply\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<view class=\"reply-input-actions\">\n\t\t\t\t\t\t\t\t\t<button class=\"reply-cancel-btn\" @tap=\"cancelReply\">取消</button>\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclass=\"reply-submit-btn\" \n\t\t\t\t\t\t\t\t\t\t@tap=\"submitReply(comment.id)\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"isSubmittingReply || !currentReply.trim()\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ isSubmittingReply ? '提交中...' : '提交' }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<view class=\"comment-item empty\" v-if=\"comments.length === 0\">\n\t\t\t\t\t\t\t<text class=\"empty-text\">暂时还没有评论，来抢第一个评论吧～</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 占位高度，避免内容被底部栏遮挡（与广场详情一致） -->\n\t\t<view class=\"bottom-safe-spacer\"></view>\n\n\t\t<!-- 底部输入 -->\n\t\t<view class=\"bottom-input-bar\">\n\t\t\t<view class=\"input-tabs\">\n\t\t\t\t<view class=\"tab-item\" :class=\"{ active: !showCommentInput }\" @tap=\"showCommentInput = false\">\n\t\t\t\t\t<text>回答</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"tab-item\" :class=\"{ active: showCommentInput }\" @tap=\"showCommentInput = true\">\n\t\t\t\t\t<text>评论</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"input-content\" v-if=\"!showCommentInput\">\n\t\t\t\t<input \n\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\tv-model=\"currentAnswer\"\n\t\t\t\t\tplaceholder=\"输入你的回答\" \n\t\t\t\t\t:disabled=\"isSubmitting\"\n\t\t\t\t/>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"submit-btn\" \n\t\t\t\t\t@tap=\"submitAnswer\"\n\t\t\t\t\t:disabled=\"isSubmitting || !currentAnswer.trim()\"\n\t\t\t\t>\n\t\t\t\t\t{{ isSubmitting ? '提交中...' : '提交' }}\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"input-content\" v-else>\n\t\t\t\t<input \n\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\tv-model=\"currentComment\"\n\t\t\t\t\tplaceholder=\"输入你的评论\" \n\t\t\t\t\t:disabled=\"isSubmittingComment\"\n\t\t\t\t/>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"submit-btn\" \n\t\t\t\t\t@tap=\"submitComment\"\n\t\t\t\t\t:disabled=\"isSubmittingComment || !currentComment.trim()\"\n\t\t\t\t>\n\t\t\t\t\t{{ isSubmittingComment ? '提交中...' : '提交' }}\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup lang=\"ts\">\nimport { reactive, ref, onMounted } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\n\n// 动态顶部内边距\nconst dynamicTopPadding = ref('')\nonMounted(async () => {\n\ttry {\n\t\tconst info = uni.getSystemInfoSync()\n\t\tconst statusBar = info.statusBarHeight || 0\n\t\tconst screenW = info.screenWidth || 375\n\t\tconst rpxToPx = (rpx) => (rpx * screenW) / 750\n\t\tconst topPx = 15\n\t\tdynamicTopPadding.value = `padding-top:${topPx}px;`\n\t\t\n\t\t// 加载当前用户的宠物信息\n\t\ttry {\n\t\t\tconst pets = await api.getPets()\n\t\t\tconst petsList = Array.isArray(pets) ? pets : (pets.data || [])\n\t\t\tif (petsList.length > 0) {\n\t\t\t\tcurrentUserPet.value = petsList[0] // 使用第一个宠物\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:221','获取宠物信息失败:', e)\n\t\t}\n\t} catch (e) {\n\t\tdynamicTopPadding.value = ''\n\t}\n})\n\ntype Doctor = { name: string; title: string; avatar: string }\ntype Answer = {\n\tid: string\n\tcontent: string\n\tisExpert: boolean\n\tlikes: number\n\tisLiked: boolean\n\tcreatedAt: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n}\n\ntype Comment = {\n\tid: string\n\tcontent: string\n\tlikes: number\n\tisLiked: boolean\n\tcreatedAt: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n\treplies: Reply[]\n}\n\ntype Reply = {\n\tid: string\n\tcontent: string\n\tlikes: number\n\tisLiked: boolean\n\tcreatedAt: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n}\n\ntype QA = {\n\tid: string\n\ttitle: string\n\tcontent: string\n\tisUrgent: boolean\n\thasAnswer: boolean\n\tdoctor?: Doctor | null\n\tanswerPreview: string | null\n\tanswerCount: number\n\treadCount: number\n\tfollowCount: number\n\ttime: string\n\tuser: {\n\t\tid: string\n\t\tnickname: string\n\t\tavatarUrl: string\n\t}\n\tpet?: {\n\t\tname: string\n\t\tbreed: string\n\t} | null\n\tanswers: Answer[]\n\tisOwner: boolean\n\tisFollowed: boolean\n}\n\nconst qa = reactive<QA>({\n\tid: '',\n\ttitle: '问题标题',\n\tcontent: '',\n\tisUrgent: false,\n\thasAnswer: false,\n\tdoctor: null,\n\tanswerPreview: '',\n\tanswerCount: 0,\n\treadCount: 0,\n\tfollowCount: 0,\n\ttime: '',\n\tuser: {\n\t\tid: '',\n\t\tnickname: '',\n\t\tavatarUrl: ''\n\t},\n\tpet: null,\n\tanswers: [],\n\tisOwner: false,\n\tisFollowed: false\n})\n\nconst currentAnswer = ref('')\nconst isSubmitting = ref(false)\nconst showCommentInput = ref(false)\n\n// 评论相关数据\nconst comments = ref<Comment[]>([])\nconst currentComment = ref('')\nconst currentReply = ref('')\nconst replyingToComment = ref<string | null>(null)\nconst isSubmittingComment = ref(false)\nconst isSubmittingReply = ref(false)\nconst currentUserPet = ref<any>(null)\n\n// 加载问答详情\nasync function loadQuestionDetail(questionId: string) {\n\ttry {\n\t\tconst data = await api.getQuestion(questionId)\n\t\t\n\t\t// 时间格式化\n\t\tlet time = '刚刚'\n\t\tif (data.createdAt) {\n\t\t\tconst created = new Date(data.createdAt)\n\t\t\tconst month = created.getUTCMonth() + 1\n\t\t\tconst date = created.getUTCDate()\n\t\t\tconst hours = created.getUTCHours().toString().padStart(2, '0')\n\t\t\tconst minutes = created.getUTCMinutes().toString().padStart(2, '0')\n\t\t\ttime = `${month}/${date} ${hours}:${minutes}`\n\t\t}\n\t\t\n\t\t// 处理回答数据\n\t\tconst processedAnswers = data.answers.map((answer: any) => {\n\t\t\tlet answerTime = '刚刚'\n\t\t\tif (answer.createdAt) {\n\t\t\t\tconst created = new Date(answer.createdAt)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\t\tconst daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24))\n\t\t\t\t\n\t\t\t\tif (daysDiff === 0) {\n\t\t\t\t\t// 今天\n\t\t\t\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\t\t\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\t\t\t\tanswerTime = `今天 ${hours}:${minutes}`\n\t\t\t\t} else if (daysDiff === 1) {\n\t\t\t\t\t// 昨天\n\t\t\t\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\t\t\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\t\t\t\tanswerTime = `昨天 ${hours}:${minutes}`\n\t\t\t\t} else if (daysDiff < 7) {\n\t\t\t\t\t// 一周内\n\t\t\t\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\t\t\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\t\t\t\tanswerTime = `${daysDiff}天前 ${hours}:${minutes}`\n\t\t\t\t} else {\n\t\t\t\t\t// 超过一周\n\t\t\t\t\tconst month = created.getMonth() + 1\n\t\t\t\t\tconst date = created.getDate()\n\t\t\t\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\t\t\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\t\t\t\tanswerTime = `${month}/${date} ${hours}:${minutes}`\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\t...answer,\n\t\t\t\ttime: answerTime\n\t\t\t}\n\t\t})\n\t\t\n\t\tObject.assign(qa, {\n\t\t\t...data,\n\t\t\ttime,\n\t\t\tanswers: processedAnswers,\n\t\t\treadCount: data.views || 0  // 确保阅读数正确映射\n\t\t})\n\t\t\n\t\t// 加载评论\n\t\tawait loadComments()\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:410','加载问答详情失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '加载失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 提交回答\nasync function submitAnswer() {\n\tif (!currentAnswer.value.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入回答内容',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\tif (isSubmitting.value) return\n\t\n\ttry {\n\t\tisSubmitting.value = true\n\t\t\n\t\tawait api.createAnswer(qa.id, {\n\t\t\tcontent: currentAnswer.value.trim(),\n\t\t\tpetId: qa.pet?.id || null\n\t\t})\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '回答成功',\n\t\t\ticon: 'success'\n\t\t})\n\t\t\n\t\t// 清空输入框\n\t\tcurrentAnswer.value = ''\n\t\t\n\t\t// 重新加载问答详情\n\t\tawait loadQuestionDetail(qa.id)\n\t\t\n\t\t// 触发问答列表刷新事件\n\t\ttry {\n\t\t\tuni.$emit('qa:refresh')\n\t\t} catch (e) {}\n\t\t\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:455','提交回答失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '提交失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisSubmitting.value = false\n\t}\n}\n\n// 点赞回答\nasync function likeAnswer(answer: Answer) {\n\ttry {\n\t\tconst result = await api.likeAnswer(answer.id)\n\t\tif (result) {\n\t\t\t// 更新点赞数量和状态\n\t\t\tanswer.likes = result.likes\n\t\t\tanswer.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: answer.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t\t\n\t\t\t// 触发问答列表刷新事件\n\t\t\ttry {\n\t\t\t\tuni.$emit('qa:refresh')\n\t\t\t} catch (e) {}\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:486','点赞操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 关注/取消关注问题\nasync function followQuestion() {\n\ttry {\n\t\tconst result = await api.followQuestion(qa.id)\n\t\tif (result) {\n\t\t\t// 更新关注数量和状态\n\t\t\tqa.followCount = result.followCount\n\t\t\tqa.isFollowed = result.isFollowed\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: qa.isFollowed ? '已关注' : '已取消关注',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t\t\n\t\t\t// 触发问答列表刷新事件\n\t\t\ttry {\n\t\t\t\tuni.$emit('qa:refresh')\n\t\t\t} catch (e) {}\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:515','关注操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 加载评论列表\nasync function loadComments() {\n\ttry {\n\t\tconst data = await api.getComments(qa.id)\n\t\tcomments.value = data.map((comment: any) => ({\n\t\t\t...comment,\n\t\t\ttime: formatCommentTime(comment.createdAt)\n\t\t}))\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:532','加载评论失败:', error)\n\t}\n}\n\n// 格式化评论时间\nfunction formatCommentTime(createdAt: string) {\n\tconst created = new Date(createdAt)\n\tconst now = new Date()\n\tconst timeDiff = now.getTime() - created.getTime()\n\tconst daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24))\n\t\n\tif (daysDiff === 0) {\n\t\t// 今天\n\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\treturn `今天 ${hours}:${minutes}`\n\t} else if (daysDiff === 1) {\n\t\t// 昨天\n\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\treturn `昨天 ${hours}:${minutes}`\n\t} else if (daysDiff < 7) {\n\t\t// 一周内\n\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\treturn `${daysDiff}天前 ${hours}:${minutes}`\n\t} else {\n\t\t// 超过一周\n\t\tconst month = created.getMonth() + 1\n\t\tconst date = created.getDate()\n\t\tconst hours = created.getHours().toString().padStart(2, '0')\n\t\tconst minutes = created.getMinutes().toString().padStart(2, '0')\n\t\treturn `${month}/${date} ${hours}:${minutes}`\n\t}\n}\n\n// 提交评论\nasync function submitComment() {\n\tif (!currentComment.value.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入评论内容',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\tif (isSubmittingComment.value) return\n\t\n\ttry {\n\t\tisSubmittingComment.value = true\n\t\t\n\t\tconst result = await api.createComment(qa.id, {\n\t\t\tcontent: currentComment.value.trim(),\n\t\t\tpetId: currentUserPet.value?.id || null\n\t\t})\n\t\t\n\t\t// 添加到评论列表\n\t\tcomments.value.push({\n\t\t\t...result,\n\t\t\ttime: formatCommentTime(result.createdAt)\n\t\t})\n\t\t\n\t\tcurrentComment.value = ''\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '评论成功',\n\t\t\ticon: 'success'\n\t\t})\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:601','提交评论失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '评论失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisSubmittingComment.value = false\n\t}\n}\n\n// 提交回复\nasync function submitReply(commentId: string) {\n\tif (!currentReply.value.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入回复内容',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\tif (isSubmittingReply.value) return\n\t\n\ttry {\n\t\tisSubmittingReply.value = true\n\t\t\n\t\tconst result = await api.createReply(commentId, {\n\t\t\tcontent: currentReply.value.trim(),\n\t\t\tpetId: currentUserPet.value?.id || null\n\t\t})\n\t\t\n\t\t// 找到对应的评论并添加回复\n\t\tconst commentIndex = comments.value.findIndex(c => c.id === commentId)\n\t\tif (commentIndex !== -1) {\n\t\t\tcomments.value[commentIndex].replies.push({\n\t\t\t\t...result,\n\t\t\t\ttime: formatCommentTime(result.createdAt)\n\t\t\t})\n\t\t}\n\t\t\n\t\tcurrentReply.value = ''\n\t\treplyingToComment.value = null\n\t\t\n\t\tuni.showToast({\n\t\t\ttitle: '回复成功',\n\t\t\ticon: 'success'\n\t\t})\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:648','提交回复失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '回复失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisSubmittingReply.value = false\n\t}\n}\n\n// 点赞评论\nasync function likeComment(comment: Comment) {\n\ttry {\n\t\tconst result = await api.likeComment(comment.id)\n\t\tif (result) {\n\t\t\tcomment.likes = result.likes\n\t\t\tcomment.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: comment.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:673','点赞评论失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 点赞回复\nasync function likeReply(reply: Reply) {\n\ttry {\n\t\tconst result = await api.likeReply(reply.id)\n\t\tif (result) {\n\t\t\treply.likes = result.likes\n\t\t\treply.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: reply.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tuni.__f__('error','at pages/questionDetail/questionDetail.vue:696','点赞回复失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 开始回复\nfunction startReply(commentId: string) {\n\treplyingToComment.value = commentId\n\tcurrentReply.value = ''\n}\n\n// 取消回复\nfunction cancelReply() {\n\treplyingToComment.value = null\n\tcurrentReply.value = ''\n}\n\n// 接收列表页传值\ntry {\n\tconst ec = getCurrentPages().pop()?.getOpenerEventChannel?.()\n\tec && ec.on('qa', (data: Partial<QA>) => {\n\t\t// 只设置基本信息，不设置统计数据\n\t\tObject.assign(qa, {\n\t\t\tid: data.id,\n\t\t\ttitle: data.title,\n\t\t\tcontent: data.content,\n\t\t\tisUrgent: data.isUrgent,\n\t\t\tuser: data.user,\n\t\t\tpet: data.pet\n\t\t})\n\t\t// 如果有ID，加载详情（这会获取最新的统计数据）\n\t\tif (data.id) {\n\t\t\tloadQuestionDetail(data.id)\n\t\t}\n\t})\n} catch (e) { }\n\n// 设置顶部导航标题与背景色\nonLoad(() => {\n\ttry {\n\t\tuni.setNavigationBarTitle({ title: '问答详情' })\n\t\tuni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\n\t} catch (e) { }\n})\n</script>\n\n<style scoped>\n.page {\n    padding: 28rpx 30rpx;\n    /* 动态计算顶部间距，避免真机调试时env不生效 */\n    min-height: 100vh;\n    background: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n    padding-bottom: 36rpx; /* 具体高度由占位视图控制 */\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n}\n\n.qa-card {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 20rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tpadding: 22rpx 24rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n\twidth: 100%;\n\tmax-width: 624rpx;\n}\n\n/* 左右缺口，和虚线对齐 */\n.qa-card::before,\n.qa-card::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 116rpx;\n\twidth: 26rpx;\n\theight: 26rpx;\n\tbackground: #2c2c2c;\n\tborder-radius: 50%;\n\tbox-shadow: 0 0 0 8rpx #fff;\n}\n\n.qa-card::before {\n\tleft: -13rpx;\n}\n\n.qa-card::after {\n\tright: -13rpx;\n}\n\n.qa-header {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.urgent-tag {\n\twidth: 34rpx;\n\theight: 34rpx;\n\tbackground: #ff6b35;\n\tborder-radius: 6rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.urgent-text {\n\tcolor: #fff;\n\tfont-weight: 700;\n\tfont-size: 22rpx;\n}\n\n.qa-title {\n\tflex: 1;\n\tfont-size: 34rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tpadding: 12rpx 8rpx 10rpx 0;\n}\n\n.follow-btn {\n\tbackground: #fff;\n\tborder: 2rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\tpadding: 6rpx 12rpx;\n\tfont-size: 24rpx;\n\tcolor: #2c2c2c;\n\ttransition: all 0.3s ease;\n}\n\n.follow-btn.followed {\n\tbackground: #2c2c2c;\n\tcolor: #fff;\n}\n\n.qa-divider {\n\theight: 0;\n\tborder-top: 6rpx dashed #2c2c2c;\n\tmargin: 10rpx 0 8rpx;\n}\n\n.qa-desc {\n\tmargin: 18rpx 10rpx 6rpx;\n}\n\n.qa-desc .p {\n\tdisplay: block;\n\tcolor: #2c2c2c;\n\tfont-size: 29rpx;\n\tline-height: 1.8;\n}\n\n/* 问答用户信息 */\n.qa-user-info {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: 16rpx;\n\tgap: 12rpx;\n}\n\n.qa-user-avatar {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.qa-user-name {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tflex: 1;\n}\n\n.qa-time {\n\tfont-size: 24rpx;\n\tcolor: #999;\n}\n\n.answers-section {\n\tmargin-top: 36rpx;\n\tposition: relative;\n\twidth: 100%;\n\tmax-width: 704rpx;\n}\n\n.answers-card {\n\tposition: relative;\n}\n\n.answers-card-bg {\n\tposition: absolute;\n\tleft: 8rpx;\n\tright: 8rpx;\n\theight: 100%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.answers-card-bg.bg1 {\n\ttop: -2rpx;\n\ttransform: rotate(-2deg);\n}\n\n.answers-card-body {\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tz-index: 1;\n}\n\n.answers-ribbon {\n\tposition: absolute;\n\tleft: 12rpx;\n\ttop: -22rpx;\n\tbackground: #333;\n\tcolor: #fff;\n\tpadding: 8rpx 16rpx;\n\ttransform: rotate(-8deg);\n\tbox-shadow: 0 6rpx 10rpx rgba(0, 0, 0, .15);\n}\n\n.answers-ribbon text {\n\tfont-weight: 700;\n\tfont-size: 24rpx;\n}\n\n.answer-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 16rpx;\n}\n\n.answer-card {\n\tbackground: #fff;\n\tborder: 2rpx solid #e9e9e9;\n\tborder-radius: 16rpx;\n\tpadding: 18rpx;\n}\n\n.answer-card.empty {\n\ttext-align: center;\n\tcolor: #aaa;\n}\n\n.empty-text {\n\tfont-size: 26rpx;\n}\n\n.doctor-info {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 14rpx;\n}\n\n.avatar {\n\twidth: 64rpx;\n\theight: 64rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.d-meta {\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-left: 14rpx;\n}\n\n.d-name {\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tfont-size: 28rpx;\n}\n\n.d-title {\n\tcolor: #777;\n\tfont-size: 24rpx;\n}\n\n.answer-text {\n\tdisplay: block;\n\tcolor: #333;\n\tfont-size: 26rpx;\n\tline-height: 1.7;\n}\n\n.answer-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-top: 8rpx;\n}\n\n.answer-time {\n\tfont-size: 22rpx;\n\tcolor: #999;\n}\n\n.like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 6rpx;\n\tpadding: 8rpx 12rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 20rpx;\n}\n\n.like-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.like-count {\n\tfont-size: 22rpx;\n\tcolor: #666;\n}\n\n/* 评论区 */\n.comments-section {\n\tmargin-top: 36rpx;\n\tposition: relative;\n\twidth: 100%;\n\tmax-width: 704rpx;\n}\n\n.comments-card {\n\tposition: relative;\n}\n\n.comments-card-bg {\n\tposition: absolute;\n\tleft: 8rpx;\n\tright: 8rpx;\n\theight: 100%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.comments-card-bg.bg1 {\n\ttop: -2rpx;\n\ttransform: rotate(-2deg);\n}\n\n.comments-card-body {\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tz-index: 1;\n}\n\n.comments-ribbon {\n\tposition: absolute;\n\tleft: 12rpx;\n\ttop: -22rpx;\n\tbackground: #333;\n\tcolor: #fff;\n\tpadding: 8rpx 16rpx;\n\ttransform: rotate(-8deg);\n\tbox-shadow: 0 6rpx 10rpx rgba(0, 0, 0, .15);\n}\n\n.comments-ribbon text {\n\tfont-weight: 700;\n\tfont-size: 24rpx;\n}\n\n.comment-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 16rpx;\n}\n\n.comment-item {\n\tbackground: #fff;\n\tborder: 2rpx solid #e9e9e9;\n\tborder-radius: 16rpx;\n\tpadding: 18rpx;\n}\n\n.comment-item.empty {\n\ttext-align: center;\n\tcolor: #aaa;\n}\n\n.comment-user {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 14rpx;\n}\n\n.c-avatar {\n\twidth: 64rpx;\n\theight: 64rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.c-info {\n\tflex: 1;\n}\n\n.c-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.c-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 14rpx;\n}\n\n.c-name {\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tfont-size: 28rpx;\n}\n\n.c-role {\n\tcolor: #777;\n\tfont-size: 24rpx;\n}\n\n.c-text {\n\tdisplay: block;\n\tcolor: #333;\n\tfont-size: 26rpx;\n\tline-height: 1.7;\n\tmargin-bottom: 10rpx;\n}\n\n.c-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-top: 8rpx;\n}\n\n.c-time {\n\tfont-size: 22rpx;\n\tcolor: #999;\n}\n\n.c-action-buttons {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.reply-btn {\n\tcolor: #666;\n\tfont-size: 24rpx;\n\tpadding: 4rpx 8rpx;\n}\n\n.c-like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 6rpx;\n\tpadding: 8rpx 12rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 20rpx;\n}\n\n.c-like-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.c-like-count {\n\tfont-size: 22rpx;\n\tcolor: #666;\n}\n\n/* 回复列表 */\n.reply-list {\n\tmargin-top: 16rpx;\n\tpadding-left: 76rpx; /* 与评论头像对齐 */\n}\n\n.reply-item {\n\tbackground: #f8f8f8;\n\tborder: 2rpx solid #e0e0e0;\n\tborder-radius: 12rpx;\n\tpadding: 16rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.reply-item:last-child {\n\tmargin-bottom: 0;\n}\n\n.reply-user {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 10rpx;\n}\n\n.r-avatar {\n\twidth: 48rpx;\n\theight: 48rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.r-info {\n\tflex: 1;\n}\n\n.r-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.r-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.r-name {\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tfont-size: 24rpx;\n}\n\n.r-role {\n\tcolor: #777;\n\tfont-size: 22rpx;\n}\n\n.r-text {\n\tdisplay: block;\n\tcolor: #333;\n\tfont-size: 24rpx;\n\tline-height: 1.6;\n\tmargin-bottom: 8rpx;\n}\n\n.r-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-top: 6rpx;\n}\n\n.r-time {\n\tfont-size: 20rpx;\n\tcolor: #999;\n}\n\n.r-like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 4rpx;\n\tpadding: 6rpx 10rpx;\n\tbackground: #f0f0f0;\n\tborder-radius: 16rpx;\n}\n\n.r-like-icon {\n\twidth: 18rpx;\n\theight: 18rpx;\n}\n\n.r-like-count {\n\tfont-size: 20rpx;\n\tcolor: #666;\n}\n\n/* 回复输入框 */\n.reply-input {\n\tmargin-top: 16rpx;\n\tpadding: 16rpx;\n\tbackground: #f8f8f8;\n\tborder: 2rpx solid #e0e0e0;\n\tborder-radius: 12rpx;\n}\n\n.reply-input-field {\n\twidth: 100%;\n\theight: 50rpx;\n\tbackground: #fff;\n\tborder: 2rpx solid #2c2c2c;\n\tborder-radius: 25rpx;\n\tpadding: 0 16rpx;\n\tfont-size: 24rpx;\n\tmargin-bottom: 12rpx;\n\tbox-sizing: border-box;\n}\n\n.reply-input-actions {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 12rpx;\n}\n\n.reply-cancel-btn {\n\tbackground: #f5f5f5;\n\tcolor: #666;\n\tborder: 2rpx solid #ddd;\n\tborder-radius: 16rpx;\n\tpadding: 8rpx 16rpx;\n\tfont-size: 22rpx;\n}\n\n.reply-submit-btn {\n\tbackground: #2c2c2c;\n\tcolor: #fff;\n\tborder: none;\n\tborder-radius: 16rpx;\n\tpadding: 8rpx 16rpx;\n\tfont-size: 22rpx;\n}\n\n.reply-submit-btn:disabled {\n\tbackground: #ccc;\n\tcolor: #999;\n}\n\n/* 底部输入条 */\n.bottom-input-bar {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: env(safe-area-inset-bottom);\n    bottom: calc(0rpx + env(safe-area-inset-bottom));\n    padding: 24rpx 24rpx calc(24rpx + env(safe-area-inset-bottom));\n    background: #fff;\n    border-top: 4rpx solid #2c2c2c;\n    z-index: 100;\n}\n\n.input-tabs {\n\tdisplay: flex;\n\tmargin-bottom: 16rpx;\n\tgap: 8rpx;\n}\n\n.tab-item {\n\tflex: 1;\n\ttext-align: center;\n\tpadding: 12rpx;\n\tbackground: #f5f5f5;\n\tborder: 2rpx solid #ddd;\n\tborder-radius: 8rpx;\n\tfont-size: 24rpx;\n\tcolor: #666;\n}\n\n.tab-item.active {\n\tbackground: #2c2c2c;\n\tcolor: #fff;\n\tborder-color: #2c2c2c;\n}\n\n.input-content {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 16rpx;\n}\n\n.input-field {\n\tdisplay: block;\n\twidth: 100%;\n\tmax-width: 500rpx;\n\theight: 60rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\tpadding: 14rpx 22rpx;\n\tfont-size: 26rpx;\n\tbox-sizing: border-box;\n}\n\n.submit-btn {\n\tbackground: #2c2c2c;\n\tcolor: #fff;\n\tborder: none;\n\tborder-radius: 20rpx;\n\tpadding: 12rpx 24rpx;\n\tfont-size: 24rpx;\n\tmargin-left: 12rpx;\n}\n\n.submit-btn:disabled {\n\tbackground: #ccc;\n\tcolor: #999;\n}\n\n/* 底部占位高度，与广场详情一致 */\n.bottom-safe-spacer {\n    height: calc(88rpx + env(safe-area-inset-bottom));\n    height: calc(88rpx + constant(safe-area-inset-bottom));\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/questionDetail/questionDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","api","reactive","_a","onLoad"],"mappings":"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"}