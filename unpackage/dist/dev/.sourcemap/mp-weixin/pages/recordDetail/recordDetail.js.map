{"version":3,"file":"recordDetail.js","sources":["pages/recordDetail/recordDetail.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVjb3JkRGV0YWlsL3JlY29yZERldGFpbC52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<!-- 轮播图容器 -->\n\t\t<view class=\"carousel-container\">\n\t\t\t<!-- 有记录时显示轮播 -->\n\t\t\t<swiper v-if=\"recordList.length > 0\" class=\"record-swiper\" :current=\"currentIndex\" @change=\"onSwiperChange\"\n\t\t\t\t:indicator-dots=\"false\" :autoplay=\"false\" :circular=\"true\" :duration=\"300\">\n\t\t\t\t<swiper-item v-for=\"(record, index) in recordList\" :key=\"index\" class=\"swiper-item\">\n\t\t\t\t\t<!-- 装饰图标 -->\n\t\t\t\t\t<image class=\"decor\" :class=\"{ 'decor--dog-ccw': isDogTop(index) }\" :src=\"getTopImage(index)\">\n\t\t\t\t\t</image>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"sheet\" :class=\"{ 'sheet--edit': editMode }\">\n\t\t\t\t\t\t<view class=\"sheet-bg bg1\"></view>\n\t\t\t\t\t\t<view class=\"sheet-body\">\n\t\t\t\t\t\t\t<!-- 记录类型头部 -->\n\t\t\t\t\t\t\t<view class=\"header\">\n\t\t\t\t\t\t\t\t<view class=\"type-info\">\n\t\t\t\t\t\t\t\t\t<image class=\"type-icon\" :src=\"record.type.icon\" mode=\"aspectFit\" />\n\t\t\t\t\t\t\t\t\t<view class=\"type-details\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"type-title\">{{ record.type.title }}</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"record-time\">{{ formatTime(record.data.time) }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"pet-info\">\n\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t<image class=\"pet-avatar\" :src=\"record.data.petAvatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"pet-name\">{{ record.data.petName }}</text>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<view v-else class=\"pet-selector\">\n\t\t\t\t\t\t\t<scroll-view class=\"pet-scroll\" scroll-x=\"true\" show-scrollbar=\"false\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"pet-option\" v-for=\"pet in petList\" :key=\"pet.id\"\n\t\t\t\t\t\t\t\t\t\t\t\t:class=\"{ active: form.petId === pet.id }\" @tap=\"selectPet(pet)\">\n\t\t\t\t\t\t\t\t\t<image class=\"pet-avatar\" :src=\"pet.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t<text class=\"pet-name\">{{ pet.name }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</scroll-view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t\t\t\t<!-- 记录内容 -->\n\t\t\t\t\t\t\t<view class=\"content-section\">\n\t\t\t\t\t\t\t\t<!-- 饮食记录 -->\n\t\t\t\t\t\t\t\t<view v-if=\"record.type.key === 'eating'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">食物类型：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.foodType || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.foodType\" placeholder=\"如：猫粮、罐头\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">食物重量：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.weight ? record.data.weight + 'g' : '未填写'\n\t\t\t\t\t\t\t\t\t\t\t\t}}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<view v-else class=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" v-model.number=\"form.weight\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"重量\" />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"unit\">g</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.note || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.note\" placeholder=\"记录饮食情况...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 饮水记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'drinking'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">饮水量：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.amount ? record.data.amount + 'ml' :\n\t\t\t\t\t\t\t\t\t\t\t\t'未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<view v-else class=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" v-model.number=\"form.amount\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"饮水量\" />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"unit\">ml</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">饮水方式：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.method || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.method\" placeholder=\"如：水碗、自动饮水机\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.note || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.note\" placeholder=\"记录饮水情况...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 体重记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'weight'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">体重：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.weight ? record.data.weight + 'kg' :\n\t\t\t\t\t\t\t\t\t\t\t\t'未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<view v-else class=\"input-group\">\n\t\t\t\t\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" step=\"0.1\" v-model.number=\"form.weight\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"体重\" />\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"unit\">kg</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">测量方式：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.method || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.method\" placeholder=\"如：电子秤、体重秤\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.note || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.note\" placeholder=\"记录体重变化...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 洗护记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'washing'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">洗护类型：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.washType || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.washType\" placeholder=\"如：洗澡、梳毛、剪指甲\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">使用产品：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.product || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.product\" placeholder=\"如：宠物专用洗发水\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.note || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.note\" placeholder=\"记录洗护情况...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 便便记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'shit'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">便便状态：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.status || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.status\" placeholder=\"如：正常、偏软、偏硬\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">颜色：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.color || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.color\" placeholder=\"如：棕色、黑色\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.note || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.note\" placeholder=\"记录便便情况...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 记事记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'noting'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">记事内容：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.content || '无内容' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.content\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"记录今天发生的有趣事情...\" />\n\t\t\t\t\t\t\t\t\t</view>\n                                    <view class=\"form-row\" v-if=\"editMode || (record.data.photos && record.data.photos.length)\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">相关照片：</text>\n\t\t\t\t\t\t\t\t<view v-if=\"!editMode\" class=\"photo-gallery\">\n\t\t\t\t\t\t\t\t\t<image v-for=\"(photo, i) in record.data.photos\" :key=\"i\" class=\"photo\"\n\t\t\t\t\t\t\t\t\t\t:src=\"photo\" mode=\"aspectFill\" @tap=\"previewPhoto(record.data.photos, i)\" />\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<!-- 编辑模式：可删除/新增 -->\n\t\t\t\t\t\t\t\t<view v-else>\n\t\t\t\t\t\t\t\t\t<view class=\"photo-uploader\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"photo-thumb\" v-for=\"(p, i) in (form.photos || [])\" :key=\"i\" @tap=\"previewPhoto((form.photos||[]), i)\">\n\t\t\t\t\t\t\t\t\t\t\t<image class=\"photo-thumb-img\" :src=\"p\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"photo-remove\" @tap.stop=\"removeEditNotePhoto(i)\">×</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"photo-add\" @tap=\"selectEditNotePhotos\">\n\t\t\t\t\t\t\t\t\t\t\t<text>＋</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<text class=\"uploader-hint\">最多选择9张，开发环境会直接使用本地路径</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 异常记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'abnormal'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">异常类型：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.abnormalType || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.abnormalType\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"如：食欲不振、呕吐、腹泻\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">严重程度：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.severity || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.severity\" placeholder=\"如：轻微、中等、严重\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">详细描述：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.description || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.description\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"详细描述异常情况...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t\t<!-- 用药记录 -->\n\t\t\t\t\t\t\t\t<view v-else-if=\"record.type.key === 'medicine'\" class=\"form-section\">\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">药品名称：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.medicineName || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.medicineName\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"如：驱虫药、维生素\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">用药剂量：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.dosage || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.dosage\" placeholder=\"如：1片、5ml\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">用药时间：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.medicineTime || '未填写' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.medicineTime\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"如：饭后30分钟\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"!editMode\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"value\">{{ record.data.note || '无' }}</text>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.note\" placeholder=\"记录用药情况...\" />\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<!-- 操作按钮 -->\n\t\t\t\t\t\t\t<view class=\"action-row\">\n\t\t\t\t\t\t\t\t<button v-if=\"!editMode\" class=\"btn ghost with-icon\" @tap=\"startEdit\">\n\t\t\t\t\t\t\t\t\t<image class=\"btn-icon\" src=\"/static/tarBar/index-active.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t<text>编辑</text>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<view v-else class=\"edit-actions\">\n\t\t\t\t\t\t\t\t\t<button class=\"btn ghost\" @tap=\"cancelEdit\">取消</button>\n\t\t\t\t\t\t\t\t\t<button class=\"btn\" @tap=\"saveEdit\">保存</button>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<button v-if=\"!editMode\" class=\"btn delete-btn with-icon\" @tap=\"deleteRecord\">\n\t\t\t\t\t\t\t\t\t<image class=\"btn-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t<text>删除</text>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</swiper-item>\n\t\t\t</swiper>\n\t\t\t\n\t\t\t<!-- 轮播指示器 -->\n\t\t\t<view v-if=\"recordList.length > 0\" class=\"carousel-indicators\">\n\t\t\t\t<view v-for=\"(record, index) in recordList\" :key=\"index\"\n\t\t\t\t\t:class=\"['indicator', { active: index === currentIndex }]\" @tap=\"goToSlide(index)\"></view>\n\t\t\t</view>\n\n\t\t\t<!-- 空状态 -->\n\t\t\t<view v-else class=\"empty\">\n\t\t\t\t<image class=\"empty-img\" src=\"/static/record/nothing-cat.png\" mode=\"widthFix\" />\n\t\t\t\t<text class=\"empty-text\">这个类型还没有记录哦～</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 浮动添加按钮 -->\n\t\t<view class=\"fab\" @tap=\"showAddModal\">\n\t\t\t<image class=\"fab-icon\" src=\"/static/record/add.png\" mode=\"widthFix\" />\n\t\t</view>\n\n\t\t<!-- 底部装饰：仅在有记录时显示 -->\n\t\t<image v-if=\"recordList.length > 0\" class=\"bottom-cat\" :class=\"{ 'bottom-cat--dog': isDogBottom(currentIndex) }\"\n\t\t\t:src=\"getBottomImage(currentIndex)\" mode=\"widthFix\" />\n\n\t\t<!-- 添加记录弹窗 -->\n\t\t<view v-if=\"showModal\" class=\"modal-overlay\" @tap=\"hideAddModal\">\n\t\t\t<view class=\"modal-content\" @tap.stop>\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">添加{{ currentRecord.title }}记录</text>\n\t\t\t\t\t<view class=\"modal-close\" @tap=\"hideAddModal\">×</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-body\">\n\t\t\t\t\t<!-- 宠物选择（横向滚动，与编辑模式一致） -->\n\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t<text class=\"label\">选择宠物：</text>\n\t\t\t\t\t\t<scroll-view class=\"pet-scroll\" scroll-x=\"true\" show-scrollbar=\"false\">\n\t\t\t\t\t\t\t<view class=\"pet-option\" v-for=\"(pet, index) in petList\" :key=\"index\"\n\t\t\t\t\t\t\t\t:class=\"{ selected: selectedPets.includes(index) }\" @tap=\"togglePet(index)\">\n\t\t\t\t\t\t\t\t\t<image class=\"pet-avatar\" :src=\"pet.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t<text class=\"pet-name\">{{ pet.name }}</text>\n\t\t\t\t\t\t\t\t\t<view v-if=\"selectedPets.includes(index)\" class=\"check-mark\">✓</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</scroll-view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 饮食记录表单 -->\n\t\t\t\t\t<view v-if=\"currentRecord.key === 'eating'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">食物类型：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.foodType\" placeholder=\"如：猫粮、罐头\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">食物重量：</text>\n\t\t\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" v-model.number=\"newRecord.weight\" placeholder=\"重量\" />\n\t\t\t\t\t\t\t\t<text class=\"unit\">g</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.note\" placeholder=\"记录饮食情况...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 饮水记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'drinking'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">饮水量：</text>\n\t\t\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" v-model.number=\"newRecord.amount\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"饮水量\" />\n\t\t\t\t\t\t\t\t<text class=\"unit\">ml</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">饮水方式：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.method\" placeholder=\"如：水碗、自动饮水机\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.note\" placeholder=\"记录饮水情况...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 体重记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'weight'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">体重：</text>\n\t\t\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" step=\"0.1\" v-model.number=\"newRecord.weight\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"体重\" />\n\t\t\t\t\t\t\t\t<text class=\"unit\">kg</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">测量方式：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.method\" placeholder=\"如：电子秤、体重秤\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.note\" placeholder=\"记录体重变化...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 洗护记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'washing'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">洗护类型：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.washType\" placeholder=\"如：洗澡、梳毛、剪指甲\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">使用产品：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.product\" placeholder=\"如：宠物专用洗发水\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.note\" placeholder=\"记录洗护情况...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 便便记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'shit'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">便便状态：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.status\" placeholder=\"如：正常、偏软、偏硬\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">颜色：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.color\" placeholder=\"如：棕色、黑色\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.note\" placeholder=\"记录便便情况...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 记事记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'noting'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">记事内容：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.content\" placeholder=\"记录今天发生的有趣事情...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">添加图片：</text>\n\t\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t\t<view class=\"photo-uploader\">\n\t\t\t\t\t\t\t\t\t<view class=\"photo-thumb\" v-for=\"(p, i) in (newRecord.photos || [])\" :key=\"i\"\n\t\t\t\t\t\t\t\t\t\t@tap=\"previewPhoto((newRecord.photos || []), i)\">\n\t\t\t\t\t\t\t\t\t\t<image class=\"photo-thumb-img\" :src=\"p\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t\t<view class=\"photo-remove\" @tap.stop=\"removeNotePhoto(i)\">×</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"photo-add\" @tap=\"selectNotePhotos\">\n\t\t\t\t\t\t\t\t\t\t<text>＋</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"uploader-hint\">最多选择9张，开发环境会直接使用本地路径</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 异常记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'abnormal'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">异常类型：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.abnormalType\" placeholder=\"如：食欲不振、呕吐、腹泻\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">严重程度：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.severity\" placeholder=\"如：轻微、中等、严重\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">详细描述：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.description\" placeholder=\"详细描述异常情况...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 用药记录表单 -->\n\t\t\t\t\t<view v-else-if=\"currentRecord.key === 'medicine'\" class=\"form-section\">\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">药品名称：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.medicineName\" placeholder=\"如：驱虫药、维生素\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">用药剂量：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.dosage\" placeholder=\"如：1片、5ml\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">用药时间：</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"newRecord.medicineTime\" placeholder=\"如：饭后30分钟\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t\t<text class=\"label\">备注：</text>\n\t\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"newRecord.note\" placeholder=\"记录用药情况...\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 弹窗按钮 -->\n\t\t\t\t\t<view class=\"modal-actions\">\n\t\t\t\t\t\t<button class=\"btn ghost\" @tap=\"hideAddModal\">取消</button>\n\t\t\t\t\t\t<button class=\"btn\" @tap=\"saveNewRecord\">保存</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, reactive, computed, onUnmounted } from 'vue'\nimport { uploadImages } from '@/utils/upload.js'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\n\n// 记录类型配置\nconst recordTypes = {\n\teating: { key: 'eating', title: '饮食', icon: '/static/record/eating.png' },\n\tdrinking: { key: 'drinking', title: '饮水', icon: '/static/record/drinking.png' },\n\tweight: { key: 'weight', title: '体重', icon: '/static/record/weight.png' },\n\twashing: { key: 'washing', title: '洗护', icon: '/static/record/washing.png' },\n\tshit: { key: 'shit', title: '便便', icon: '/static/record/shit.png' },\n\tnoting: { key: 'noting', title: '记事', icon: '/static/record/noting.png' },\n\tabnormal: { key: 'abnormal', title: '异常', icon: '/static/record/abnormal.png' },\n\tmedicine: { key: 'medicine', title: '用药', icon: '/static/record/medicine.png' }\n}\n\n// 当前记录类型\nconst currentRecord = ref({})\n// 进入页面的前端类型（eating/drinking/...），用于弹窗默认表单\nconst currentFrontType = ref('eating')\n// 记录数据\nconst recordData = ref({})\n// 编辑模式\nconst editMode = ref(false)\n// 表单数据\nconst form = reactive({})\n// 弹窗状态\nconst showModal = ref(false)\n// 新记录数据\nconst newRecord = reactive({})\n// 宠物列表（从后端加载）\nconst petList = ref([])\nconst selectedPets = ref([])\n// 展开状态\nconst showAllPets = ref(false)\n\n// 轮播图相关\nconst currentIndex = ref(0)\nconst recordList = ref([])\n\n// 图片配置\nconst imageConfig = [\n\t{ top: '/static/record/cat.png', bottom: '/static/record/gray-cat.png' },\n\t{ top: '/static/record/up-cat_2.png', bottom: '/static/record/bottom-cat_2.png' },\n\t{ top: '/static/record/up-dog_1.png', bottom: '/static/record/bottom-dog_1.png' }\n]\n\n// 获取顶部图片\nfunction getTopImage(index) {\n\tconst configIndex = index % imageConfig.length\n\treturn imageConfig[configIndex].top\n}\n\n// 获取底部图片\nfunction getBottomImage(index) {\n\tconst configIndex = index % imageConfig.length\n\treturn imageConfig[configIndex].bottom\n}\n\nfunction isDogBottom(index) {\n\tconst configIndex = index % imageConfig.length\n\treturn imageConfig[configIndex].bottom === '/static/record/bottom-dog_1.png'\n}\n\nfunction isDogTop(index) {\n\tconst configIndex = index % imageConfig.length\n\treturn imageConfig[configIndex].top === '/static/record/up-dog_1.png'\n}\n\nonLoad(async (query) => {\n\tuni.setNavigationBarTitle({ title: '记录详情' })\n\tuni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\n\t// 加载宠物，再加载记录\n\tawait loadPets()\n\tawait initRecordList(query)\n})\n\n// 返回本页或从其他页面回到当前页时，自动刷新记录\nonShow(async () => {\n\tawait initRecordList({ type: currentFrontType.value })\n})\n\n// 监听全局事件，兼容从其它页面新建记录的情况\nconst onRecordsChanged = async () => {\n\tawait initRecordList({ type: currentFrontType.value })\n}\nuni.$on && uni.$on('records:changed', onRecordsChanged)\nonUnmounted(() => {\n\tuni.$off && uni.$off('records:changed', onRecordsChanged)\n})\n\n// 初始化记录列表\nasync function initRecordList(query) {\n\tconst targetType = query.type || 'eating'\n\tcurrentFrontType.value = targetType\n\tconst typeMap = { eating: 'feed', drinking: 'water', weight: 'weight', washing: 'clean', noting: 'diary', shit: 'diary', abnormal: 'diary', medicine: 'medicine' }\n\tconst backendType = typeMap[targetType] || 'diary'\n\ttry {\n\t\tconst params = { type: backendType, page: 1, limit: 20 }\n\t\tif (query.startDate && query.endDate) {\n\t\t\tparams.startDate = query.startDate\n\t\t\tparams.endDate = query.endDate\n\t\t}\n\t\tconst res = await api.getRecords(params)\n\t\tconst list = Array.isArray(res) ? res : (res.records || res.data || res.list || [])\n\t\t// 将后端数据映射为前端展示结构\n\t\tlet mapped = list.map(r => {\n\t\t\tconst pet = petList.value.find(p => p.id === r.petId)\n\t\t\t// 解析 payload：后端可能返回对象或字符串\n\t\t\tconst rawPayload = r?.payload\n\t\t\tlet payloadObj = {}\n\t\t\tif (rawPayload && typeof rawPayload === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\tpayloadObj = JSON.parse(rawPayload)\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.warn('记录 payload 解析失败(字符串非 JSON):', r?.id, rawPayload)\n\t\t\t\t\tpayloadObj = {}\n\t\t\t\t}\n\t\t\t} else if (rawPayload && typeof rawPayload === 'object') {\n\t\t\t\tpayloadObj = rawPayload\n\t\t\t}\n\t\t\tconst frontType = determineFrontType({ ...r, payload: payloadObj }, targetType)\n\t\t\tconst typeConf = recordTypes[frontType] || recordTypes.noting\n\t\t\treturn {\n\t\t\t\tid: r.id,\n\t\t\t\ttype: typeConf,\n\t\t\t\tdata: {\n\t\t\t\t\ttime: r.time,\n\t\t\t\t\tpetName: pet?.name || '',\n\t\t\t\t\tpetAvatar: pet?.avatarUrl || '/static/logo.png',\n\t\t\t\t\t// 透传后端 payload（已保证为对象）\n\t\t\t\t\t...payloadObj\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t// 当请求的是 diary（便便/异常/记事混合）时，仅保留当前前端类型的记录\n\t\tif (backendType === 'diary') {\n\t\t\tmapped = mapped.filter(item => item.type?.key === targetType)\n\t\t}\n\t\trecordList.value = mapped\n\t\tcurrentIndex.value = 0\n\t\tif (recordList.value.length > 0) {\n\t\t\tconst currentRecordData = recordList.value[currentIndex.value]\n\t\t\tcurrentRecord.value = currentRecordData.type\n\t\t\trecordData.value = currentRecordData.data\n\t\t} else {\n\t\t\t// 无记录时，默认使用“饮食”类型，确保弹窗内有可填写表单\n\t\t\tcurrentRecord.value = recordTypes[currentFrontType.value] || recordTypes.eating\n\t\t\trecordData.value = {}\n\t\t}\n\t} catch (e) {\n\t\tconsole.warn('加载记录失败:', e)\n\t\trecordList.value = []\n\t\t// 出错也给一个默认类型，避免弹窗没有可选内容\n\t\tcurrentRecord.value = recordTypes[currentFrontType.value] || recordTypes.eating\n\t\trecordData.value = {}\n\t}\n}\n\n// 根据后端记录推断前端展示类型\nfunction determineFrontType(r, fallbackFrontType) {\n    // 后端使用统一的 diary 类型承载多个前端子类型\n    if (r?.type === 'diary') {\n        const p = r?.payload || {}\n        if (p.status || p.color) return 'shit'\n        if (p.abnormalType || p.severity) return 'abnormal'\n        return 'noting'\n    }\n    // 其它类型做反向映射\n    const reverse = {\n        feed: 'eating',\n        water: 'drinking',\n        weight: 'weight',\n        clean: 'washing',\n        medicine: 'medicine'\n    }\n    return reverse[r?.type] || fallbackFrontType || 'noting'\n}\n\nasync function loadPets() {\n\ttry {\n\t\tconst res = await api.getPets()\n\t\tconst list = Array.isArray(res) ? res : (res.data || [])\n\t\tpetList.value = list.map(p => ({ id: p.id, name: p.name, avatar: p.avatarUrl || '/static/logo.png', avatarUrl: p.avatarUrl }))\n\t} catch (e) {\n\t\tpetList.value = []\n\t}\n}\n\n// 格式化时间\nfunction formatTime(time) {\n\tconst date = new Date(time)\n\treturn `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`\n}\n\n// 轮播图事件处理\nfunction onSwiperChange(e) {\n\tcurrentIndex.value = e.detail.current\n\t// 更新当前记录数据\n\tif (recordList.value.length > 0) {\n\t\tconst currentRecordData = recordList.value[currentIndex.value]\n\t\tcurrentRecord.value = currentRecordData.type\n\t\trecordData.value = currentRecordData.data\n\t}\n}\n\n// 跳转到指定轮播项\nfunction goToSlide(index) {\n\tcurrentIndex.value = index\n\t// 更新当前记录数据\n\tif (recordList.value.length > 0) {\n\t\tconst currentRecordData = recordList.value[currentIndex.value]\n\t\tcurrentRecord.value = currentRecordData.type\n\t\trecordData.value = currentRecordData.data\n\t}\n}\n\n// 编辑功能\nfunction startEdit() {\n\teditMode.value = true\n\tObject.assign(form, recordData.value)\n\t// 初始化宠物ID\n\tconst currentPet = petList.value.find(pet => pet.name === recordData.value.petName)\n\tif (currentPet) {\n\t\tform.petId = currentPet.id\n\t}\n    // 初始化记事图片数组，确保编辑态可显示“添加图片”\n    if (!Array.isArray(form.photos)) {\n        form.photos = Array.isArray(recordData.value.photos) ? [...recordData.value.photos] : []\n\t}\n}\n\nfunction cancelEdit() {\n\teditMode.value = false\n}\n\nfunction selectPet(pet) {\n\tform.petId = pet.id\n\tform.petName = pet.name\n\tform.petAvatar = pet.avatar\n}\n\n// 编辑模式：选择/删除记事图片\nasync function selectEditNotePhotos() {\n    try {\n        const chosen = await new Promise((resolve, reject) => {\n            uni.chooseImage({ count: 9, sizeType: ['compressed'], success: resolve, fail: reject })\n        })\n        const tempPaths = chosen?.tempFilePaths || []\n        const urls = await uploadImages(tempPaths)\n        if (!form.photos) form.photos = []\n        form.photos = [...form.photos, ...urls].slice(0, 9)\n    } catch (e) {\n        uni.showToast({ title: '选择图片失败', icon: 'none' })\n    }\n}\n\nfunction removeEditNotePhoto(index) {\n    if (!form.photos) return\n    uni.showModal({\n        title: '删除照片',\n        content: '确定要删除这张照片吗？',\n        confirmText: '删除',\n        cancelText: '取消',\n        confirmColor: '#ff4757',\n        success: (res) => {\n            if (res.confirm) {\n                form.photos.splice(index, 1)\n            }\n        }\n    })\n}\n\nfunction togglePetList() {\n\tshowAllPets.value = !showAllPets.value\n}\n\nfunction saveEdit() {\n\t// 更新当前轮播项的数据并同步到后端\n\tif (recordList.value.length > 0) {\n\t\tObject.assign(recordList.value[currentIndex.value].data, form)\n\t\trecordData.value = recordList.value[currentIndex.value].data\n\t\tconst current = recordList.value[currentIndex.value]\n\t\t// 仅当后端有记录ID时尝试更新\n\t\tif (current.id) {\n\t\t\ttry {\n\t\t\t\t// 仅提交该类型相关的 payload 字段\n\t\t\t\tconst key = current.type.key\n\t\t\t\tconst payload = (() => {\n\t\t\t\t\tif (key === 'noting') return { content: recordData.value.content, photos: recordData.value.photos || [] }\n\t\t\t\t\tif (key === 'eating') return { foodType: recordData.value.foodType, weight: recordData.value.weight, note: recordData.value.note }\n\t\t\t\t\tif (key === 'drinking') return { amount: recordData.value.amount, method: recordData.value.method, note: recordData.value.note }\n\t\t\t\t\tif (key === 'weight') return { weight: recordData.value.weight, method: recordData.value.method, note: recordData.value.note }\n\t\t\t\t\tif (key === 'washing') return { washType: recordData.value.washType, product: recordData.value.product, note: recordData.value.note }\n\t\t\t\t\tif (key === 'shit') return { status: recordData.value.status, color: recordData.value.color, note: recordData.value.note }\n\t\t\t\t\tif (key === 'abnormal') return { abnormalType: recordData.value.abnormalType, severity: recordData.value.severity, description: recordData.value.description }\n\t\t\t\t\tif (key === 'medicine') return { medicineName: recordData.value.medicineName, dosage: recordData.value.dosage, medicineTime: recordData.value.medicineTime, note: recordData.value.note }\n\t\t\t\t\treturn {}\n\t\t\t\t})()\n\t\t\t\tapi.updateRecord(current.id, { payload })\n\t\t\t} catch (e) {\n\t\t\t\t// 忽略失败，前端仍保持编辑结果\n\t\t\t}\n\t\t}\n\t}\n\teditMode.value = false\n\tuni.showToast({ title: '保存成功', icon: 'success' })\n}\n\n// 删除记录\nasync function deleteRecord() {\n\tuni.showModal({\n\t\ttitle: '确认删除',\n\t\tcontent: `确定要删除这条${currentRecord.value.title}记录吗？`,\n\t\tconfirmText: '删除',\n\t\tcancelText: '取消',\n\t\tconfirmColor: '#ff4757',\n\t\tsuccess: async (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\ttry {\n\t\t\t\t\t// 获取当前记录的ID\n\t\t\t\t\tconst currentRecordData = recordList.value[currentIndex.value]\n\t\t\t\t\tif (currentRecordData && currentRecordData.id) {\n\t\t\t\t\t\t// 调用后端API删除记录\n\t\t\t\t\t\tawait api.deleteRecord(currentRecordData.id)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 从轮播图中删除当前记录\n\t\t\t\t\trecordList.value.splice(currentIndex.value, 1)\n\t\t\t\t\t\n\t\t\t\t\t// 如果删除后没有记录了，返回上一页\n\t\t\t\t\tif (recordList.value.length === 0) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\t}, 1500)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 调整当前索引\n\t\t\t\t\tif (currentIndex.value >= recordList.value.length) {\n\t\t\t\t\t\tcurrentIndex.value = recordList.value.length - 1\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 更新当前记录数据\n\t\t\t\t\tconst newCurrentRecordData = recordList.value[currentIndex.value]\n\t\t\t\t\tcurrentRecord.value = newCurrentRecordData.type\n\t\t\t\t\trecordData.value = newCurrentRecordData.data\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t})\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('删除记录失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n\n// 宠物选择处理\nfunction togglePet(index) {\n\tconst petIndex = selectedPets.value.indexOf(index)\n\tif (petIndex > -1) {\n\t\t// 如果已选择，则取消选择\n\t\tselectedPets.value.splice(petIndex, 1)\n\t} else {\n\t\t// 如果未选择，则添加选择\n\t\tselectedPets.value.push(index)\n\t}\n\t// 更新新记录中的宠物信息\n\tnewRecord.selectedPets = selectedPets.value.map(index => petList.value[index])\n}\n\n// 展开/收起宠物列表\nfunction toggleExpand() {\n\tshowAllPets.value = !showAllPets.value\n}\n\n// 显示添加弹窗\nfunction showAddModal() {\n\t// 重置新记录数据\n\tObject.keys(newRecord).forEach(key => delete newRecord[key])\n\t// 重置选择状态\n\tselectedPets.value = []\n\t// 重置展开状态\n\tshowAllPets.value = false\n\t// 当前卡片类型优先；没有则使用进入页的类型作为默认表单\n\tif (!currentRecord.value || !currentRecord.value.key) {\n\t\tconst slideType = recordList.value[currentIndex.value]?.type?.key\n\t\tcurrentRecord.value = recordTypes[slideType] || recordTypes[currentFrontType.value] || recordTypes.eating\n\t}\n\tshowModal.value = true\n}\n\n// 隐藏添加弹窗\nfunction hideAddModal() {\n\tshowModal.value = false\n}\n\n// 选择记事图片\nasync function selectNotePhotos() {\n\ttry {\n\t\tconst chosen = await new Promise((resolve, reject) => {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 9,\n\t\t\t\tsizeType: ['compressed'],\n\t\t\t\tsuccess: resolve,\n\t\t\t\tfail: reject\n\t\t\t})\n\t\t})\n\t\tconst tempPaths = chosen?.tempFilePaths || []\n\t\t// 开发环境：uploadImages 会直接返回本地路径；生产可替换为对象存储后的 URL\n\t\tconst urls = await uploadImages(tempPaths)\n\t\tif (!newRecord.photos) newRecord.photos = []\n\t\tnewRecord.photos = [...newRecord.photos, ...urls].slice(0, 9)\n\t} catch (e) {\n\t\tuni.showToast({ title: '选择图片失败', icon: 'none' })\n\t}\n}\n\nfunction removeNotePhoto(index) {\n    if (!newRecord.photos) return\n    uni.showModal({\n        title: '删除照片',\n        content: '确定要删除这张照片吗？',\n        confirmText: '删除',\n        cancelText: '取消',\n        confirmColor: '#ff4757',\n        success: (res) => {\n            if (res.confirm) {\n                newRecord.photos.splice(index, 1)\n            }\n        }\n    })\n}\n\nfunction previewPhoto(list, index) {\n\tif (!Array.isArray(list) || list.length === 0) return\n\tuni.previewImage({\n\t\tcurrent: index,\n\t\turls: list\n\t})\n}\n\n// 保存新记录\nasync function saveNewRecord() {\n\tif (selectedPets.value.length === 0) {\n\t\tuni.showToast({ title: '请选择宠物', icon: 'none' })\n\t\treturn\n\t}\n\tconst typeMap = { eating: 'feed', drinking: 'water', weight: 'weight', washing: 'clean', noting: 'diary', shit: 'diary', abnormal: 'diary', medicine: 'medicine' }\n\tconst payloadBuilder = {\n\t\teating: () => ({ foodType: newRecord.foodType, weight: newRecord.weight, note: newRecord.note }),\n\t\tdrinking: () => ({ amount: newRecord.amount, method: newRecord.method, note: newRecord.note }),\n\t\tweight: () => ({ weight: newRecord.weight, method: newRecord.method, note: newRecord.note }),\n\t\twashing: () => ({ washType: newRecord.washType, product: newRecord.product, note: newRecord.note }),\n\t\tnoting: () => ({ content: newRecord.content, photos: newRecord.photos || [] }),\n\t\tshit: () => ({ status: newRecord.status, color: newRecord.color, note: newRecord.note }),\n\t\tabnormal: () => ({ abnormalType: newRecord.abnormalType, severity: newRecord.severity, description: newRecord.description }),\n\t\tmedicine: () => ({ medicineName: newRecord.medicineName, dosage: newRecord.dosage, medicineTime: newRecord.medicineTime, note: newRecord.note })\n\t}\n\tconst frontKey = currentRecord.value.key\n\tconst backendType = typeMap[frontKey] || 'diary'\n\tconst payload = (payloadBuilder[frontKey] ? payloadBuilder[frontKey]() : payloadBuilder['noting']())\n\ttry {\n\t\tconst createdDisplayItems = []\n\t\tfor (const idx of selectedPets.value) {\n\t\t\tconst pet = petList.value[idx]\n\t\t\tconst created = await api.createRecord({ petId: pet.id, type: backendType, payload, time: new Date().toISOString() })\n\t\t\t// 本地立即插入一条，提升“实时刷新”的观感\n\t\t\tcreatedDisplayItems.push({\n\t\t\t\ttype: recordTypes[frontKey] || recordTypes.noting,\n\t\t\t\tdata: {\n\t\t\t\t\ttime: created?.time || new Date().toISOString(),\n\t\t\t\t\tpetName: pet.name,\n\t\t\t\t\tpetAvatar: pet.avatarUrl || pet.avatar || '/static/logo.png',\n\t\t\t\t\t...(payload || {})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t\tif (createdDisplayItems.length > 0) {\n\t\t\trecordList.value = [...createdDisplayItems, ...recordList.value]\n\t\t\tcurrentIndex.value = 0\n\t\t\tcurrentRecord.value = createdDisplayItems[0].type\n\t\t\trecordData.value = createdDisplayItems[0].data\n\t\t}\n\t\tuni.showToast({ title: '记录已保存', icon: 'success' })\n\thideAddModal()\n\t\t// 重新加载列表\n\t\tawait initRecordList({ type: frontKey })\n\t} catch (e) {\n\t\tuni.showToast({ title: '保存失败', icon: 'none' })\n\t}\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tpadding: 24rpx;\n\tpadding-top: calc(40rpx + env(safe-area-inset-top));\n\tpadding-top: calc(40rpx + constant(safe-area-inset-top));\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n\tposition: relative;\n\toverflow: hidden;\n\t/* 整页不滚动 */\n}\n\n/* 装饰图标 */\n.decor {\n\twidth: 200rpx;\n\theight: 200rpx;\n\tz-index: 10;\n}\n\n.decor--dog-ccw {\n\ttop: -5rpx;\n\tleft: 8nrpx;\n\ttransform: rotate(-5deg);\n\ttransform-origin: center center;\n}\n\n/* 轮播图容器 */\n.carousel-container {\n\twidth: 100%;\n\theight: calc(100vh - 120rpx);\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: flex-start;\n\tpadding: 20rpx 30rpx 0 30rpx;\n\tbox-sizing: border-box;\n}\n\n.record-swiper {\n\twidth: 100%;\n\theight: calc(100% - 80rpx);\n}\n\n.swiper-item {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-start;\n    padding: 0 10rpx;\n    box-sizing: border-box;\n\toverflow: visible;\n\t/* 外层不滚动不裁切 */\n    position: relative;\n}\n\n.sheet {\n\tposition: relative;\n\twidth: 100%;\n\tmax-width: 700rpx;\n}\n\n/* 编辑模式下限制卡片最大宽度，避免视觉跳变过宽 */\n.sheet--edit {\n\tmax-width: 590rpx;\n\t/* 可按需微调 580~620rpx */\n}\n\n.sheet-bg {\n\tposition: absolute;\n\tleft: 12rpx;\n\tright: 12rpx;\n\theight: 96%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 32rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.sheet-bg.bg1 {\n\ttop: -4rpx;\n\ttransform: rotate(-4.5deg);\n}\n\n.sheet-body {\n\twidth: 100%;\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 32rpx;\n\tpadding: 32rpx 28rpx 120rpx 28rpx;\n\tz-index: 1;\n\tmin-height: 600rpx;\n\tbox-sizing: border-box;\n\toverflow: visible;\n\t/* 内容不滚动 */\n}\n\n/* 轮播指示器 */\n.carousel-indicators {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 16rpx;\n\tmargin-top: 40rpx;\n}\n\n/* 空状态 */\n.empty {\n\twidth: 100%;\n\tmin-height: 60vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 20rpx;\n}\n\n.empty-img {\n\twidth: 380rpx;\n}\n\n.empty-text {\n\tcolor: #666;\n\tfont-size: 28rpx;\n}\n\n.indicator {\n\twidth: 16rpx;\n\theight: 16rpx;\n\tborder-radius: 50%;\n\tbackground: #ccc;\n\ttransition: all 0.3s ease;\n}\n\n.indicator.active {\n\tbackground: #2c2c2c;\n\ttransform: scale(1.2);\n}\n\n.header {\n\tmargin-top: 15rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n}\n\n.type-info {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 16rpx;\n}\n\n.type-icon {\n\twidth: 60rpx;\n\theight: 60rpx;\n}\n\n.type-details {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 4rpx;\n}\n\n.type-title {\n\tfont-size: 32rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.record-time {\n\tfont-size: 24rpx;\n\tcolor: #666;\n}\n\n.pet-info {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.pet-avatar {\n\twidth: 40rpx;\n\theight: 40rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n}\n\n.pet-name {\n\tfont-size: 28rpx;\n\tcolor: #2c2c2c;\n}\n\n.action-row {\n\tposition: absolute;\n\tleft: 28rpx;\n\tright: 28rpx;\n\tbottom: 28rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tz-index: 2;\n}\n\n.edit-actions {\n\tdisplay: flex;\n\tjustify-content: center;\n\tgap: 12rpx;\n\twidth: 100%;\n}\n\n/* 宠物选择器 */\n.pet-selector {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tgap: 16rpx;\n}\n\n/* 横向滚动容器：编辑状态使用 */\n.pet-scroll {\n\twidth: 100%;\n\tmax-width: 400rpx;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\tpadding-bottom: 4rpx;\n}\n\n.pet-scroll .pet-option {\n\tdisplay: inline-flex !important;\n\tmargin-right: 12rpx;\n\twidth: 150rpx !important;\n\tmin-width: 150rpx;\n\tflex-shrink: 0;\n\tpadding: 8rpx 6rpx;\n}\n\n.pet-option {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 12rpx 8rpx;\n\tborder: 2rpx solid #ddd;\n\tborder-radius: 12rpx;\n\tbackground: #f8f8f8;\n\ttransition: all 0.3s ease;\n\twidth: 100%;\n\tbox-sizing: border-box;\n}\n\n.pet-option.active {\n\tborder-color: #ffe046;\n\tbackground: #fff9e6;\n}\n\n.pet-option .pet-avatar {\n\twidth: 40rpx;\n\theight: 40rpx;\n\tborder-radius: 50%;\n\tmargin-bottom: 8rpx;\n}\n\n.pet-option .pet-name {\n\tfont-size: 24rpx;\n\tcolor: #333;\n}\n\n\n.btn {\n\tbackground: #ffe046;\n\tcolor: #1a1a1a;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\theight: 72rpx;\n\tline-height: 72rpx;\n\tpadding: 0 24rpx;\n\tfont-weight: 700;\n}\n\n.btn.ghost {\n\tbackground: #fff;\n}\n\n.btn.with-icon {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 12rpx;\n\tpadding: 0 28rpx;\n}\n\n.btn-icon {\n\twidth: 38rpx;\n\theight: 38rpx;\n}\n\n.btn.delete-btn {\n\tbackground: #fff;\n\tcolor: #ff4757;\n\tborder: 4rpx solid #ff4757;\n\tborder-radius: 999rpx;\n\theight: 72rpx;\n\tline-height: 72rpx;\n\tpadding: 0 24rpx;\n\tfont-weight: 700;\n}\n\n.divider-h {\n\theight: 2rpx;\n\tbackground: #e9e9e9;\n\tmargin: 28rpx 0;\n}\n\n.content-section {\n\tmargin-bottom: 40rpx;\n}\n\n.form-section {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 24rpx;\n}\n\n/* 所有记录类型表单间距 */\n.form-section {\n\tmargin-top: 40rpx;\n}\n\n.form-row {\n\tdisplay: grid;\n\tgrid-template-columns: 160rpx 1fr;\n\talign-items: start;\n\tcolumn-gap: 12rpx;\n}\n\n.label {\n\tfont-weight: 700;\n\tfont-size: 30rpx;\n\tcolor: #2c2c2c;\n}\n\n.value {\n\tfont-size: 30rpx;\n\tcolor: #666;\n\tword-break: break-all;\n}\n\n.input {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 10rpx 14rpx;\n\tfont-size: 30rpx;\n}\n\n.input-group {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.unit {\n\tfont-size: 28rpx;\n\tcolor: #666;\n}\n\n.textarea {\n\twidth: 100%;\n\tmax-width: 100%;\n\tbox-sizing: border-box;\n\tmin-height: 120rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 12rpx 16rpx;\n\tbackground: #fff;\n\tfont-size: 30rpx;\n}\n\n/* 记事-图片上传样式 */\n.photo-uploader {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tgap: 12rpx;\n}\n\n.photo-thumb {\n\tposition: relative;\n\twidth: 140rpx;\n\theight: 140rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\toverflow: hidden;\n\tbackground: #f6f6f6;\n}\n\n.photo-thumb-img {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.photo-remove {\n\tposition: absolute;\n\ttop: 4rpx;\n\tright: 4rpx;\n\twidth: 36rpx;\n\theight: 36rpx;\n\tborder-radius: 50%;\n\tbackground: rgba(0, 0, 0, 0.6);\n\tcolor: #fff;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 28rpx;\n}\n\n.photo-add {\n\twidth: 140rpx;\n\theight: 140rpx;\n\tborder: 4rpx dashed #2c2c2c;\n\tborder-radius: 12rpx;\n\tcolor: #666;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 48rpx;\n\tbackground: #fff;\n}\n\n.uploader-hint {\n\tdisplay: block;\n\tmargin-top: 8rpx;\n\tcolor: #999;\n\tfont-size: 22rpx;\n}\n\n.photo-gallery {\n\tdisplay: flex;\n\tgap: 12rpx;\n\tflex-wrap: wrap;\n}\n\n.photo {\n\twidth: 120rpx;\n\theight: 120rpx;\n\tborder-radius: 12rpx;\n\tborder: 4rpx solid #2c2c2c;\n}\n\n/* 浮动添加按钮 */\n.fab {\n\tposition: fixed;\n\tright: -2rpx;\n\tbottom: 120rpx;\n\twidth: 120rpx;\n\theight: 60rpx;\n\tz-index: 10;\n}\n\n.fab-icon {\n\twidth: 80%;\n\theight: 80%;\n\ttransform: rotate(-30deg);\n\ttransform-origin: center center;\n}\n\n/* 底部灰猫装饰图 */\n.bottom-cat {\n    position: fixed;\n    left: 50%;\n    bottom: 16rpx;\n    transform: translateX(-50%);\n    width: 300rpx;\n    z-index: 5;\n    opacity: 0.9;\n\tpointer-events: none;\n\t/* 不阻挡点击 */\n}\n\n.bottom-cat.bottom-cat--dog {\n    width: 220rpx;\n}\n\n/* 弹窗样式 */\n.modal-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 1000;\n}\n\n.modal-content {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 24rpx;\n\twidth: 600rpx;\n\tmax-height: 80vh;\n\toverflow: hidden;\n}\n\n.modal-header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 32rpx 28rpx;\n\tborder-bottom: 4rpx solid #2c2c2c;\n\tbackground: #fff1a8;\n}\n\n.modal-title {\n\tfont-size: 36rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.modal-close {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 40rpx;\n\tcolor: #666;\n\tfont-weight: 700;\n}\n\n.modal-body {\n\tpadding: 28rpx;\n\tmax-height: 60vh;\n\toverflow-y: auto;\n}\n\n.record-type-list {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(2, 1fr);\n\tgap: 20rpx;\n}\n\n.record-type-item {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tgap: 12rpx;\n\tpadding: 24rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\ttransition: all 0.2s ease;\n}\n\n.record-type-item:active {\n\tbackground: #f5f5f5;\n\ttransform: scale(0.95);\n}\n\n.record-type-item .type-icon {\n\twidth: 60rpx;\n\theight: 60rpx;\n}\n\n.record-type-item .type-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n}\n\n/* 宠物选择器包装器 */\n.pet-selector-wrapper {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n/* 宠物选择器 */\n.pet-selector {\n\tdisplay: flex;\n\tgap: 16rpx;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n}\n\n.pet-option {\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tgap: 8rpx;\n\tpadding: 16rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\ttransition: all 0.2s ease;\n\tmin-width: 100rpx;\n}\n\n.pet-option.selected {\n\tbackground: #fff1a8;\n\tborder-color: #ffd54f;\n}\n\n.pet-option:active {\n\ttransform: scale(0.95);\n}\n\n.pet-avatar {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n}\n\n.pet-name {\n\tfont-size: 24rpx;\n\tcolor: #2c2c2c;\n\tfont-weight: 600;\n}\n\n.check-mark {\n\tposition: absolute;\n\ttop: 8rpx;\n\tright: 8rpx;\n\twidth: 24rpx;\n\theight: 24rpx;\n\tbackground: #ff4757;\n\tcolor: #fff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 16rpx;\n\tfont-weight: bold;\n}\n\n/* 展开按钮容器 */\n.expand-btn-container {\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin-top: 12rpx;\n}\n\n/* 展开按钮 */\n.expand-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\twidth: 40rpx;\n\theight: 40rpx;\n\tbackground: #f8f9fa;\n\tborder: 2rpx solid #2c2c2c;\n\tborder-radius: 50%;\n\ttransition: all 0.2s ease;\n}\n\n.expand-btn:active {\n\ttransform: scale(0.95);\n\tbackground: #e9ecef;\n}\n\n.expand-arrow {\n\tfont-size: 20rpx;\n\tcolor: #666;\n\ttransition: transform 0.2s ease;\n}\n\n.expand-arrow.expanded {\n\ttransform: rotate(180deg);\n}\n\n/* 弹窗按钮 */\n.modal-actions {\n\tdisplay: flex;\n\tgap: 28rpx;\n\tjustify-content: center;\n\tmargin-top: 32rpx;\n\tpadding-top: 24rpx;\n\tborder-top: 2rpx solid #e9e9e9;\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/recordDetail/recordDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","onLoad","uni","onShow","onUnmounted","api","uploadImages","index"],"mappings":"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"}