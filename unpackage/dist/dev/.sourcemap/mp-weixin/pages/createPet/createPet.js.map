{"version":3,"file":"createPet.js","sources":["pages/createPet/createPet.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY3JlYXRlUGV0L2NyZWF0ZVBldC52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<!-- 叠纸卡片背景 -->\n\t\t<view class=\"sheet\">\n\t\t\t<view class=\"sheet-bg bg1\"></view>\n\t\t\t<view class=\"sheet-body\">\n\t\t\t\t<!-- 头部标题 -->\n\t\t\t\t<view class=\"header\">\n\t\t\t\t\t<view class=\"title-section\">\n\t\t\t\t\t\t<text class=\"main-title\">创建我的宠物</text>\n\t\t\t\t\t\t<text class=\"sub-title\">记录小宝贝的基本信息</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 宠物头像 -->\n\t\t\t\t<view class=\"avatar-section\">\n\t\t\t\t\t<view class=\"avatar-wrap\" @tap=\"pickAvatar\">\n\t\t\t\t\t\t<image v-if=\"form.avatar\" class=\"avatar\" :src=\"form.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t<view v-else class=\"avatar-placeholder\">\n\t\t\t\t\t\t\t<image class=\"add-icon\" src=\"/static/index/add.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t<text class=\"add-text\">添加头像</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 基本信息表单 -->\n\t\t\t\t<view class=\"form-section\">\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"label\">宠物昵称 *</text>\n\t\t\t\t\t\t<input class=\"input\" v-model=\"form.name\" placeholder=\"请输入宠物的昵称\" />\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t<view class=\"form-group half\">\n\t\t\t\t\t\t\t<text class=\"label\">年龄</text>\n\t\t\t\t\t\t\t<input class=\"input\" type=\"number\" v-model.number=\"form.months\" placeholder=\"月龄\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-group half\">\n\t\t\t\t\t\t\t<text class=\"label\">体重</text>\n\t\t\t\t\t\t\t<input class=\"input\" type=\"digit\" v-model=\"form.weight\" placeholder=\"kg\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"form-row\">\n\t\t\t\t\t\t<view class=\"form-group half\">\n\t\t\t\t\t\t\t<text class=\"label\">性别</text>\n\t\t\t\t\t\t\t<picker :range=\"genders\" :value=\"genderIndex\" @change=\"onGenderChange\">\n\t\t\t\t\t\t\t\t<view class=\"picker\">{{ genders[genderIndex] }}</view>\n\t\t\t\t\t\t\t</picker>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"form-group half\">\n\t\t\t\t\t\t\t<text class=\"label\">种类</text>\n\t\t\t\t\t\t\t<input class=\"input\" v-model=\"form.breed\" placeholder=\"如 布偶猫\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"label\">毛色</text>\n\t\t\t\t\t\t<input class=\"input\" v-model=\"form.color\" placeholder=\"如 白橘色\" />\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"label\">生日</text>\n\t\t\t\t\t\t<picker mode=\"date\" :value=\"form.birthday\" @change=\"onBirthdayChange\">\n\t\t\t\t\t\t\t<view class=\"picker\">{{ form.birthday || '选择生日' }}</view>\n\t\t\t\t\t\t</picker>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"form-group\">\n\t\t\t\t\t\t<text class=\"label\">开始一起生活</text>\n\t\t\t\t\t\t<picker mode=\"date\" :value=\"form.startTogether\" @change=\"onStartTogetherChange\">\n\t\t\t\t\t\t\t<view class=\"picker\">{{ form.startTogether || '选择日期' }}</view>\n\t\t\t\t\t\t</picker>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 特征选择 -->\n\t\t\t\t<view class=\"features-section\">\n\t\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t\t<text>宠物特征</text>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"feature-item\">\n\t\t\t\t\t\t<text class=\"feature-label\">是否绝育</text>\n\t\t\t\t\t\t<switch :checked=\"form.neutered\" @change=\"e => form.neutered = e.detail.value\" />\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"feature-item\">\n\t\t\t\t\t\t<text class=\"feature-label\">接种疫苗</text>\n\t\t\t\t\t\t<view class=\"vaccine-options\">\n\t\t\t\t\t\t\t<checkbox-group @change=\"onVaccinesChange\">\n\t\t\t\t\t\t\t\t<label v-for=\"option in vaccineOptions\" :key=\"option\" class=\"checkbox-item\">\n\t\t\t\t\t\t\t\t\t<checkbox :value=\"option\" :checked=\"form.vaccines.includes(option)\" />\n\t\t\t\t\t\t\t\t\t<text>{{ option }}</text>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</checkbox-group>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<view class=\"feature-item\">\n\t\t\t\t\t\t<text class=\"feature-label\">性格特点</text>\n\t\t\t\t\t\t<textarea class=\"textarea\" v-model=\"form.temperament\" placeholder=\"例如：慵懒，不爱动，还有点小傲娇\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 照片上传 -->\n\t\t\t\t<view class=\"photos-section\">\n\t\t\t\t\t<view class=\"section-title\">\n\t\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t\t<text>日常照片</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"gallery\">\n\t\t\t\t\t\t<view v-for=\"(photo, index) in form.gallery\" :key=\"index\" class=\"photo-item\">\n\t\t\t\t\t\t\t<image class=\"photo\" :src=\"photo\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t<view class=\"delete-btn\" @tap=\"deletePhoto(index)\">×</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"add-photo\" @tap=\"pickPhotos\">\n\t\t\t\t\t\t\t<image class=\"add-icon\" src=\"/static/index/add.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t<text class=\"add-text\">添加照片</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 操作按钮 -->\n\t\t\t\t<view class=\"actions\">\n\t\t\t\t\t<button class=\"btn cancel-btn\" @tap=\"cancel\">取消</button>\n\t\t\t\t\t<button class=\"btn save-btn\" @tap=\"savePet\">保存</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive } from 'vue'\nimport { api } from '@/utils/api.js'\nimport { uploadImage, uploadImages, compressImage } from '@/utils/upload.js'\nimport { onLoad } from '@dcloudio/uni-app'\n\n// 表单数据\nconst form = reactive({\n\tname: '',\n\tmonths: '',\n\tweight: '',\n\tgender: 'female',\n\tbreed: '',\n\tcolor: '',\n\tbirthday: '',\n\tstartTogether: '',\n\tneutered: false,\n\tvaccines: [],\n\ttemperament: '',\n\tavatar: '',\n\tgallery: []\n})\n\n// 选择器数据\nconst genders = ref(['女生', '男生'])\nconst genderIndex = ref(0)\nconst vaccineOptions = ref(['已接种猫三联疫苗', '已接种狂犬疫苗', '已接种其他疫苗'])\n\nonLoad(() => {\n\t// 设置导航栏样式\n\tuni.setNavigationBarColor({ \n\t\tfrontColor: '#000000', \n\t\tbackgroundColor: '#fff1a8' \n\t})\n})\n\n// 性别选择\nfunction onGenderChange(e: any) {\n\tgenderIndex.value = Number(e.detail.value)\n\tform.gender = genderIndex.value === 1 ? 'male' : 'female'\n}\n\n// 生日选择\nfunction onBirthdayChange(e: any) {\n\tform.birthday = e.detail.value\n}\n\n// 开始一起生活日期选择\nfunction onStartTogetherChange(e: any) {\n\tform.startTogether = e.detail.value\n}\n\n// 疫苗选择\nfunction onVaccinesChange(e: any) {\n\tform.vaccines = e.detail.value || []\n}\n\n// 选择头像\nasync function pickAvatar() {\n\ttry {\n\t\tconst res = await uni.chooseImage({\n\t\t\tcount: 1,\n\t\t\tsizeType: ['compressed'],\n\t\t\tsourceType: ['album', 'camera']\n\t\t})\n\t\t\n\t\t// 压缩图片\n\t\tconst compressedPath = await compressImage(res.tempFilePaths[0], 0.8)\n\t\t\n\t\t// 显示上传进度\n\t\tuni.showLoading({ title: '上传头像中...' })\n\t\t\n\t\t// 上传头像\n\t\tconst avatarUrl = await uploadImage(compressedPath, 'avatar')\n\t\t\n\t\tform.avatar = avatarUrl\n\t\tuni.hideLoading()\n\t\tuni.showToast({ title: '头像上传成功', icon: 'success' })\n\t} catch (error) {\n\t\tuni.hideLoading()\n\t\tuni.__f__('error','at pages/createPet/createPet.vue:215','选择头像失败:', error)\n\t\tuni.showToast({ title: '头像上传失败', icon: 'none' })\n\t}\n}\n\n// 选择照片\nasync function pickPhotos() {\n\tconst remainingCount = 9 - form.gallery.length\n\tif (remainingCount <= 0) {\n\t\tuni.showToast({\n\t\t\ttitle: '最多只能上传9张照片',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\ttry {\n\t\tconst res = await uni.chooseImage({\n\t\t\tcount: remainingCount,\n\t\t\tsizeType: ['compressed'],\n\t\t\tsourceType: ['album', 'camera']\n\t\t})\n\t\t\n\t\t// 显示上传进度\n\t\tuni.showLoading({ title: '上传照片中...' })\n\t\t\n\t\t// 批量压缩和上传\n\t\tconst uploadPromises = res.tempFilePaths.map(async (filePath) => {\n\t\t\tconst compressedPath = await compressImage(filePath, 0.7)\n\t\t\treturn await uploadImage(compressedPath, 'gallery')\n\t\t})\n\t\t\n\t\tconst uploadedUrls = await Promise.all(uploadPromises)\n\t\tform.gallery = form.gallery.concat(uploadedUrls)\n\t\t\n\t\tuni.hideLoading()\n\t\tuni.showToast({ title: `成功上传${uploadedUrls.length}张照片`, icon: 'success' })\n\t} catch (error) {\n\t\tuni.hideLoading()\n\t\tuni.__f__('error','at pages/createPet/createPet.vue:254','选择照片失败:', error)\n\t\tuni.showToast({ title: '照片上传失败', icon: 'none' })\n\t}\n}\n\n// 删除照片\nfunction deletePhoto(index: number) {\n\tuni.showModal({\n\t\ttitle: '确认删除',\n\t\tcontent: '确定要删除这张照片吗？',\n\t\tconfirmText: '删除',\n\t\tcancelText: '取消',\n\t\tconfirmColor: '#ff4757',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\tform.gallery.splice(index, 1)\n\t\t\t}\n\t\t}\n\t})\n}\n\n// 表单验证\nfunction validateForm() {\n\tif (!form.name.trim()) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入宠物昵称',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\treturn true\n}\n\n// 保存宠物信息\nasync function savePet() {\n\tif (!validateForm()) return\n\t\n\ttry {\n\t\tuni.showLoading({ title: '保存中...' })\n\t\t\n\t\t// 将表单数据映射到后端需要的字段\n\t\tconst payload: any = {\n\t\t\tname: form.name,\n\t\t\tgender: form.gender,\n\t\t\tbreed: form.breed || '',\n\t\t\tneutered: !!form.neutered,\n\t\t}\n\t\t\n\t\t// 添加所有新字段\n\t\tif (form.birthday) payload.birthday = form.birthday\n\t\tif (form.startTogether) payload.startTogether = form.startTogether\n\t\tif (form.months) payload.months = parseInt(form.months)\n\t\tif (form.weight) payload.weight = parseFloat(form.weight)\n\t\tif (form.color) payload.color = form.color\n\t\tif (form.temperament) payload.temperament = form.temperament\n\t\tif (form.vaccines && form.vaccines.length > 0) payload.vaccines = form.vaccines\n\t\t\n\t\t// 使用已上传的头像URL（开发环境也提交本地路径）\n\t\tif (form.avatar) {\n\t\t\tpayload.avatarUrl = form.avatar\n\t\t}\n\t\t\n\t\t// 创建宠物\n\t\tuni.__f__('log','at pages/createPet/createPet.vue:317','提交宠物数据:', payload)\n\t\tconst pet = await api.createPet(payload)\n\t\tuni.__f__('log','at pages/createPet/createPet.vue:319','宠物创建成功:', pet)\n\t\t\n\t\t// 如果有照片，创建媒体记录\n\t\tif (form.gallery && form.gallery.length > 0) {\n\t\t\t// 开发环境：直接使用本地路径\n\t\t\tconst uploadedUrls = form.gallery.filter(url => url && url.trim())\n\t\t\t\n\t\t\tif (uploadedUrls.length > 0) {\n\t\t\t\ttry {\n\t\t\t\t\tawait api.createMedia({\n\t\t\t\t\t\tpetId: pet.id,\n\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\turls: uploadedUrls,\n\t\t\t\t\t\tdescription: '宠物照片'\n\t\t\t\t\t})\n\t\t\t\t\tuni.__f__('log','at pages/createPet/createPet.vue:334','成功创建媒体记录:', uploadedUrls.length, '张照片')\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.__f__('warn','at pages/createPet/createPet.vue:336','照片上传失败，但宠物已创建:', error)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tuni.__f__('log','at pages/createPet/createPet.vue:339','没有照片，跳过媒体记录创建')\n\t\t\t}\n\t\t}\n\t\t\n\t\tuni.hideLoading()\n\t\t\n\t\t// 检查是否有图片上传\n\t\tconst hasUploadedImages = form.gallery && form.gallery.length > 0\n\t\tconst hasUploadedAvatar = !!form.avatar\n\t\t\n\t\tlet message = '宠物创建成功'\n\t\tif (hasUploadedAvatar || hasUploadedImages) {\n\t\t\tmessage += '，图片已上传'\n\t\t}\n\t\t\n\t\tuni.showToast({ title: message, icon: 'success' })\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tuni.navigateBack()\n\t\t}, 800)\n\t} catch (e) {\n\t\tuni.hideLoading()\n\t\tuni.__f__('error','at pages/createPet/createPet.vue:361','创建宠物失败:', e)\n\t\t\n\t\t// 根据错误类型显示不同的提示\n\t\tlet errorMessage = '创建失败'\n\t\tif (e.message) {\n\t\t\tif (e.message.includes('Unauthorized')) {\n\t\t\t\terrorMessage = '登录已过期，请重新登录'\n\t\t\t} else if (e.message.includes('Network')) {\n\t\t\t\terrorMessage = '网络连接失败，请检查网络'\n\t\t\t} else {\n\t\t\t\terrorMessage = `创建失败: ${e.message}`\n\t\t\t}\n\t\t}\n\t\t\n\t\tuni.showToast({ title: errorMessage, icon: 'none' })\n\t}\n}\n\n// 取消创建\nfunction cancel() {\n\tuni.showModal({\n\t\ttitle: '确认取消',\n\t\tcontent: '确定要取消创建宠物吗？已填写的信息将丢失。',\n\t\tconfirmText: '确定',\n\t\tcancelText: '继续编辑',\n\t\tconfirmColor: '#ff4757',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\tuni.navigateBack()\n\t\t\t}\n\t\t}\n\t})\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n\tmin-height: 100vh;\n\tpadding: 24rpx;\n\tpadding-top: calc(110rpx + env(safe-area-inset-top));\n\tpadding-top: calc(110rpx + constant(safe-area-inset-top));\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n}\n\n.sheet {\n\tposition: relative;\n\tpadding-top: 30rpx;\n\tpadding-bottom: 45rpx;\n}\n\n.sheet-bg {\n\tposition: absolute;\n\tleft: 12rpx;\n\tright: 12rpx;\n\theight: 96%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 32rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.sheet-bg.bg1 {\n\ttop: 24rpx;\n    bottom: 0; /* 跟随主卡片内容高度变化 */\n    height: 90%; /* 动态高度由 top/bottom 约束 */\n    width: 648rpx; /* 略小于主体宽度 600rpx，形成叠纸边缘 */\n    left: 50%;\n    right: auto;\n    transform: translateX(-50%) rotate(-2.2deg);\n}\n\n.sheet-body {\n\twidth: 625rpx;\n\tmargin: 0 auto;\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 32rpx;\n\tpadding: 32rpx 28rpx 120rpx 28rpx;\n\tz-index: 1;\n}\n\n// 头部标题\n.header {\n\tmargin-bottom: 32rpx;\n\ttext-align: center;\n}\n\n.title-section {\n\t.main-title {\n\t\tdisplay: block;\n\t\tfont-size: 36rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #1a1a1a;\n\t\tmargin-bottom: 8rpx;\n\t}\n\t\n\t.sub-title {\n\t\tdisplay: block;\n\t\tfont-size: 24rpx;\n\t\tcolor: #6b6b6b;\n\t}\n}\n\n// 头像区域\n.avatar-section {\n\tdisplay: flex;\n\tjustify-content: center;\n\tmargin-bottom: 32rpx;\n}\n\n.avatar-wrap {\n\twidth: 200rpx;\n\theight: 200rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #f5f5f5;\n\toverflow: hidden;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.avatar {\n\twidth: 200rpx;\n\theight: 200rpx;\n}\n\n.avatar-placeholder {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 12rpx;\n}\n\n.add-icon {\n\twidth: 60rpx;\n\theight: 60rpx;\n}\n\n.add-text {\n\tfont-size: 24rpx;\n\tcolor: #888;\n}\n\n// 表单区域\n.form-section {\n\tmargin-bottom: 32rpx;\n}\n\n.form-group {\n\tmargin-bottom: 24rpx;\n}\n\n.form-row {\n\tdisplay: flex;\n\tgap: 16rpx;\n}\n\n.form-group.half {\n\tflex: 1;\n}\n\n.label {\n\tdisplay: block;\n\tfont-size: 28rpx;\n\tfont-weight: 700;\n\tcolor: #1a1a1a;\n\tmargin-bottom: 12rpx;\n}\n\n.input {\n\twidth: 100%;\n\theight: 80rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 0 16rpx;\n\tfont-size: 28rpx;\n\tbox-sizing: border-box;\n}\n\n.picker {\n\twidth: 100%;\n\theight: 80rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 0 16rpx;\n\tfont-size: 28rpx;\n\tline-height: 80rpx;\n\tbox-sizing: border-box;\n}\n\n// 特征区域\n.features-section {\n\tmargin-bottom: 32rpx;\n}\n\n.section-title {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 24rpx;\n\t\n\t.bullet {\n\t\twidth: 44rpx;\n\t\theight: 44rpx;\n\t}\n\t\n\ttext {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #1a1a1a;\n\t}\n}\n\n.feature-item {\n\tmargin-bottom: 24rpx;\n}\n\n.feature-label {\n\tdisplay: block;\n\tfont-size: 28rpx;\n\tfont-weight: 700;\n\tcolor: #1a1a1a;\n\tmargin-bottom: 12rpx;\n}\n\n.vaccine-options {\n\t.checkbox-item {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tmargin-right: 16rpx;\n\t\tmargin-bottom: 8rpx;\n\t\tfont-size: 26rpx;\n\t}\n}\n\n.textarea {\n\twidth: 100%;\n\tmin-height: 120rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 12rpx 16rpx;\n\tfont-size: 28rpx;\n\tbox-sizing: border-box;\n}\n\n// 照片区域\n.photos-section {\n\tmargin-bottom: 32rpx;\n}\n\n.gallery {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgap: 12rpx;\n}\n\n.photo-item {\n\tposition: relative;\n\twidth: 100%;\n\theight: 180rpx;\n}\n\n.photo {\n\twidth: 100%;\n\theight: 180rpx;\n\tborder-radius: 12rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tbox-sizing: border-box;\n}\n\n.delete-btn {\n\tposition: absolute;\n\ttop: -8rpx;\n\tright: -8rpx;\n\twidth: 32rpx;\n\theight: 32rpx;\n\tbackground: #ff4757;\n\tcolor: #fff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 24rpx;\n\tfont-weight: bold;\n\tborder: 2rpx solid #fff;\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\n\tz-index: 10;\n}\n\n.add-photo {\n\twidth: 100%;\n\theight: 180rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 8rpx;\n\t\n\t.add-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t}\n\t\n\t.add-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #888;\n\t}\n}\n\n// 操作按钮\n.actions {\n\tposition: absolute;\n\tleft: 28rpx;\n\tright: 28rpx;\n\tbottom: 28rpx;\n\tdisplay: flex;\n\tgap: 16rpx;\n\tz-index: 2;\n}\n\n.btn {\n\tflex: 1;\n\theight: 80rpx;\n\tborder-radius: 999rpx;\n\tfont-size: 28rpx;\n\tfont-weight: 700;\n\tborder: 4rpx solid #2c2c2c;\n}\n\n.cancel-btn {\n\tbackground: #fff;\n\tcolor: #1a1a1a;\n}\n\n.save-btn {\n\tbackground: #ffe046;\n\tcolor: #1a1a1a;\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/createPet/createPet.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","onLoad","uni","compressImage","uploadImage","api"],"mappings":"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"}