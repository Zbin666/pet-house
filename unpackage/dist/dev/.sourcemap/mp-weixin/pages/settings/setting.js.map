{"version":3,"file":"setting.js","sources":["pages/settings/setting.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2V0dGluZ3Mvc2V0dGluZy52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 叠纸卡片背景 -->\r\n\t\t<view class=\"sheet\">\r\n\t\t\t<view class=\"sheet-bg bg1\"></view>\r\n\t\t\t<view class=\"sheet-body\">\r\n\t\t\t\t<!-- 用户头像和基本信息 -->\r\n\t\t\t\t<view class=\"header\">\r\n\t\t\t\t\t<view class=\"avatar-wrap\" @tap=\"pickAvatar\">\r\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatar\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t<view class=\"avatar-edit\">编辑</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t\t<text class=\"username\">{{ userInfo.name }}</text>\r\n\t\t\t\t\t\t<text class=\"user-desc\">{{ userInfo.desc }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 编辑按钮 -->\r\n\t\t\t\t<view class=\"edit-row\">\r\n\t\t\t\t\t<button v-if=\"!editMode\" class=\"btn ghost with-icon\" @tap=\"startEdit\">\r\n\t\t\t\t\t\t<image class=\"btn-icon\" src=\"/static/tarBar/index-active.png\" mode=\"widthFix\" />\r\n\t\t\t\t\t\t<text>编辑资料</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<view v-else class=\"edit-actions\">\r\n\t\t\t\t\t\t<button class=\"btn ghost\" @tap=\"cancelEdit\">取消</button>\r\n\t\t\t\t\t\t<button class=\"btn\" @tap=\"saveEdit\">保存</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"divider-h\"></view>\r\n\r\n\t\t\t\t<!-- 用户信息表单 -->\r\n\t\t\t\t<view class=\"form-section\">\r\n\t\t\t\t\t<view class=\"form-row\">\r\n\t\t\t\t\t\t<text class=\"label\">昵称：</text>\r\n\t\t\t\t\t\t<template v-if=\"!editMode\">\r\n\t\t\t\t\t\t\t<text class=\"value\">{{ userInfo.name }}</text>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.name\" placeholder=\"请输入昵称\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"form-row\">\r\n\t\t\t\t\t\t<text class=\"label\">个人简介：</text>\r\n\t\t\t\t\t\t<template v-if=\"!editMode\">\r\n\t\t\t\t\t\t\t<text class=\"value\">{{ userInfo.desc || '暂无简介' }}</text>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<textarea v-else class=\"textarea\" v-model=\"form.desc\" placeholder=\"介绍一下自己吧～\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"form-row\">\r\n\t\t\t\t\t\t<text class=\"label\">手机号：</text>\r\n\t\t\t\t\t\t<template v-if=\"!editMode\">\r\n\t\t\t\t\t\t\t<text class=\"value\">{{ userInfo.phone || '未绑定' }}</text>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.phone\" placeholder=\"请输入手机号\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"form-row\">\r\n\t\t\t\t\t\t<text class=\"label\">邮箱：</text>\r\n\t\t\t\t\t\t<template v-if=\"!editMode\">\r\n\t\t\t\t\t\t\t<text class=\"value\">{{ userInfo.email || '未绑定' }}</text>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<input v-else class=\"input\" v-model=\"form.email\" placeholder=\"请输入邮箱\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"form-row\">\r\n\t\t\t\t\t\t<text class=\"label\">注册时间：</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ userInfo.registerTime }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"divider-h\"></view>\r\n\r\n\t\t\t\t<!-- 其他设置 -->\r\n\t\t\t\t<view class=\"settings-section\">\r\n\t\t\t\t\t<view class=\"setting-item\">\r\n\t\t\t\t\t\t<text class=\"setting-label\">消息通知</text>\r\n\t\t\t\t\t\t<switch :checked=\"settings.notifications\" @change=\"e => settings.notifications = e.detail.value\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"setting-item\">\r\n\t\t\t\t\t\t<text class=\"setting-label\">隐私模式</text>\r\n\t\t\t\t\t\t<switch :checked=\"settings.privacy\" @change=\"e => settings.privacy = e.detail.value\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"setting-item\" @tap=\"clearCache\">\r\n\t\t\t\t\t\t<text class=\"setting-label\">清除缓存</text>\r\n\t\t\t\t\t\t<text class=\"setting-value\">{{ cacheSize }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { onLoad } from '@dcloudio/uni-app'\r\n\r\ndefineOptions({ name: 'SettingsIndex' })\r\n\r\n// 用户信息\r\nconst userInfo = ref({\r\n\tname: '宠物爱好者',\r\n\tdesc: '热爱小动物的铲屎官',\r\n\tphone: '138****8888',\r\n\temail: 'user@example.com',\r\n\tavatar: '/static/user/user.png',\r\n\tregisterTime: '2024年1月1日'\r\n})\r\n\r\n// 编辑模式\r\nconst editMode = ref(false)\r\nconst form = reactive({\r\n\tname: '',\r\n\tdesc: '',\r\n\tphone: '',\r\n\temail: '',\r\n\tavatar: ''\r\n})\r\n\r\n// 设置项\r\nconst settings = reactive({\r\n\tnotifications: true,\r\n\tprivacy: false\r\n})\r\n\r\nconst cacheSize = ref('—')\r\n\r\nonLoad(() => {\r\n\tuni.setNavigationBarTitle({ title: '个人设置' })\r\n\tuni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\r\n\t// 估算缓存体积（简化示例）\r\n\ttry {\r\n\t\tconst keys = uni.getStorageInfoSync().keys || []\r\n\t\tcacheSize.value = `${keys.length} 项`\r\n\t} catch (e) { cacheSize.value = '—' }\r\n})\r\n\r\n// 编辑功能\r\nfunction startEdit() {\r\n\teditMode.value = true\r\n\tObject.assign(form, {\r\n\t\tname: userInfo.value.name,\r\n\t\tdesc: userInfo.value.desc,\r\n\t\tphone: userInfo.value.phone,\r\n\t\temail: userInfo.value.email,\r\n\t\tavatar: userInfo.value.avatar\r\n\t})\r\n}\r\n\r\nfunction cancelEdit() {\r\n\teditMode.value = false\r\n}\r\n\r\nfunction saveEdit() {\r\n\tuserInfo.value = {\r\n\t\t...userInfo.value,\r\n\t\tname: form.name,\r\n\t\tdesc: form.desc,\r\n\t\tphone: form.phone,\r\n\t\temail: form.email,\r\n\t\tavatar: form.avatar || userInfo.value.avatar\r\n\t}\r\n\teditMode.value = false\r\n\tuni.showToast({\r\n\t\ttitle: '保存成功',\r\n\t\ticon: 'success'\r\n\t})\r\n}\r\n\r\nfunction pickAvatar() {\r\n\tuni.chooseImage({\r\n\t\tcount: 1,\r\n\t\tsizeType: ['compressed'],\r\n\t\tsuccess: res => {\r\n\t\t\tif (editMode.value) {\r\n\t\t\t\tform.avatar = res.tempFilePaths[0]\r\n\t\t\t} else {\r\n\t\t\t\tuserInfo.value.avatar = res.tempFilePaths[0]\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction clearCache() {\r\n\tuni.showModal({\r\n\t\ttitle: '确认清除',\r\n\t\tcontent: '确定要清除所有缓存吗？',\r\n\t\tsuccess: (res) => {\r\n\t\t\tif (res.confirm) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.clearStorageSync()\r\n\t\t\t\t\tcacheSize.value = '0 项'\r\n\t\t\t\t\tuni.showToast({ title: '已清除', icon: 'success' })\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n    min-height: 100vh;\r\n    padding: 24rpx 40rpx; /* 增大左右留白 */\r\n    padding-top: calc(110rpx + env(safe-area-inset-top)); /* 与宠物详情一致的顶部距离 */\r\n    padding-top: calc(110rpx + constant(safe-area-inset-top));\r\n    background: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\r\n}\r\n\r\n.sheet {\r\n    position: relative;\r\n    padding-top: 30rpx; /* 下移卡片 */\r\n    padding-bottom: 45rpx; /* 底部留白 */\r\n}\r\n\r\n.sheet-bg {\r\n\tposition: absolute;\r\n\tleft: 12rpx;\r\n\tright: 12rpx;\r\n\theight: 96%;\r\n\tborder: 4rpx solid #2c2c2c;\r\n\tborder-radius: 32rpx;\r\n\tbackground: #fff;\r\n\tz-index: 0;\r\n\tpointer-events: none;\r\n}\r\n\r\n.sheet-bg.bg1 {\r\n\ttop: 24rpx;\r\n    bottom: 0; /* 跟随主卡片内容高度变化 */\r\n    height: 90%; /* 动态高度由 top/bottom 约束 */\r\n    width: 658rpx; /* 略小于主体宽度 600rpx，形成叠纸边缘 */\r\n    left: 50%;\r\n    right: auto;\r\n    transform: translateX(-50%) rotate(-3deg);\r\n}\r\n\r\n.sheet-body {\r\n\twidth: 625rpx;\r\n\tmargin: 0 auto;\r\n\tposition: relative;\r\n\tbackground: #fff;\r\n\tborder: 4rpx solid #2c2c2c;\r\n\tborder-radius: 32rpx;\r\n\tpadding: 32rpx 28rpx 120rpx 28rpx;\r\n\tz-index: 1;\r\n}\r\n\r\n.header {\r\n\tmargin-top: 15rpx;\r\n\tdisplay: flex;\r\n\tgap: 24rpx;\r\n\talign-items: center;\r\n}\r\n\r\n.avatar-wrap {\r\n\tposition: relative;\r\n\twidth: 120rpx;\r\n\theight: 120rpx;\r\n\tborder: 4rpx solid #2c2c2c;\r\n\tborder-radius: 16rpx;\r\n\tbackground: #f5f5f5;\r\n\toverflow: hidden;\r\n}\r\n\r\n.avatar {\r\n\twidth: 120rpx;\r\n\theight: 120rpx;\r\n\tborder-radius: 16rpx;\r\n\tbackground: #f5f5f5;\r\n}\r\n\r\n.avatar-edit {\r\n\tposition: absolute;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbackground: rgba(0, 0, 0, 0.6);\r\n\tcolor: #fff;\r\n\ttext-align: center;\r\n\tfont-size: 24rpx;\r\n\tpadding: 8rpx;\r\n}\r\n\r\n.user-info {\r\n\tflex: 1;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 8rpx;\r\n}\r\n\r\n.username {\r\n\tfont-size: 36rpx;\r\n\tfont-weight: 700;\r\n\tcolor: #2c2c2c;\r\n}\r\n\r\n.user-desc {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.edit-row {\r\n\tposition: absolute;\r\n\tleft: 28rpx;\r\n\tright: 28rpx;\r\n\tbottom: 28rpx;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\tz-index: 2;\r\n}\r\n\r\n.edit-actions {\r\n\tdisplay: flex;\r\n\tgap: 28rpx;\r\n}\r\n\r\n.btn {\r\n\tbackground: #ffe046;\r\n\tcolor: #1a1a1a;\r\n\tborder: 4rpx solid #2c2c2c;\r\n\tborder-radius: 999rpx;\r\n\theight: 72rpx;\r\n\tline-height: 72rpx;\r\n\tpadding: 0 24rpx;\r\n\tfont-weight: 700;\r\n}\r\n\r\n.btn.ghost {\r\n\tbackground: #fff;\r\n}\r\n\r\n.btn.with-icon {\r\n\tdisplay: inline-flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tgap: 12rpx;\r\n\tpadding: 0 28rpx;\r\n}\r\n\r\n.btn-icon {\r\n\twidth: 38rpx;\r\n\theight: 38rpx;\r\n}\r\n\r\n.divider-h {\r\n\theight: 2rpx;\r\n\tbackground: #e9e9e9;\r\n\tmargin: 28rpx 0;\r\n}\r\n\r\n.form-section {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 24rpx;\r\n}\r\n\r\n.form-row {\r\n\tdisplay: grid;\r\n\tgrid-template-columns: 160rpx 1fr;\r\n\talign-items: center;\r\n\tcolumn-gap: 12rpx;\r\n}\r\n\r\n.label {\r\n\tfont-weight: 700;\r\n\tfont-size: 30rpx;\r\n\tcolor: #2c2c2c;\r\n}\r\n\r\n.value {\r\n\tfont-size: 30rpx;\r\n\tcolor: #666;\r\n}\r\n\r\n.input {\r\n\tbackground: #fff;\r\n\tborder: 4rpx solid #2c2c2c;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 10rpx 14rpx;\r\n\tfont-size: 30rpx;\r\n}\r\n\r\n.textarea {\r\n\twidth: 100%;\r\n\tmax-width: 100%;\r\n\tbox-sizing: border-box;\r\n\tmin-height: 120rpx;\r\n\tborder: 4rpx solid #2c2c2c;\r\n\tborder-radius: 12rpx;\r\n\tpadding: 12rpx 16rpx;\r\n\tbackground: #fff;\r\n\tfont-size: 30rpx;\r\n}\r\n\r\n.settings-section {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 24rpx;\r\n}\r\n\r\n.setting-item {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: space-between;\r\n\tpadding: 20rpx 0;\r\n}\r\n\r\n.setting-label {\r\n\tfont-size: 30rpx;\r\n\tfont-weight: 700;\r\n\tcolor: #2c2c2c;\r\n}\r\n\r\n.setting-value {\r\n\tfont-size: 28rpx;\r\n\tcolor: #666;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/settings/setting.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","onLoad","uni"],"mappings":";;;;;;AAqGA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACpB,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO;AAAA,MACP,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,cAAc;AAAA,IACf,CAAC;AAGD,UAAM,WAAWA,cAAG,IAAC,KAAK;AAC1B,UAAM,OAAOC,cAAAA,SAAS;AAAA,MACrB,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO;AAAA,MACP,OAAO;AAAA,MACP,QAAQ;AAAA,IACT,CAAC;AAGD,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACzB,eAAe;AAAA,MACf,SAAS;AAAA,IACV,CAAC;AAED,UAAM,YAAYD,cAAG,IAAC,GAAG;AAEzBE,kBAAAA,OAAO,MAAM;AACZC,oBAAAA,MAAI,sBAAsB,EAAE,OAAO,OAAM,CAAE;AAC3CA,oBAAG,MAAC,sBAAsB,EAAE,YAAY,WAAW,iBAAiB,WAAW;AAE/E,UAAI;AACH,cAAM,OAAOA,cAAG,MAAC,mBAAoB,EAAC,QAAQ,CAAE;AAChD,kBAAU,QAAQ,GAAG,KAAK,MAAM;AAAA,MAChC,SAAQ,GAAG;AAAE,kBAAU,QAAQ;AAAA,MAAK;AAAA,IACtC,CAAC;AAGD,aAAS,YAAY;AACpB,eAAS,QAAQ;AACjB,aAAO,OAAO,MAAM;AAAA,QACnB,MAAM,SAAS,MAAM;AAAA,QACrB,MAAM,SAAS,MAAM;AAAA,QACrB,OAAO,SAAS,MAAM;AAAA,QACtB,OAAO,SAAS,MAAM;AAAA,QACtB,QAAQ,SAAS,MAAM;AAAA,MACzB,CAAE;AAAA,IACF;AAEA,aAAS,aAAa;AACrB,eAAS,QAAQ;AAAA,IAClB;AAEA,aAAS,WAAW;AACnB,eAAS,QAAQ;AAAA,QAChB,GAAG,SAAS;AAAA,QACZ,MAAM,KAAK;AAAA,QACX,MAAM,KAAK;AAAA,QACX,OAAO,KAAK;AAAA,QACZ,OAAO,KAAK;AAAA,QACZ,QAAQ,KAAK,UAAU,SAAS,MAAM;AAAA,MACtC;AACD,eAAS,QAAQ;AACjBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAE;AAAA,IACF;AAEA,aAAS,aAAa;AACrBA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,SAAS,SAAO;AACf,cAAI,SAAS,OAAO;AACnB,iBAAK,SAAS,IAAI,cAAc,CAAC;AAAA,UACrC,OAAU;AACN,qBAAS,MAAM,SAAS,IAAI,cAAc,CAAC;AAAA,UAC3C;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;AAEA,aAAS,aAAa;AACrBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,gBAAI;AACHA,4BAAAA,MAAI,iBAAkB;AACtB,wBAAU,QAAQ;AAClBA,4BAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAAA,YACpD,SAAa,GAAG;AAAA,YAAE;AAAA,UACd;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrMA,GAAG,WAAW,eAAe;"}