{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"home-page\">\n\t\t<!-- Header -->\n\t\t<view class=\"header\">\n\t\t\t<view class=\"greet\">\n\t\t\t\t<text class=\"hi\">Hi {{ userInfo?.nickname || '用户' }}</text>\n\t\t\t\t<text class=\"sub\">{{ getGreeting() }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Pet card -->\n\t\t<view class=\"pet-card\">\n\t\t\t<view class=\"pet-top-decoration\">\n\t\t\t\t<image class=\"decoration-img\" src=\"/static/index/longCircle.svg\" mode=\"widthFix\" />\n\t\t\t</view>\n\t\t\t<!-- 单只宠物：沿用原样式 -->\n\t\t\t<view v-if=\"hasPet && pets.length === 1\" class=\"pet-content\" @tap=\"goPetDetail(currentPet)\">\n\t\t\t\t<view class=\"pet-left\">\n\t\t\t\t\t<view class=\"pet-avatar\">\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\tv-if=\"currentPet?.avatarUrl\" \n\t\t\t\t\t\t\t:src=\"currentPet.avatarUrl\" \n\t\t\t\t\t\t\tclass=\"pet-avatar-inner\" \n\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\t@error=\"onImageError\" \n\t\t\t\t\t\t\t@load=\"onImageLoad\" \n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\tv-else \n\t\t\t\t\t\t\t:src=\"getDefaultPetAvatar()\" \n\t\t\t\t\t\t\tclass=\"pet-avatar-inner\" \n\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"pet-right\">\n\t\t\t\t\t<view class=\"pet-title-row\">\n\t\t\t\t\t\t<text class=\"pet-name\">{{ currentPet?.name || '我的宠物' }}</text>\n\t\t\t\t\t\t<text class=\"pet-edit\">✎</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"pet-meta\">{{ petMeta }}</text>\n\t\t\t\t\t<view class=\"pet-tags\" v-if=\"petTags.length\">\n\t\t\t\t\t\t<text v-for=\"(tag, i) in petTags\" :key=\"i\" class=\"tag\">{{ tag }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 多只宠物：横向滑动 -->\n\t\t\t<scroll-view v-else-if=\"hasPet && pets.length > 1\" class=\"pet-scroll\" scroll-x=\"true\" show-scrollbar=\"false\">\n\t\t\t\t<view class=\"pet-item\" v-for=\"pet in pets\" :key=\"pet.id\" @tap=\"goPetDetail(pet)\">\n\t\t\t\t\t<view class=\"pet-container\">\n\t\t\t\t\t\t<view class=\"pet-left\">\n\t\t\t\t\t\t\t\t<view class=\"pet-avatar\">\n\t\t\t\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t\t\t\tv-if=\"pet?.avatarUrl\" \n\t\t\t\t\t\t\t\t\t\t:src=\"pet.avatarUrl\" \n\t\t\t\t\t\t\t\t\t\tclass=\"pet-avatar-inner\" \n\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<image \n\t\t\t\t\t\t\t\t\t\tv-else \n\t\t\t\t\t\t\t\t\t\t:src=\"getDefaultPetAvatar()\" \n\t\t\t\t\t\t\t\t\t\tclass=\"pet-avatar-inner\" \n\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"pet-right\">\n\t\t\t\t\t\t\t\t<view class=\"pet-title-row\">\n\t\t\t\t\t\t\t\t\t<text class=\"pet-name\">{{ pet?.name || '我的宠物' }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"pet-edit\">✎</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"pet-meta\">{{ getPetMeta(pet) }}</text>\n\t\t\t\t\t\t\t\t<view class=\"pet-tags\" v-if=\"getPetTags(pet).length\">\n\t\t\t\t\t\t\t\t\t<text v-for=\"(tag, i) in getPetTags(pet)\" :key=\"i\" class=\"tag\">{{ tag }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t\t<view v-else class=\"pet-empty\" @tap=\"goAddPet\">\n\t\t\t\t<image class=\"add-icon\" src=\"/static/index/add.png\" mode=\"widthFix\" />\n\t\t\t\t<text class=\"add-text\">添加我的宠物</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Quick list + small cards -->\n\t\t<view class=\"row\">\n\t\t\t<view class=\"todo-card\">\n\t\t\t\t<scroll-view class=\"todo-scroll\" scroll-y=\"true\">\n\t\t\t\t\t<view v-if=\"homeReminders.length === 0\" class=\"todo-item\">\n\t\t\t\t\t\t<view class=\"bullet\"></view><text>今天暂无提醒</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-else>\n\t\t\t\t\t\t<view class=\"todo-item\" v-for=\"r in homeReminders\" :key=\"r.id\">\n\t\t\t\t\t\t\t<view class=\"bullet\"></view>\n\t\t\t\t\t\t\t<text>{{ r.title }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t\t<view class=\"side-cards\">\n\t\t\t\t<view class=\"side-card\" @tap=\"goToRecord('calendar')\">\n\t\t\t\t\t<view class=\"side-texts\">\n\t\t\t\t\t\t<text class=\"side-title\">记录</text>\n\t\t\t\t\t\t<text class=\"side-sub\">更好的照顾小宠</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<image class=\"side-icon\" src=\"/static/index/record.png\" mode=\"widthFix\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"side-card\" @tap=\"goToRecord('stats')\">\n\t\t\t\t\t<view class=\"side-texts\">\n\t\t\t\t\t\t<text class=\"side-title\">提醒</text>\n\t\t\t\t\t\t<text class=\"side-sub\">防止忘记</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<image class=\"side-icon\" src=\"/static/index/note.png\" mode=\"widthFix\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- Popular science -->\n\t\t<view class=\"science\" @tap=\"goScienceDetail\">\n\t\t\t<view class=\"science-hd\">\n\t\t\t\t<view class=\"science-title\">\n\t\t\t\t\t<text>今日科普</text>\n\t\t\t\t\t<view class=\"title-notch\"></view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"science-sub\">{{ dailyScience?.title ? `【${dailyScience.title}】` : '【今日小知识】' }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"science-text\">{{ dailyScience?.content || '每日为你推荐一条宠物健康小知识～' }}</view>\n\t\t\t<image class=\"science-illust\" src=\"/static/index/popular-science.png\" mode=\"widthFix\" />\n\t\t\t<view class=\"science-icons\">\n\t\t\t\t<image class=\"fish\" src=\"/static/index/fish.png\" mode=\"widthFix\" />\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { onShow } from '@dcloudio/uni-app'\nimport { initState, getState } from '@/utils/store.js'\nimport { api } from '@/utils/api.js'\n\ndefineOptions({ name: 'HomeIndex' })\n\nconst hasPet = ref(false)\nconst userInfo = ref(null)\nconst pets = ref([])\nconst homeReminders = ref([])\nconst dailyScience = ref(null)\nconst currentPet = computed(() => {\n  const pet = pets.value?.[0] || null\n  console.log('currentPet computed:', pet)\n  return pet\n})\nconst petMeta = computed(() => {\n  if (!currentPet.value) return ''\n  const months = currentPet.value.months ? `${currentPet.value.months}个月` : ''\n  const weight = currentPet.value.weight ? `${currentPet.value.weight}kg` : ''\n  return [months, weight].filter(Boolean).join(' | ')\n})\nconst petTags = computed(() => {\n  if (!currentPet.value) return []\n  const temperament = currentPet.value.temperament || ''\n  // temperament 可能是以逗号分隔的字符串，或一个简单字符串\n  if (!temperament) return []\n  if (Array.isArray(temperament)) return temperament\n  return String(temperament).split(/[，,\\s]+/).filter(Boolean).slice(0, 3)\n})\n\n// 多宠物卡片的 meta 与 tags 计算\nfunction getPetMeta(pet) {\n  if (!pet) return ''\n  const months = pet.months ? `${pet.months}个月` : ''\n  const weight = pet.weight ? `${pet.weight}kg` : ''\n  return [months, weight].filter(Boolean).join(' | ')\n}\n\nfunction getPetTags(pet) {\n  if (!pet) return []\n  const temperament = pet.temperament || ''\n  if (!temperament) return []\n  if (Array.isArray(temperament)) return temperament.slice(0, 3)\n  return String(temperament).split(/[，,\\s]+/).filter(Boolean).slice(0, 3)\n}\n\n// 初始化页面\nonMounted(async () => {\n  // 初始化状态\n  const state = initState()\n  userInfo.value = state.userInfo\n  \n  // 检查登录状态\n  if (!state.isLoggedIn) {\n    uni.reLaunch({\n      url: '/pages/login/login'\n    })\n    return\n  }\n  \n  // 加载宠物数据\n  await loadPets()\n  await loadTodayReminders()\n  await loadDailyScience()\n})\n\n// 返回到首页时自动刷新宠物数据\nonShow(async () => {\n  // 如果从详情返回且收到全局事件，或直接返回页面，都刷新一次\n  await loadPets()\n  await loadTodayReminders()\n  await loadDailyScience()\n})\n\n// 处理图片URL，确保可以正常访问\nfunction processImageUrl(url) {\n  if (!url) return null\n  \n  // 如果是wxfile协议（小程序临时文件），直接返回\n  if (url.startsWith('wxfile://')) {\n    return url\n  }\n  \n  // 如果是完整的HTTP/HTTPS URL，直接返回\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return url\n  }\n  \n  // 如果是相对路径，添加基础URL\n  if (url.startsWith('/')) {\n    return `http://pet-api.zbinli.cn${url}`\n  }\n  \n  // 如果不是以/开头，添加基础URL和/\n  return `http://pet-api.zbinli.cn/${url}`\n}\n\n// 获取默认宠物头像\nfunction getDefaultPetAvatar() {\n  return '/static/index/add.png' // 使用现有的添加图标作为默认头像\n}\n\n// 加载宠物数据\nasync function loadPets() {\n  try {\n    console.log('=== 首页加载宠物数据调试信息 ===');\n    const result = await api.getPets()\n    console.log('API返回结果:', result);\n    \n    // 兼容后端直接返回数组 或 包在 data 里\n    pets.value = Array.isArray(result) ? result : (result.data || [])\n    \n    // 处理图片URL\n    pets.value = pets.value.map(pet => ({\n      ...pet,\n      avatarUrl: processImageUrl(pet.avatarUrl)\n    }))\n    \n    console.log('处理后的宠物数据:', pets.value);\n    console.log('第一个宠物的头像URL:', pets.value[0]?.avatarUrl);\n    console.log('第一个宠物的完整数据:', pets.value[0]);\n    \n    hasPet.value = pets.value.length > 0\n    console.log('是否有宠物:', hasPet.value);\n    \n    // 检查图片URL是否有效\n    if (pets.value[0]?.avatarUrl) {\n      console.log('头像URL详情:', {\n        url: pets.value[0].avatarUrl,\n        type: typeof pets.value[0].avatarUrl,\n        length: pets.value[0].avatarUrl.length\n      });\n    }\n  } catch (error) {\n    console.error('加载宠物数据失败:', error)\n  }\n}\n\n// 加载今日提醒\nasync function loadTodayReminders() {\n  try {\n    const now = new Date()\n    const start = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0, 0, 0).toISOString()\n    const end = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59, 999).toISOString()\n    const res = await api.getSubscriptions({ startDate: start, endDate: end })\n    const list = Array.isArray(res) ? res : (res.subscriptions || res.data || [])\n    homeReminders.value = list.map(s => ({\n      id: s.id,\n      title: s.content || (s.type === 'medicine' ? '用药提醒' : (s.type === 'vaccine' ? '疫苗提醒' : (s.type === 'wash' ? '洗护提醒' : '日常提醒'))),\n      time: (new Date(s.fireAt)).toTimeString().slice(0,5)\n    }))\n  } catch (e) {\n    homeReminders.value = []\n  }\n}\n\n// 加载\"今日科普\"：固定获取第一篇article文章\nasync function loadDailyScience() {\n  try {\n    console.log('🔍 开始加载今日科普...')\n    const res = await api.getArticles({ page: 1, limit: 1 })\n    console.log('📡 科普API返回:', res)\n    \n    const list = Array.isArray(res) ? res : (res.articles || res.data || [])\n    console.log('📋 科普文章列表:', list)\n    \n    if (!list.length) {\n      console.log('⚠️ 没有找到科普文章')\n      dailyScience.value = null\n      return\n    }\n    \n    // 固定获取第一篇文章\n    const selectedArticle = list[0]\n    console.log('✅ 选中的科普文章（第一篇）:', selectedArticle)\n    \n    // 处理内容截断和null值\n    if (selectedArticle) {\n      if (!selectedArticle.content || selectedArticle.content === null) {\n        // 如果content为null，使用title作为内容\n        selectedArticle.content = selectedArticle.title || '暂无内容'\n        console.log('⚠️ 文章content为null，使用title作为内容:', selectedArticle.content)\n      } else {\n        const maxLength = 120 // 最大显示字符数\n        const content = selectedArticle.content\n        if (content.length > maxLength) {\n          selectedArticle.content = content.substring(0, maxLength) + '...'\n          console.log('✂️ 内容已截断:', selectedArticle.content)\n        }\n      }\n    }\n    \n    dailyScience.value = selectedArticle\n    console.log('🎯 最终科普数据:', dailyScience.value)\n  } catch (e) {\n    console.error('❌ 加载今日科普失败:', e)\n    dailyScience.value = null\n  }\n}\n\n// 获取问候语\nfunction getGreeting() {\n  const hour = new Date().getHours()\n  if (hour < 12) {\n    return 'Good Morning!'\n  } else if (hour < 18) {\n    return 'Good Afternoon!'\n  } else {\n    return 'Good Evening!'\n  }\n}\n\nfunction goAddPet() {\n\tuni.navigateTo({ url: '/pages/createPet/createPet' })\n}\n\nfunction goToRecord(tab) {\n\t// 将 tab 参数存储到全局状态\n\tuni.setStorageSync('recordTab', tab)\n\t// 跳转到 tabBar 页面\n\tuni.switchTab({ url: '/pages/record/record' })\n}\n\n// 图片加载事件处理\nfunction onImageLoad(e) {\n  console.log('图片加载成功:', e)\n}\n\nfunction onImageError(e) {\n  console.error('图片加载失败:', e)\n  console.error('失败的图片URL:', currentPet.value?.avatarUrl)\n  \n  // 当图片加载失败时，使用默认头像\n  if (currentPet.value) {\n    currentPet.value.avatarUrl = getDefaultPetAvatar()\n  }\n}\n\nfunction goPetDetail(pet) {\n  pet = pet || currentPet.value\n  console.log('=== 首页跳转宠物详情调试信息 ===');\n  console.log('当前宠物数据:', pet);\n  console.log('宠物头像URL:', pet?.avatarUrl);\n  \n  if (!pet || !pet.id) return\n  const q = encodeURIComponent(JSON.stringify(pet))\n  console.log('编码后的数据:', q);\n  console.log('跳转URL:', `/pages/petDetail/petDetail?pet=${q}`);\n  \n  uni.navigateTo({ url: `/pages/petDetail/petDetail?pet=${q}` })\n}\n\n// 跳转到科普详情页\nfunction goScienceDetail() {\n  if (!dailyScience.value || !dailyScience.value.id) {\n    console.log('⚠️ 没有科普内容可跳转')\n    return\n  }\n  \n  console.log('🔍 跳转科普详情:', dailyScience.value)\n  \n  // 跳转到科普详情页\n  uni.navigateTo({\n    url: `/pages/scienceDetail/scienceDetail?id=${dailyScience.value.id}`,\n    success: (res) => {\n      console.log('✅ 科普详情页跳转成功')\n      try {\n        res.eventChannel.emit('science', dailyScience.value)\n        console.log('📤 已发送科普数据到详情页:', dailyScience.value)\n      } catch (e) {\n        console.error('❌ 发送科普数据失败:', e)\n      }\n    },\n    fail: (err) => {\n      console.error('❌ 科普详情页跳转失败:', err)\n    }\n  })\n}\n</script>\n\n<style>\n.home-page {\n\tpadding: 24rpx;\n\tpadding-top: calc(80rpx + env(safe-area-inset-top));\n\t/* iOS 兼容 */\n\tpadding-top: calc(80rpx + constant(safe-area-inset-top));\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n\tmin-height: 100vh;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n/* Header */\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 24rpx;\n\twidth: 100%;\n\tmax-width: 704rpx;\n}\n\n.greet .hi {\n\tdisplay: block;\n\tfont-size: 36rpx;\n\tfont-weight: 700;\n\tcolor: #1a1a1a;\n}\n\n.greet .sub {\n\tdisplay: block;\n\tmargin-top: 8rpx;\n\tcolor: #6b6b6b;\n\tfont-size: 24rpx;\n}\n\n/* Pet card */\n.pet-card {\n\twidth: 100%;\n\tmax-width: 704rpx;\n\theight: 336rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground: #ffffff;\n\tborder-radius: 32rpx;\n\tpadding: 20rpx;\n\tbox-shadow: 0 8rpx 16rpx rgba(0, 0, 0, 0.06);\n\tmargin-bottom: 32rpx;\n\tposition: relative;\n\tborder: 4rpx solid #2c2c2c;\n\tbox-sizing: border-box;\n}\n\n.pet-empty {\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 12rpx;\n\tbackground: url('/static/index/add-bg.png') center/cover no-repeat;\n\tborder-radius: 24rpx;\n}\n\n.add-icon {\n\twidth: 100rpx;\n\theight: 100rpx;\n}\n\n.add-text {\n\tfont-size: 36rpx;\n\tfont-weight: 700;\n\tcolor: #1a1a1a;\n}\n\n.pet-top-decoration {\n\tposition: relative;\n\ttop: 3rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tdisplay: flex;\n\tjustify-content: center;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.decoration-oval {\n\twidth: 120rpx;\n\theight: 20rpx;\n\tbackground: linear-gradient(90deg, #ffeb3b 0%, #fff9c4 100%);\n\tborder-radius: 40%;\n\tborder: 2rpx solid #2c2c2c;\n}\n\n.decoration-img {\n\twidth: 160rpx;\n\theight: 24rpx;\n\tdisplay: block;\n\tborder-radius: 40rpx;\n}\n\n/* svg not supported on mp-weixin; use CSS capsule instead */\n\n.pet-content {\n\tdisplay: flex;\n\tpadding: 24rpx 18rpx 0 18rpx;\n\tborder: 1rpx solid yellow;\n}\n\n/* 多宠物横滑容器 */\n.pet-scroll {\n\twhite-space: nowrap;\n\twidth: 100%;\n\theight: 240rpx;\n}\n\n.pet-scroll::-webkit-scrollbar {\n\tdisplay: none;\n\twidth: 0;\n\theight: 0;\n}\n\n.pet-item {\n\tdisplay: inline-flex;\n\talign-items: stretch;\n\twidth: 100%;\n\theight: 220rpx;\n\tbackground: transparent;\n\tborder-radius: 0;\n\t/* padding: 24rpx 18rpx 0 18rpx; */\n\tmargin-right: 0;\n\t/* border: 1rpx solid green; */\n}\n\n.pet-container {\n\twidth: 94%;\n\tdisplay: flex;\n\tpadding: 24rpx 0rpx 0 18rpx;\n\t/* border: 1rpx solid yellow; */\n}\n\n.pet-left {\n\tmargin-right: 32rpx;\n}\n\n.pet-avatar {\n\twidth: 210rpx;\n\theight: 210rpx;\n\tborder-radius: 20rpx;\n\tbackground: #fff7d6;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tborder: 4rpx solid #2c2c2c;\n}\n\n.pet-avatar-inner {\n\twidth: 160rpx;\n\theight: 120rpx;\n\tbackground: linear-gradient(180deg, #ffd280, #ffeab1);\n\tborder-radius: 12rpx;\n}\n\n.pet-right {\n\tflex: 1;\n\theight: 210rpx;\n\tjustify-content: space-between;\n\t/* border: 1rpx solid red; */\n}\n\n.pet-title-row {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.pet-name {\n\tfont-size: 32rpx;\n\tfont-weight: 700;\n\tcolor: #1a1a1a;\n}\n\n.pet-edit {\n\tcolor: #888;\n\tfont-size: 28rpx;\n\tpadding-right: 20rpx;\n}\n\n.pet-meta {\n\tfont-size: 28rpx;\n\tdisplay: block;\n\tmargin-top: 8rpx;\n\tcolor: #6b6b6b;\n}\n\n.pet-tags {\n\tdisplay: flex;\n\tgap: 12rpx;\n\tmargin-top: 16rpx;\n}\n\n.tag {\n\tpadding: 6rpx 16rpx;\n\tborder-radius: 999rpx;\n\tfont-size: 22rpx;\n\tborder: 2rpx solid #2c2c2c;\n\tcolor: #1a1a1a;\n\tbackground: #ffe082;\n}\n\n.tag-cute {\n\tbackground: #ffecb3;\n}\n\n.tag-stick {\n\tbackground: #fff2cc;\n}\n\n/* Row */\n.row {\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: 24rpx;\n\tmargin-bottom: 24rpx;\n\twidth: 100%;\n\tmax-width: 704rpx;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\theight: 358rpx;\n}\n\n.todo-card {\n\twidth: 284rpx;\n\theight: 100%;\n\tbackground: #ffffff;\n\tborder-radius: 32rpx;\n\tpadding: 20rpx;\n\tbox-shadow: 0 8rpx 16rpx rgba(0, 0, 0, 0.06);\n\tborder: 4rpx solid #2c2c2c;\n\tbox-sizing: border-box;\n\tflex-shrink: 0;\n\torder: 1;\n}\n\n.todo-scroll {\n\theight: 100%;\n\twidth: 100%;\n\toverflow: hidden;\n}\n\n.todo-item {\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n    padding: 12rpx 0;\n    font-size: 26rpx;\n    color: #1a1a1a;\n}\n\n.bullet {\n    width: 16rpx;\n    height: 16rpx;\n    background: #2c2c2c;\n    border-radius: 50%;\n    flex: 0 0 16rpx;\n}\n\n.side-cards {\n\twidth: 340rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n\tflex-shrink: 0;\n\torder: 2;\n}\n\n.side-card {\n\tbackground: #ffffff;\n\tborder-radius: 40rpx;\n\tpadding: 24rpx;\n\tbox-shadow: 0 8rpx 16rpx rgba(0, 0, 0, 0.06);\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 20rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tjustify-content: space-between;\n\theight: 115rpx;\n\t/* 统一两个卡片高度 */\n}\n\n.side-icon {\n\twidth: 86rpx;\n\theight: 86rpx;\n}\n\n.side-texts {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\t/* 文本区自适应填充，保证两卡片同高 */\n\tmin-width: 0;\n}\n\n.side-title {\n\tfont-size: 30rpx;\n\tfont-weight: 600;\n\tcolor: #1a1a1a;\n}\n\n.side-sub {\n\tcolor: #6b6b6b;\n\tmargin-top: 8rpx;\n\tfont-size: 22rpx;\n}\n\n/* Science */\n.science {\n    width: 704rpx;\n\theight: 416rpx;\n\tbackground: #ffffff;\n\tborder-radius: 24rpx;\n\tpadding: 26rpx 20rpx 12rpx;\n\t/* 减小上边距与整体竖向间隙 */\n\tbox-shadow: 0 8rpx 16rpx rgba(0, 0, 0, 0.06);\n\tmargin-bottom: 40rpx;\n\t/* 更贴近顶部内容 */\n\tposition: relative;\n\toverflow: hidden;\n\tborder: 4rpx solid #2c2c2c;\n\tbox-sizing: border-box;\n}\n\n.science-hd {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 8rpx;\n\t/* 收紧标题与正文的距离 */\n}\n\n.science-title {\n\twidth: 28%;\n\tposition: relative;\n\tdisplay: inline-flex;\n\talign-items: center;\n\tbackground: #ffeb3b;\n\tpadding: 10rpx 24rpx 10rpx 28rpx;\n\tborder-radius: 16rpx;\n\tborder: 4rpx solid #2c2c2c;\n}\n\n.science-title text {\n\tfont-weight: 700;\n\tcolor: #1a1a1a;\n}\n\n.title-notch {\n\tposition: absolute;\n\tleft: 12rpx;\n\ttop: -10rpx;\n\twidth: 40rpx;\n\theight: 12rpx;\n\tbackground: #2c2c2c;\n\tborder-radius: 999rpx;\n}\n\n.science-sub {\n\tcolor: #1a1a1a;\n\tmargin-left: 8rpx;\n\tfont-weight: 700;\n\tfont-size: 30rpx;\n}\n\n.science-text {\n\tfont-size: 24rpx;\n\tfont-weight: normal;\n\tdisplay: block;\n\tcolor: #000000;\n\tline-height: 1.8;\n\tmargin: 12rpx 0 16rpx;\n\twidth: 60%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tdisplay: -webkit-box;\n\t-webkit-line-clamp: 5; /* 最多显示4行 */\n\t-webkit-box-orient: vertical;\n\tword-break: break-word;\n}\n\n.science-illust {\n\tposition: absolute;\n\tright: 5rpx;\n\tbottom: 10rpx;\n\twidth: 280rpx;\n}\n\n.science-icons {\n\tposition: absolute;\n\tleft: 16rpx;\n\tbottom: 10rpx;\n\tdisplay: flex;\n\tgap: 12rpx;\n\talign-items: center;\n}\n\n.fish {\n\twidth: 165rpx;\n\theight: 24rpx;\n}\n\n/* 真机调试适配 */\n@media screen and (max-width: 750px) {\n\t.home-page {\n\t\tpadding-top: calc(110rpx + 20px);\n\t}\n}\n\n/* 小屏幕设备适配 */\n@media screen and (max-width: 600px) {\n\t.home-page {\n\t\tpadding-left: 12rpx;\n\t\tpadding-right: 12rpx;\n\t}\n\t\n\t.pet-card,\n\t.science {\n\t\twidth: calc(100vw - 24rpx);\n\t\tmax-width: 704rpx;\n\t}\n\t\n\t.row {\n\t\tflex-direction: row;\n\t\tgap: 12rpx;\n\t\twidth: 100%;\n\t}\n\t\n\t.todo-card {\n\t\twidth: 50%;\n\t\tmax-width: 320rpx;\n\t}\n\t\n\t.side-cards {\n\t\twidth: 50%;\n\t\tmax-width: 384rpx;\n\t}\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","onMounted","initState","onShow","api","MiniProgramPage"],"mappings":"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"}