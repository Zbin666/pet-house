{"version":3,"file":"createCommunity.js","sources":["pages/createCommunity/createCommunity.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY3JlYXRlQ29tbXVuaXR5L2NyZWF0ZUNvbW11bml0eS52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<!-- 内容区域 -->\n\t\t<view class=\"content\">\n\t\t\t<!-- 发布类型选择 -->\n\t\t\t<view class=\"type-selector\">\n\t\t\t\t<view :class=\"['type-btn', !isQuestion ? 'active' : '']\" @tap=\"isQuestion = false\">\n\t\t\t\t\t<text>发布动态</text>\n\t\t\t\t</view>\n\t\t\t\t<view :class=\"['type-btn', isQuestion ? 'active' : '']\" @tap=\"isQuestion = true\">\n\t\t\t\t\t<text>发布问答</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 用户信息 -->\n\t\t\t<view class=\"user-info\">\n\t\t\t\t<image class=\"user-avatar\" :src=\"getUserAvatarSrc(userInfo.avatarUrl)\" mode=\"aspectFill\" />\n\t\t\t\t<view class=\"user-details\">\n\t\t\t\t\t<text class=\"username\">{{ userInfo.nickname || '用户' }}</text>\n\t\t\t\t\t<text class=\"user-desc\">{{ currentPet.name || '未设置宠物' }}{{ currentPet.breed ? '｜' + currentPet.breed : '' }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 问答标题输入（仅问答模式） -->\n\t\t\t<view class=\"title-input-area\" v-if=\"isQuestion\">\n\t\t\t\t<input \n\t\t\t\t\tclass=\"title-input\" \n\t\t\t\t\tv-model=\"questionTitle\" \n\t\t\t\t\tplaceholder=\"请输入问题标题...\" \n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t:maxlength=\"100\"\n\t\t\t\t/>\n\t\t\t\t<view class=\"char-count\">{{ questionTitle.length }}/100</view>\n\t\t\t</view>\n\n\t\t\t<!-- 文本输入区域 -->\n\t\t\t<view class=\"text-input-area\">\n\t\t\t\t<textarea \n\t\t\t\t\tclass=\"content-input\" \n\t\t\t\t\tv-model=\"content\" \n\t\t\t\t\t:placeholder=\"isQuestion ? '详细描述你的问题...' : '分享你的宠物日常...'\" \n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t:maxlength=\"500\"\n\t\t\t\t\tauto-height\n\t\t\t\t></textarea>\n\t\t\t\t<view class=\"char-count\">{{ content.length }}/500</view>\n\t\t\t</view>\n\n\t\t\t<!-- 图片上传区域（仅动态模式） -->\n\t\t\t<view class=\"image-upload-area\" v-if=\"!isQuestion\">\n\t\t\t\t<view class=\"upload-title\">添加图片</view>\n\t\t\t\t<view class=\"image-grid\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"image-item\" \n\t\t\t\t\t\tv-for=\"(image, index) in images\" \n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<image class=\"uploaded-image\" :src=\"image\" mode=\"aspectFill\" />\n\t\t\t\t\t\t<view class=\"delete-btn\" @tap=\"removeImage(index)\">×</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"upload-btn\" \n\t\t\t\t\t\tv-if=\"images.length < 9\" \n\t\t\t\t\t\t@tap=\"chooseImage\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"upload-icon\">+</text>\n\t\t\t\t\t\t<text class=\"upload-text\">添加图片</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 话题标签 -->\n\t\t\t<view class=\"topic-area\">\n\t\t\t\t<view class=\"topic-title\">添加话题</view>\n\t\t\t\t\n\t\t\t\t<!-- 已添加的话题标签 -->\n\t\t\t\t<view class=\"topic-tags\" v-if=\"topics.length > 0\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"topic-tag\" \n\t\t\t\t\t\tv-for=\"(tag, index) in topics\" \n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"tag-text\">#{{ tag }}</text>\n\t\t\t\t\t\t<view class=\"tag-remove\" @tap=\"removeTopic(index)\">×</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 话题输入框 -->\n\t\t\t\t<view class=\"topic-input-wrapper\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass=\"topic-input\" \n\t\t\t\t\t\tv-model=\"currentTopic\" \n\t\t\t\t\t\tplaceholder=\"# 输入话题标签\" \n\t\t\t\t\t\tplaceholder-class=\"topic-placeholder\"\n\t\t\t\t\t\t@confirm=\"addTopic\"\n\t\t\t\t\t/>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 紧急标记（仅问答模式） -->\n\t\t\t<view class=\"urgent-area\" v-if=\"isQuestion\">\n\t\t\t\t<view class=\"urgent-title\">问题类型</view>\n\t\t\t\t<view class=\"urgent-option\" @tap=\"isUrgent = !isUrgent\">\n\t\t\t\t\t<view :class=\"['urgent-checkbox', isUrgent ? 'checked' : '']\">\n\t\t\t\t\t\t<text v-if=\"isUrgent\">✓</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"urgent-label\">紧急问题</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 位置信息（按需开启） -->\n\t\t</view>\n\n\t\t<!-- 发布按钮 -->\n\t\t<view class=\"publish-btn\" @tap=\"publish\">\n\t\t\t<text class=\"publish-text\">{{ isQuestion ? '发布问题' : '发布' }}</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { api } from '@/utils/api.js'\nimport { uploadImages } from '@/utils/upload.js'\n\n// 用户头像缓存\nconst avatarCache = new Map()\n\n// 获取用户头像的可显示 src\nfunction getUserAvatarSrc(url) {\n\tif (!url) {\n\t\treturn '/static/user/user.png'\n\t}\n\t\n\t// 统一规范化：\n\t// 1) /uploads/ 相对路径 → 拼接静态域名\n\t// 2) 强制 http → https，去掉 :80\n\tlet normalized = url\n\tif (normalized.startsWith('/uploads/')) {\n\t\tnormalized = `https://pet-api.zbinli.cn${normalized}`\n\t}\n\tif (normalized.startsWith('http://pet-api.zbinli.cn')) {\n\t\tnormalized = normalized.replace('http://pet-api.zbinli.cn', 'https://pet-api.zbinli.cn')\n\t}\n\tnormalized = normalized.replace('://pet-api.zbinli.cn:80', '://pet-api.zbinli.cn')\n\n\t// 本地或静态路径直接返回\n\tif (normalized.startsWith('wxfile://') || normalized.startsWith('/static/')) {\n\t\treturn normalized\n\t}\n\n\t// 命中缓存\n\tif (avatarCache.has(normalized)) {\n\t\treturn avatarCache.get(normalized)\n\t}\n\n\t// 下载网络图片到本地临时文件\n\tuni.downloadFile({\n\t\turl: normalized,\n\t\tsuccess: (res) => {\n\t\t\tif (res.statusCode === 200 && res.tempFilePath) {\n\t\t\t\tavatarCache.set(normalized, res.tempFilePath)\n\t\t\t\t// 触发视图更新\n\t\t\t\tuserInfo.value = { ...userInfo.value }\n\t\t\t} else {\n\t\t\t\tavatarCache.set(normalized, '/static/user/user.png')\n\t\t\t\tuserInfo.value = { ...userInfo.value }\n\t\t\t}\n\t\t},\n\t\tfail: () => {\n\t\t\tavatarCache.set(normalized, '/static/user/user.png')\n\t\t\tuserInfo.value = { ...userInfo.value }\n\t\t}\n\t})\n\n\t// 下载中返回占位\n\treturn '/static/user/user.png'\n}\n\nconst content = ref('')\nconst images = ref([])\nconst topics = ref([])\nconst currentTopic = ref('')\nconst location = ref('')\nconst userInfo = ref({})\nconst currentPet = ref({})\n\n// 问答相关\nconst isQuestion = ref(false)\nconst questionTitle = ref('')\nconst isUrgent = ref(false)\n\nasync function publish() {\n\tif (isQuestion.value) {\n\t\t// 发布问答\n\t\tif (!questionTitle.value.trim() || !content.value.trim()) {\n\t\t\tuni.showToast({ title: '请输入问题标题和内容', icon: 'none' })\n\t\t\treturn\n\t\t}\n\t\t\n\t\ttry {\n\t\t\tconst payload = {\n\t\t\t\ttitle: questionTitle.value.trim(),\n\t\t\t\tcontent: content.value.trim(),\n\t\t\t\tisUrgent: isUrgent.value,\n\t\t\t\ttags: topics.value,\n\t\t\t\tpetId: currentPet.value.id\n\t\t\t}\n\t\t\tawait api.createQuestion(payload)\n\t\t\tuni.showToast({ title: '问题发布成功', icon: 'success' })\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.navigateBack()\n\t\t\t\t// 通知问答列表刷新\n\t\t\t\ttry { uni.$emit('questions:refresh') } catch (e) {}\n\t\t\t}, 800)\n\t\t} catch (e) {\n\t\t\tconsole.error('发布问答失败:', e)\n\t\t\tuni.showToast({ \n\t\t\t\ttitle: e.message || '发布失败，请检查网络连接', \n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 3000\n\t\t\t})\n\t\t}\n\t} else {\n\t\t// 发布动态\n\t\tif (!content.value.trim() && images.value.length === 0) {\n\t\t\tuni.showToast({ title: '请输入内容或添加图片', icon: 'none' })\n\t\t\treturn\n\t\t}\n\t\ttry {\n\t\t\t// 1. 提取所有本地临时图片（wxfile://）\n\t\t\tconst localImages = images.value.filter(img => typeof img === 'string' && img.startsWith('wxfile://'))\n\t\t\tlet uploadedUrls = []\n        if (localImages.length > 0) {\n            uni.showLoading({title: `上传${localImages.length}张图片中...`})\n            // 2. 上传所有本地图片\n            uploadedUrls = await uploadImages(localImages, 'gallery', currentPet.value.id)\n        }\n\t\t\t// 3. 使用 https 地址替换 wxfile://，其余非本地图片直接保留\n\t\t\tconst urlSet = []\n\t\t\tlet uploadIdx = 0\n\t\t\tfor (const img of images.value) {\n\t\t\t\tif (typeof img === 'string' && img.startsWith('wxfile://')) {\n\t\t\t\t\turlSet.push(uploadedUrls[uploadIdx])\n\t\t\t\t\tuploadIdx++\n\t\t\t\t} else {\n\t\t\t\t\turlSet.push(img)\n\t\t\t\t}\n\t\t\t}\n\t\t\timages.value = urlSet\n\t\t\tuni.hideLoading()\n\t\t\t// 4. 调用创建动态接口\n\t\t\tconst payload = {\n\t\t\t\ttext: content.value.trim(),\n\t\t\t\timages: images.value,\n\t\t\t\ttags: topics.value,\n\t\t\t\tpetId: currentPet.value.id\n\t\t\t}\n\t\t\tawait api.createFeed(payload)\n\t\t\tuni.showToast({ title: '发布成功', icon: 'success' })\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.navigateBack()\n\t\t\t\t// 通知广场刷新\n\t\t\t\ttry { uni.$emit('feeds:refresh') } catch (e) {}\n\t\t\t}, 800)\n\t\t} catch (e) {\n\t\t\tuni.hideLoading()\n\t\t\tconsole.error('发布动态失败:', e)\n\t\t\tuni.showToast({ \n\t\t\t\ttitle: e.message || '发布失败，请检查网络连接', \n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 3000\n\t\t\t})\n\t\t}\n\t}\n}\n\nfunction chooseImage() {\n\tuni.chooseImage({\n\t\tcount: 9 - images.value.length,\n\t\tsizeType: ['compressed'],\n\t\tsourceType: ['album', 'camera'],\n\t\tsuccess: (res) => {\n\t\t\timages.value.push(...res.tempFilePaths)\n\t\t}\n\t})\n}\n\nfunction removeImage(index) {\n\timages.value.splice(index, 1)\n}\n\nfunction addTopic() {\n\tconst topic = currentTopic.value.trim().replace(/^#+/, '')\n\tif (topic && !topics.value.includes(topic)) {\n\t\ttopics.value.push(topic)\n\t\tcurrentTopic.value = ''\n\t}\n}\n\nfunction removeTopic(index) {\n\ttopics.value.splice(index, 1)\n}\n\nasync function loadUserAndPet() {\n\ttry {\n\t\t// 获取用户信息\n\t\tconst user = await api.getProfile()\n\t\tuserInfo.value = user\n\t\t\n\t\t// 获取宠物列表，选择第一个作为当前宠物\n\t\tconst pets = await api.getPets()\n\t\tif (pets && pets.length > 0) {\n\t\t\tcurrentPet.value = pets[0]\n\t\t}\n\t} catch (e) {\n\t\tconsole.warn('Failed to load user/pet info:', e)\n\t}\n}\n\nonMounted(() => {\n\tloadUserAndPet()\n})\n\nfunction chooseLocation() {\n\tuni.chooseLocation({\n\t\tsuccess: (res) => {\n\t\t\tlocation.value = res.name\n\t\t}\n\t})\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n    padding-bottom: 120rpx; /* 为底部按钮留出空间 */\n}\n\n/* 内容区域 */\n.content {\n    padding: 30rpx 56rpx; /* 增加左右留白 */\n    padding-top: calc(30rpx + env(safe-area-inset-top));\n    padding-top: calc(30rpx + constant(safe-area-inset-top));\n    width: 100%;\n    max-width: 704rpx; /* 限制内容最大宽度，增强左右留白效果 */\n    box-sizing: border-box;\n}\n\n/* 发布类型选择 */\n.type-selector {\n    display: flex;\n    background: #fff;\n    border: 4rpx solid #2c2c2c;\n    border-radius: 20rpx;\n    margin-bottom: 30rpx;\n    box-shadow: 0 6rpx 0 #2c2c2c;\n    overflow: hidden;\n}\n\n.type-btn {\n    flex: 1;\n    padding: 20rpx;\n    text-align: center;\n    background: #fff;\n    color: #666;\n    font-size: 28rpx;\n    font-weight: 600;\n    transition: all 0.3s ease;\n}\n\n.type-btn.active {\n    background: #2c2c2c;\n    color: #fff;\n}\n\n/* 用户信息 */\n.user-info {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 30rpx;\n}\n\n.user-avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.user-details {\n\tmargin-left: 20rpx;\n}\n\n.username {\n\tdisplay: block;\n\tfont-size: 30rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.user-desc {\n\tdisplay: block;\n\tfont-size: 24rpx;\n\tcolor: #7a7a7a;\n\tmargin-top: 4rpx;\n}\n\n/* 标题输入区域 */\n.title-input-area {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n.title-input {\n\twidth: 100%;\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #333;\n\tline-height: 1.4;\n}\n\n/* 文本输入区域 */\n.text-input-area {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n.content-input {\n\twidth: 100%;\n\tmin-height: 200rpx;\n\tfont-size: 28rpx;\n\tline-height: 1.6;\n\tcolor: #333;\n}\n\n.placeholder {\n\tcolor: #bbb;\n}\n\n.char-count {\n\ttext-align: right;\n\tfont-size: 24rpx;\n\tcolor: #999;\n\tmargin-top: 10rpx;\n}\n\n/* 图片上传区域 */\n.image-upload-area {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n.upload-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tmargin-bottom: 20rpx;\n}\n\n.image-grid {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgap: 20rpx;\n}\n\n.image-item {\n\tposition: relative;\n\taspect-ratio: 1;\n\tborder-radius: 12rpx;\n\toverflow: hidden;\n}\n\n.uploaded-image {\n\twidth: 100%;\n\theight: 100%;\n\tbackground: #f3f3f3;\n}\n\n.delete-btn {\n\tposition: absolute;\n\ttop: 8rpx;\n\tright: 8rpx;\n\twidth: 40rpx;\n\theight: 40rpx;\n\tbackground: rgba(0, 0, 0, 0.6);\n\tcolor: #fff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 24rpx;\n\tfont-weight: bold;\n}\n\n.upload-btn {\n\taspect-ratio: 1;\n\tborder: 2rpx dashed #ccc;\n\tborder-radius: 12rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: #fafafa;\n}\n\n.upload-icon {\n\tfont-size: 40rpx;\n\tcolor: #999;\n\tmargin-bottom: 8rpx;\n}\n\n.upload-text {\n\tfont-size: 20rpx;\n\tcolor: #999;\n}\n\n/* 话题标签 */\n.topic-area {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n.topic-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tmargin-bottom: 20rpx;\n}\n\n/* 话题标签列表 */\n.topic-tags {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tgap: 12rpx;\n\tmargin-bottom: 20rpx;\n}\n\n.topic-tag {\n\tdisplay: flex;\n\talign-items: center;\n\tbackground: #f0f0f0;\n\tborder: 2rpx solid #ddd;\n\tborder-radius: 20rpx;\n\tpadding: 8rpx 16rpx;\n\tgap: 8rpx;\n}\n\n.tag-text {\n\tfont-size: 24rpx;\n\tcolor: #333;\n}\n\n.tag-remove {\n\twidth: 32rpx;\n\theight: 32rpx;\n\tbackground: #999;\n\tcolor: #fff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 20rpx;\n\tfont-weight: bold;\n}\n\n.topic-input-wrapper {\n\tbackground: #f8f8f8;\n\tborder-radius: 12rpx;\n\tpadding: 20rpx;\n}\n\n.topic-input {\n\twidth: 100%;\n\tfont-size: 26rpx;\n\tcolor: #333;\n}\n\n.topic-placeholder {\n\tcolor: #bbb;\n}\n\n/* 紧急标记区域 */\n.urgent-area {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n.urgent-title {\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tmargin-bottom: 20rpx;\n}\n\n.urgent-option {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.urgent-checkbox {\n\twidth: 40rpx;\n\theight: 40rpx;\n\tborder: 4rpx solid #ddd;\n\tborder-radius: 8rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: #fff;\n\ttransition: all 0.3s ease;\n}\n\n.urgent-checkbox.checked {\n\tbackground: #ff6b35;\n\tborder-color: #ff6b35;\n\tcolor: #fff;\n}\n\n.urgent-checkbox text {\n\tfont-size: 24rpx;\n\tfont-weight: bold;\n}\n\n.urgent-label {\n\tfont-size: 26rpx;\n\tcolor: #333;\n}\n\n/* 位置信息 */\n.location-area {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 20rpx;\n\tpadding: 30rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n.location-item {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.location-icon {\n\tfont-size: 28rpx;\n\tmargin-right: 12rpx;\n}\n\n.location-text {\n\tfont-size: 26rpx;\n\tcolor: #333;\n}\n\n/* 发布按钮 */\n.publish-btn {\n\tposition: fixed;\n\tbottom: 40rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\twidth: 200rpx;\n\theight: 80rpx;\n\tbackground: #2c2c2c;\n\tborder-radius: 40rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbox-shadow: 0 8rpx 0 #1a1a1a;\n\tz-index: 100;\n}\n\n.publish-btn:active {\n\ttransform: translateX(-50%) translateY(4rpx);\n\tbox-shadow: 0 4rpx 0 #1a1a1a;\n}\n\n.publish-text {\n\tcolor: #fff;\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n}\n</style>","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/createCommunity/createCommunity.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref","api","uploadImages","onMounted"],"mappings":"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"}