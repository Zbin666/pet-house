{"version":3,"file":"petDetail.js","sources":["pages/petDetail/petDetail.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcGV0RGV0YWlsL3BldERldGFpbC52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<!-- Âè†Á∫∏Âç°ÁâáËÉåÊôØ -->\n\t\t<view class=\"sheet\">\n\t\t\t<view class=\"sheet-bg bg1\"></view>\n\n\t\t\t<view class=\"sheet-body\">\n\t\t\t\t<!-- Â§¥ÈÉ®ÔºöÂ§¥ÂÉè + Âü∫Êú¨‰ø°ÊÅØÂàóË°® -->\n\t\t\t\t<view class=\"header\">\n\t\t\t\t\t<view class=\"avatar-wrap\" @tap=\"editMode ? pickAvatar() : null\">\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"getPetAvatarSrc(editMode && form.avatarUrl ? form.avatarUrl : pet.avatarUrl)\"\n\t\t\t\t\t\t\tmode=\"aspectFill\" \n\t\t\t\t\t\t\t@load=\"onAvatarLoad\"\n\t\t\t\t\t\t\t@error=\"onAvatarError\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"kv\">\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">ÂßìÂêçÔºö</text>\n\t\t\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v\">{{ pet.name }}</text></template>\n\t\t\t\t\t\t\t<input v-else class=\"v input\" v-model=\"form.name\" placeholder=\"ËØ∑ËæìÂÖ•ÊòµÁß∞\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">Âπ¥ÈæÑÔºö</text>\n\t\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v\">{{ pet.months || 0 }}‰∏™Êúà</text></template>\n\t\t\t\t\t\t\t<input v-else class=\"v input\" type=\"number\" v-model.number=\"form.months\" placeholder=\"ÊúàÈæÑ\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">‰ΩìÈáçÔºö</text>\n\t\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v\">{{ pet.weight || 0 }}kg</text></template>\n\t\t\t\t\t\t\t<input v-else class=\"v input\" type=\"digit\" v-model=\"form.weight\" placeholder=\"kg\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">ÊÄßÂà´Ôºö</text>\n\t\t\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v\">{{ pet.gender === 'male' ? 'Áî∑Áîü' : 'Â•≥Áîü'\n\t\t\t\t\t\t\t\t\t}}</text></template>\n\t\t\t\t\t\t\t<picker v-else :range=\"genders\" :value=\"genderIndex\" @change=\"onGenderChange\">\n\t\t\t\t\t\t\t\t<view class=\"picker v\">{{ genders[genderIndex] }}</view>\n\t\t\t\t\t\t\t</picker>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">ÁßçÁ±ªÔºö</text>\n\t\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v\">{{ pet.breed }}</text></template>\n\t\t\t\t\t\t\t<input v-else class=\"v input\" v-model=\"form.breed\" placeholder=\"Â¶Ç Â∏ÉÂÅ∂Áå´\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"edit-row\">\n\t\t\t\t\t<view v-if=\"!editMode\" class=\"edit-actions\">\n\t\t\t\t\t\t<button class=\"btn ghost with-icon\" @tap=\"startEdit\">\n\t\t\t\t\t\t\t<image class=\"btn-icon\" src=\"/static/tarBar/index-active.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t<text>ÁºñËæë</text>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button class=\"btn delete-btn with-icon\" @tap=\"deletePet\">\n\t\t\t\t\t\t\t<image class=\"btn-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t<text>Âà†Èô§</text>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-else class=\"edit-actions\">\n\t\t\t\t\t\t<button class=\"btn ghost\" @tap=\"cancelEdit\">ÂèñÊ∂à</button>\n\t\t\t\t\t\t<button class=\"btn\" @tap=\"saveEdit\">‰øùÂ≠ò</button>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- ÁªùËÇ≤ -->\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">ÊòØÂê¶ÁªùËÇ≤Ôºö</text>\n\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v big\">{{ pet.neutered ? 'Â∑≤ÁªùËÇ≤' : 'Êú™ÁªùËÇ≤' }}</text></template>\n\t\t\t\t\t<switch v-else class=\"v\" :checked=\"form.neutered\" @change=\"e => form.neutered = e.detail.value\" />\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- Áñ´Ëãó -->\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">Êé•ÁßçÁñ´ËãóÔºö</text>\n\t\t\t\t\t<view class=\"vaccines\" v-if=\"!editMode\">\n\t\t\t\t\t\t<text v-for=\"(v, i) in vaccines\" :key=\"i\" class=\"v-item\">{{ v }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"vaccines\" v-else>\n\t\t\t\t\t\t<checkbox-group @change=\"onVaccinesChange\">\n\t\t\t\t\t\t\t<label v-for=\"opt in vaccineOptions\" :key=\"opt\" class=\"ck\">\n\t\t\t\t\t\t\t\t<checkbox :value=\"opt\" :checked=\"form.vaccines.includes(opt)\" /><text>{{ opt }}</text>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</checkbox-group>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- ÊÄßÊ†º -->\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">ÊÄßÊ†ºÔºö</text>\n\t\t\t\t\t<template v-if=\"!editMode\"><text class=\"v big\">{{ temperament }}</text></template>\n\t\t\t\t\t<textarea v-else class=\"v textarea\" v-model=\"form.temperament\" placeholder=\"‰æãÂ¶ÇÔºöÊÖµÊáíÔºå‰∏çÁà±Âä®ÔºåËøòÊúâÁÇπÂ∞èÂÇ≤Â®á\" />\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- Êó•Â∏∏ÁÖßÁâá -->\n\t\t\t\t<view class=\"photos\">\n\t\t\t\t\t<view class=\"photos-title\">\n\t\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t\t<text class=\"k big\">Êó•Â∏∏ÁÖßÁâáÔºö</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"gallery\">\n\t\t\t\t\t\t\t<view v-for=\"(g, i) in editMode ? form.gallery : gallery\" :key=\"`photo-${i}-${photoUpdateTrigger}`\" class=\"g-wrapper\">\n\t\t\t\t\t\t\t\t<image class=\"g\" :src=\"getPhotoSrc(g)\" mode=\"aspectFill\" @tap=\"preview(i)\" />\n\t\t\t\t\t\t\t<view v-if=\"editMode\" class=\"g-delete\" @tap=\"deletePhoto(i)\">√ó</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"editMode\" class=\"g add\" @tap=\"pickGallery\">+</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, computed, reactive } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\nimport { uploadImage, compressImage } from '@/utils/upload.js'\n\n// Â§¥ÂÉè‰∏ãËΩΩÁºìÂ≠òÔºåÈÅøÂÖçÈáçÂ§ç‰∏ãËΩΩ\nconst avatarCache = new Map()\n\n// ÁÖßÁâáÁºìÂ≠ò\nconst photoCache = new Map()\nconst photoUpdateTrigger = ref(0)\n\nconst pet = ref({})\n\n// Ëé∑ÂèñÂÆ†Áâ©Â§¥ÂÉèÁöÑÂèØÊòæÁ§∫ srcÔºà‰∏é user.vue ‰øùÊåÅ‰∏ÄËá¥Ôºâ\nfunction getPetAvatarSrc(url) {\n    if (!url) return '/static/logo.png'\n\n    // Áªü‰∏ÄËßÑËåÉÂåñÔºö\n    // 1) /uploads/ Áõ∏ÂØπË∑ØÂæÑ ‚Üí ÊãºÊé•ÈùôÊÄÅÂüüÂêç\n    // 2) Âº∫Âà∂ http ‚Üí httpsÔºåÂéªÊéâ :80\n    let normalized = url\n    if (normalized.startsWith('/uploads/')) {\n        normalized = `https://pet-api.zbinli.cn${normalized}`\n    }\n    if (normalized.startsWith('http://pet-api.zbinli.cn')) {\n        normalized = normalized.replace('http://pet-api.zbinli.cn', 'https://pet-api.zbinli.cn')\n    }\n    normalized = normalized.replace('://pet-api.zbinli.cn:80', '://pet-api.zbinli.cn')\n\n    // Êú¨Âú∞ÊàñÈùôÊÄÅË∑ØÂæÑÁõ¥Êé•ËøîÂõû\n    if (normalized.startsWith('wxfile://') || normalized.startsWith('/static/')) {\n        return normalized\n    }\n\n    // ÂëΩ‰∏≠ÁºìÂ≠ò\n    if (avatarCache.has(normalized)) {\n        return avatarCache.get(normalized)\n    }\n\n    // ‰∏ãËΩΩÁΩëÁªúÂõæÁâáÂà∞Êú¨Âú∞‰∏¥Êó∂Êñá‰ª∂\n    uni.downloadFile({\n        url: normalized,\n        success: (res) => {\n            if (res.statusCode === 200 && res.tempFilePath) {\n                avatarCache.set(normalized, res.tempFilePath)\n                pet.value = { ...(pet.value || {}) }\n            } else {\n                avatarCache.set(normalized, '/static/logo.png')\n                pet.value = { ...(pet.value || {}) }\n            }\n        },\n        fail: () => {\n            avatarCache.set(normalized, '/static/logo.png')\n            pet.value = { ...(pet.value || {}) }\n        }\n    })\n\n    // ‰∏ãËΩΩ‰∏≠ËøîÂõûÂç†‰Ωç\n    return '/static/logo.png'\n}\n\n// Ëé∑ÂèñÁÖßÁâáÁöÑÂèØÊòæÁ§∫ src\nfunction getPhotoSrc(url) {\n    if (!url) return '/static/index/add.png'\n    \n    // Áªü‰∏ÄËßÑËåÉÂåñÔºö\n    // 1) /uploads/ Áõ∏ÂØπË∑ØÂæÑ ‚Üí ÊãºÊé•ÈùôÊÄÅÂüüÂêç\n    // 2) Âº∫Âà∂ http ‚Üí httpsÔºåÂéªÊéâ :80\n    let normalized = url\n    if (normalized.startsWith('/uploads/')) {\n        normalized = `https://pet-api.zbinli.cn${normalized}`\n    }\n    if (normalized.startsWith('http://pet-api.zbinli.cn')) {\n        normalized = normalized.replace('http://pet-api.zbinli.cn', 'https://pet-api.zbinli.cn')\n    }\n    normalized = normalized.replace('://pet-api.zbinli.cn:80', '://pet-api.zbinli.cn')\n\n    // Êú¨Âú∞ÊàñÈùôÊÄÅË∑ØÂæÑÁõ¥Êé•ËøîÂõû\n    if (normalized.startsWith('wxfile://') || normalized.startsWith('/static/')) {\n        return normalized\n    }\n\n    // ÂëΩ‰∏≠ÁºìÂ≠ò\n    if (photoCache.has(normalized)) {\n        return photoCache.get(normalized)\n    }\n\n    // ‰∏ãËΩΩÁΩëÁªúÂõæÁâáÂà∞Êú¨Âú∞‰∏¥Êó∂Êñá‰ª∂\n    uni.downloadFile({\n        url: normalized,\n        success: (res) => {\n            if (res.statusCode === 200 && res.tempFilePath) {\n                photoCache.set(normalized, res.tempFilePath)\n                photoUpdateTrigger.value++\n            } else {\n                console.warn('ÁÖßÁâá‰∏ãËΩΩÂ§±Ë¥•:', normalized, res.statusCode)\n                photoCache.set(normalized, '/static/index/add.png')\n                photoUpdateTrigger.value++\n            }\n        },\n        fail: (err) => {\n            console.error('ÁÖßÁâá‰∏ãËΩΩÂ§±Ë¥•:', normalized, err)\n            photoCache.set(normalized, '/static/index/add.png')\n            photoUpdateTrigger.value++\n        }\n    })\n    \n    return '/static/index/add.png'\n}\n\nonLoad(async (query) => {\n\t// ËÆæÁΩÆÂØºËà™Ê†èËÉåÊôØËâ≤‰∏éÈ°µÈù¢ËÉåÊôØÈ°∂ÈÉ®È¢úËâ≤‰∏ÄËá¥\n\tuni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\n    console.log('=== ÂÆ†Áâ©ËØ¶ÊÉÖÈ°µÂä†ËΩΩË∞ÉËØï‰ø°ÊÅØ ===');\n    console.log('URLÂèÇÊï∞:', query);\n    \n    if (query?.pet) {\n        try {\n            const data = JSON.parse(decodeURIComponent(query.pet))\n            console.log('Ëß£ÊûêÂêéÁöÑÂÆ†Áâ©Êï∞ÊçÆ:', data);\n            console.log('ÂÆ†Áâ©Â§¥ÂÉèURL:', data.avatarUrl);\n            Object.assign(pet.value, data)\n            console.log('ËµãÂÄºÂêéÁöÑpet.value:', pet.value);\n            \n            // ÊµãËØïÂõæÁâáURLÊòØÂê¶ÂèØËÆøÈóÆ\n            if (data.avatarUrl) {\n                console.log('üîç ÊµãËØïÂõæÁâáURLÂèØËÆøÈóÆÊÄß...');\n                \n                // ÊµãËØïÂéüÂßãURL\n                uni.request({\n                    url: data.avatarUrl,\n                    method: 'HEAD',\n                    success: (testRes) => {\n                        console.log('‚úÖ ÂéüÂßãÂõæÁâáURLÊµãËØïÊàêÂäü:', testRes.statusCode);\n                    },\n                    fail: (testErr) => {\n                        console.error('‚ùå ÂéüÂßãÂõæÁâáURLÊµãËØïÂ§±Ë¥•:', testErr);\n                    }\n                });\n                \n                // ÊµãËØïAPIË∑ØÁî±\n                const filename = data.avatarUrl.split('/').pop();\n                const testUrl = `http://pet-api.zbinli.cn/api/test-image/${filename}`;\n                console.log('üß™ ÊµãËØïAPIË∑ØÁî±:', testUrl);\n                \n                uni.request({\n                    url: testUrl,\n                    method: 'GET',\n                    success: (apiRes) => {\n                        console.log('‚úÖ APIË∑ØÁî±ÊµãËØïÊàêÂäü:', apiRes.statusCode);\n                    },\n                    fail: (apiErr) => {\n                        console.error('‚ùå APIË∑ØÁî±ÊµãËØïÂ§±Ë¥•:', apiErr);\n                    }\n                });\n            }\n        } catch (e) { \n            console.error('Ëß£ÊûêÂÆ†Áâ©Êï∞ÊçÆÂ§±Ë¥•:', e);\n        }\n    }\n    // ÊãâÂèñËØ•ÂÆ†Áâ©ÁöÑÂ™í‰ΩìÂõæÁâá\n    if (pet.value?.id) {\n        try {\n            const res = await api.getMedia({ petId: pet.value.id })\n            const mediaList = Array.isArray(res) ? res : (res.media || res.data || [])\n            \n            // ÊåâÁÖßÂàõÂª∫Êó∂Èó¥ÊéíÂ∫èÔºàÊúÄÊó©Âà∞ÊúÄÊôöÔºâ\n            const sortedMediaList = mediaList.sort((a, b) => {\n                const timeA = new Date(a.createdAt || a.created_at || 0).getTime()\n                const timeB = new Date(b.createdAt || b.created_at || 0).getTime()\n                return timeA - timeB // ÂçáÂ∫èÔºöÊúÄÊó©ÁöÑÂú®ÂâçÈù¢\n            })\n            \n            gallery.value = sortedMediaList.map(m => m.url).filter(Boolean)\n            console.log('ÁÖßÁâáÊåâÊó∂Èó¥ÊéíÂ∫è:', sortedMediaList.map(m => ({ url: m.url, createdAt: m.createdAt || m.created_at })))\n        } catch (err) {\n            console.warn('Âä†ËΩΩÂÆ†Áâ©Áõ∏ÂÜåÂ§±Ë¥•', err)\n        }\n    }\n})\n\nconst recent = ref([\n\t{ id: 'r1', time: '‰ªäÂ§© 08:00', type: 'ÂñÇÈ£ü', desc: 'Áå´Á≤Æ 60g' },\n\t{ id: 'r2', time: 'Êò®Â§© 21:10', type: 'Ê∏ÖÊ¥Å', desc: 'Èì≤Á†Ç' }\n])\n\nconst vaccines = ref([])\nconst temperament = ref('')\nconst gallery = ref([])\n\n// ÁºñËæëÊ®°Âºè\nconst editMode = ref(false)\nconst genders = ref(['Â•≥Áîü', 'Áî∑Áîü'])\nconst genderIndex = ref(1)\nconst vaccineOptions = ref(['Â∑≤Êé•ÁßçÁå´‰∏âËÅîÁñ´Ëãó', 'Â∑≤Êé•ÁßçÁãÇÁä¨Áñ´Ëãó'])\nconst form = reactive({ name: '', months: '', weight: '', gender: 'male', breed: '', color: '', neutered: false, birthday: '', startTogether: '', avatar: '', vaccines: [], temperament: '', gallery: [] })\nconst originalGallery = ref([]) // ‰øùÂ≠òÁºñËæëÂâçÁöÑÂéüÂßãÁÖßÁâá\n\nfunction startEdit() {\n\teditMode.value = true\n    Object.assign(form, { ...pet.value, vaccines: [...vaccines.value], temperament: temperament.value, avatarUrl: pet.value.avatarUrl, gallery: [...gallery.value] })\n\toriginalGallery.value = [...gallery.value] // ‰øùÂ≠òÂéüÂßãÁÖßÁâá\n\tgenderIndex.value = form.gender === 'male' ? 1 : 0\n}\nfunction cancelEdit() {\n\teditMode.value = false\n\tgallery.value = [...originalGallery.value] // ÊÅ¢Â§çÂéüÂßãÁÖßÁâá\n}\nasync function saveEdit() {\n    try {\n        uni.showLoading({ title: '‰øùÂ≠ò‰∏≠...' })\n        \n        // ÂáÜÂ§áÊõ¥Êñ∞Êï∞ÊçÆ\n        const updateData = {\n            name: form.name,\n            months: form.months,\n            weight: form.weight,\n            gender: form.gender,\n            breed: form.breed,\n            color: form.color,\n            neutered: form.neutered,\n            birthday: form.birthday,\n            startTogether: form.startTogether,\n            temperament: form.temperament,\n            vaccines: form.vaccines\n        }\n        \n        // Â¶ÇÊûúÊúâÊñ∞Â§¥ÂÉèÔºåÈúÄË¶ÅÂÖà‰∏ä‰º†\n        if (form.avatar && form.avatar.startsWith('wxfile://')) {\n            try {\n                const { uploadImage, compressImage } = await import('@/utils/upload.js')\n                const compressedPath = await compressImage(form.avatar, 0.8)\n                const avatarUrl = await uploadImage(compressedPath, 'avatar')\n                updateData.avatarUrl = avatarUrl\n            } catch (error) {\n                console.warn('Â§¥ÂÉè‰∏ä‰º†Â§±Ë¥•:', error)\n                uni.showToast({ title: 'Â§¥ÂÉè‰∏ä‰º†Â§±Ë¥•ÔºåÂÖ∂‰ªñ‰ø°ÊÅØÂ∑≤‰øùÂ≠ò', icon: 'none' })\n            }\n        } else if (form.avatarUrl) {\n            updateData.avatarUrl = form.avatarUrl\n        }\n        \n        // Êõ¥Êñ∞ÂÆ†Áâ©Âü∫Êú¨‰ø°ÊÅØ\n        await api.updatePet(pet.value.id, updateData)\n        \n        // Â§ÑÁêÜÁÖßÁâáÊõ¥Êñ∞\n        console.log('üîç Ê£ÄÊü•ÁÖßÁâáÊõ¥Êñ∞...')\n        console.log('form.gallery:', form.gallery)\n        console.log('gallery.value:', gallery.value)\n        \n        if (form.gallery && form.gallery.length > 0) {\n            // Ê£ÄÊü•ÊòØÂê¶ÊúâÊñ∞Ê∑ªÂä†ÁöÑÁÖßÁâáÔºàÊú¨Âú∞Ë∑ØÂæÑÔºâ\n            const newPhotos = form.gallery.filter(photo => photo.startsWith('wxfile://'))\n            console.log('Êñ∞ÁÖßÁâáÊï∞Èáè:', newPhotos.length)\n            console.log('Êñ∞ÁÖßÁâáË∑ØÂæÑ:', newPhotos)\n            \n            if (newPhotos.length > 0) {\n                try {\n                    console.log('ÂºÄÂßã‰∏ä‰º†ÁÖßÁâá...')\n                    \n                    // ÂéãÁº©Âπ∂‰∏ä‰º†Êñ∞ÁÖßÁâá\n                    const uploadPromises = newPhotos.map(async (photoPath) => {\n                        console.log('ÂéãÁº©ÁÖßÁâá:', photoPath)\n                        const compressedPath = await compressImage(photoPath, 0.7)\n                        console.log('ÂéãÁº©ÂêéË∑ØÂæÑ:', compressedPath)\n                        const uploadedUrl = await uploadImage(compressedPath, 'gallery')\n                        console.log('‰∏ä‰º†ÊàêÂäüÔºåURL:', uploadedUrl)\n                        return uploadedUrl\n                    })\n                    \n                    const uploadedUrls = await Promise.all(uploadPromises)\n                    console.log('ÊâÄÊúâÁÖßÁâá‰∏ä‰º†ÂÆåÊàê:', uploadedUrls)\n                    \n                    // ÂàõÂª∫Â™í‰ΩìËÆ∞ÂΩï\n                    console.log('ÂàõÂª∫Â™í‰ΩìËÆ∞ÂΩï...')\n                    console.log('petId:', pet.value.id)\n                    console.log('urls:', uploadedUrls)\n                    \n                    const mediaResult = await api.createMedia({\n                        petId: pet.value.id,\n                        type: 'image',\n                        urls: uploadedUrls,\n                        description: 'ÂÆ†Áâ©ÁÖßÁâá'\n                    })\n                    \n                    console.log('Â™í‰ΩìËÆ∞ÂΩïÂàõÂª∫ÁªìÊûú:', mediaResult)\n                    console.log('ÊàêÂäü‰∏ä‰º†ÁÖßÁâá:', uploadedUrls.length, 'Âº†')\n                    \n                    // ÈáçÊñ∞‰ªéÊúçÂä°Âô®Ëé∑ÂèñÊéíÂ∫èÂêéÁöÑÁÖßÁâáÂàóË°®\n                    try {\n                        const res = await api.getMedia({ petId: pet.value.id })\n                        const mediaList = Array.isArray(res) ? res : (res.media || res.data || [])\n                        \n                        // ÊåâÁÖßÂàõÂª∫Êó∂Èó¥ÊéíÂ∫èÔºàÊúÄÊó©Âà∞ÊúÄÊôöÔºâ\n                        const sortedMediaList = mediaList.sort((a, b) => {\n                            const timeA = new Date(a.createdAt || a.created_at || 0).getTime()\n                            const timeB = new Date(b.createdAt || b.created_at || 0).getTime()\n                            return timeA - timeB // ÂçáÂ∫èÔºöÊúÄÊó©ÁöÑÂú®ÂâçÈù¢\n                        })\n                        \n                        gallery.value = sortedMediaList.map(m => m.url).filter(Boolean)\n                        console.log('‰øùÂ≠òÂêéÈáçÊñ∞Âä†ËΩΩÁÖßÁâáÔºåÊåâÊó∂Èó¥ÊéíÂ∫è:', sortedMediaList.map(m => ({ url: m.url, createdAt: m.createdAt || m.created_at })))\n                    } catch (err) {\n                        console.warn('ÈáçÊñ∞Âä†ËΩΩÁÖßÁâáÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Êõ¥Êñ∞:', err)\n                        // Â¶ÇÊûúÈáçÊñ∞Âä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®Êú¨Âú∞Êõ¥Êñ∞\n                        const existingPhotos = form.gallery.filter(photo => !photo.startsWith('wxfile://'))\n                        gallery.value = [...existingPhotos, ...uploadedUrls]\n                    }\n                    \n                } catch (error) {\n                    console.error('ÁÖßÁâá‰∏ä‰º†Â§±Ë¥•:', error)\n                    uni.showToast({ title: 'ÁÖßÁâá‰∏ä‰º†Â§±Ë¥•ÔºåÂÖ∂‰ªñ‰ø°ÊÅØÂ∑≤‰øùÂ≠ò', icon: 'none' })\n                }\n            } else {\n                console.log('Ê≤°ÊúâÊñ∞ÁÖßÁâáÈúÄË¶Å‰∏ä‰º†')\n            }\n        } else {\n            console.log('Ê≤°ÊúâÁÖßÁâáÈúÄË¶ÅÂ§ÑÁêÜ')\n        }\n        \n        // Êõ¥Êñ∞Êú¨Âú∞Êï∞ÊçÆ\n        pet.value = { ...pet.value, ...updateData }\n        vaccines.value = [...form.vaccines]\n        temperament.value = form.temperament\n        gallery.value = [...form.gallery]\n        editMode.value = false\n        \n        uni.hideLoading()\n        uni.showToast({ title: '‰øùÂ≠òÊàêÂäü', icon: 'success' })\n        \n    } catch (error) {\n        uni.hideLoading()\n        console.error('‰øùÂ≠òÂ§±Ë¥•:', error)\n        uni.showToast({ title: '‰øùÂ≠òÂ§±Ë¥•', icon: 'none' })\n    }\n}\nfunction onGenderChange(e) { genderIndex.value = Number(e.detail.value || 0); form.gender = genderIndex.value === 1 ? 'male' : 'female' }\nfunction onVaccinesChange(e) { form.vaccines = e.detail.value || [] }\nfunction pickAvatar() { uni.chooseImage({ count: 1, sizeType: ['compressed'], success: res => { form.avatar = res.tempFilePaths[0] } }) }\nfunction pickGallery() { uni.chooseImage({ count: 9, sizeType: ['compressed'], success: res => { form.gallery = form.gallery.concat(res.tempFilePaths) } }) }\nfunction deletePhoto(index) {\n\tif (editMode.value) {\n\t\tuni.showModal({\n\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\n\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÂº†ÁÖßÁâáÂêóÔºü',\n\t\t\tconfirmText: 'Âà†Èô§',\n\t\t\tcancelText: 'ÂèñÊ∂à',\n\t\t\tconfirmColor: '#ff4757',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tform.gallery.splice(index, 1)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction preview(index) {\n    const list = editMode.value ? form.gallery : gallery.value\n    if (!Array.isArray(list) || list.length === 0) return\n    uni.previewImage({\n        current: index,\n        urls: list\n    })\n}\n\nasync function deletePet() {\n    uni.showModal({\n        title: 'Á°ÆËÆ§Âà†Èô§',\n        content: `Á°ÆÂÆöË¶ÅÂà†Èô§ÂÆ†Áâ©\"${pet.value.name}\"ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ`,\n        confirmText: 'Âà†Èô§',\n        cancelText: 'ÂèñÊ∂à',\n        confirmColor: '#ff4757',\n        success: async (res) => {\n            if (!res.confirm) return\n            try {\n                await api.deletePet(pet.value.id)\n                uni.showToast({ title: 'ÂÆ†Áâ©Â∑≤Âà†Èô§', icon: 'success' })\n                // ÈÄöÁü•ÂÖ∂‰ªñÈ°µÈù¢Âà∑Êñ∞\n                uni.$emit && uni.$emit('pets:changed')\n                setTimeout(() => { uni.navigateBack() }, 600)\n            } catch (e) {\n                uni.showToast({ title: 'Âà†Èô§Â§±Ë¥•', icon: 'none' })\n            }\n        }\n    })\n}\n\nconst togetherDays = computed(() => {\n\tconst start = new Date(pet.value.startTogether).getTime()\n\tconst today = new Date().setHours(0, 0, 0, 0)\n\treturn Math.max(1, Math.floor((today - start) / 86400000) + 1)\n})\n\nfunction goEdit() { uni.navigateTo({ url: '/pages/editPet/editPet' }) }\nfunction goAlbum() { uni.navigateTo({ url: '/pages/album/album' }) }\n\n// ÂõæÁâáÂä†ËΩΩ‰∫ã‰ª∂\nfunction onAvatarLoad(e) {\n    console.log('‚úÖ Â§¥ÂÉèÂõæÁâáÂä†ËΩΩÊàêÂäü:', e);\n}\n\nfunction onAvatarError(e) {\n    console.error('‚ùå Â§¥ÂÉèÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', e);\n    console.log('ÂΩìÂâçÂõæÁâáURL:', pet.value.avatarUrl);\n    try {\n        e && e.target && (e.target.src = '/static/logo.png')\n    } catch {}\n}\n</script>\n\n<style scoped>\n.page {\n\tmin-height: 100vh;\n\tpadding: 24rpx;\n    padding-top: calc(110rpx + env(safe-area-inset-top));\n    padding-top: calc(110rpx + constant(safe-area-inset-top));\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n}\n\n.sheet {\n    position: relative;\n    padding-top: 30rpx; \n    padding-bottom: 45rpx; \n}\n\n.sheet-bg {\n\tposition: absolute;\n\tleft: 12rpx;\n\tright: 12rpx;\n\theight: 96%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 32rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.sheet-bg.bg1 {\n    top: 20rpx;\n    bottom: 0; /* Ë∑üÈöè‰∏ªÂç°ÁâáÂÜÖÂÆπÈ´òÂ∫¶ÂèòÂåñ */\n    height: 90%; /* Âä®ÊÄÅÈ´òÂ∫¶Áî± top/bottom Á∫¶Êùü */\n    width: 648rpx; /* Áï•Â∞è‰∫é‰∏ª‰ΩìÂÆΩÂ∫¶ 600rpxÔºåÂΩ¢ÊàêÂè†Á∫∏ËæπÁºò */\n    left: 50%;\n    right: auto;\n    transform: translateX(-50%) rotate(-3deg);\n}\n\n.sheet-body {\n    width: 600rpx;\n    margin: 0 auto 40rpx; /* Â∫ïÈÉ®ÁïôÁôΩÔºåÁúüÊú∫ÂèØËßÅ */\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 32rpx;\n\tpadding: 32rpx 28rpx 120rpx 28rpx;\n\tz-index: 1;\n}\n\n.header {\n\tmargin-top: 15rpx;\n\tdisplay: flex;\n\tgap: 24rpx;\n}\n\n.avatar-wrap {\n\twidth: 272rpx;\n\theight: 334rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #f5f5f5;\n\toverflow: hidden;\n}\n\n.avatar {\n\twidth: 272rpx;\n\theight: 334rpx;\n\tborder-radius: 16rpx;\n\tbackground: #f5f5f5;\n}\n\n.kv {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 24rpx;\n\tjustify-content: center;\n\tmargin-left: 8rpx;\n}\n\n.kv-row {\n\tdisplay: grid;\n\tgrid-template-columns: 160rpx 1fr;\n\talign-items: center;\n\tcolumn-gap: 12rpx;\n}\n\n.k {\n\tfont-weight: 700;\n\tfont-size: 30rpx;\n}\n\n.v {\n\tfont-size: 30rpx;\n}\n\n.big {\n\tfont-size: 30rpx;\n}\n\n.input {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 10rpx 14rpx;\n}\n\n.picker {\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 10rpx 14rpx;\n}\n\n.textarea {\n\twidth: 100%;\n\tmax-width: 100%;\n\tbox-sizing: border-box;\n\tmin-height: 120rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\tpadding: 12rpx 16rpx;\n\tbackground: #fff;\n}\n\n.edit-row {\n\tposition: absolute;\n\tleft: 28rpx;\n\tright: 28rpx;\n\tbottom: 28rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\tz-index: 2;\n}\n\n.edit-actions {\n\tdisplay: flex;\n\tgap: 28rpx;\n}\n\n.btn {\n\tbackground: #ffe046;\n\tcolor: #1a1a1a;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\theight: 72rpx;\n\tline-height: 72rpx;\n\tpadding: 0 24rpx;\n\tfont-weight: 700;\n}\n\n.btn.ghost {\n\tbackground: #fff;\n}\n\n.btn.with-icon {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 12rpx;\n\tpadding: 0 28rpx;\n}\n\n.btn-icon {\n\twidth: 38rpx;\n\theight: 38rpx;\n}\n\n.btn.delete-btn {\n\tbackground: #fff;\n\tcolor: #ff4757;\n\tborder: 4rpx solid #ff4757;\n\tborder-radius: 999rpx;\n\theight: 72rpx;\n\tline-height: 72rpx;\n\tpadding: 0 24rpx;\n\tfont-weight: 700;\n}\n\n.divider-h {\n\theight: 2rpx;\n\tbackground: #e9e9e9;\n\tmargin: 28rpx 0;\n}\n\n.row {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.row.stack {\n\tflex-direction: column;\n\talign-items: flex-start;\n}\n\n/* ‰ΩøÁî®‰∏âÂàóÁΩëÊ†ºÔºöÂõæÊ†á / Âõ∫ÂÆöÂÆΩÂ∫¶Ê†áÈ¢ò / ÂÄºÂå∫Âüü */\n.icon-row {\n\tdisplay: grid;\n\tgrid-template-columns: 44rpx var(--label-w, 200rpx) 1fr;\n\tcolumn-gap: 12rpx;\n\talign-items: start;\n}\n\n.title {\n\tdisplay: contents;\n}\n\n.icon-row .title {\n\tdisplay: contents;\n}\n\n.icon-row .bullet {\n\twidth: 44rpx;\n\theight: 44rpx;\n\tmargin-right: 12rpx;\n}\n\n.photos-title .bullet {\n\twidth: 44rpx;\n\theight: 44rpx;\n}\n\n.vaccines {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 12rpx;\n}\n\n.vaccines .ck {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tgap: 8rpx;\n\tmargin-right: 16rpx;\n\tmargin-bottom: 8rpx;\n}\n\n.v-item {\n\tfont-size: 32rpx;\n}\n\n.photos {\n\theight: 434rpx;\n\tmargin-top: 12rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 18rpx 34rpx;\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n\toverflow: hidden;\n}\n\n.photos-title {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.gallery {\n\tpadding-left: 0;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 176rpx);\n\tcolumn-gap: 8rpx;\n\trow-gap: 8rpx;\n\tmargin-top: 0;\n\tjustify-content: start;\n\tjustify-items: start;\n\tmax-height: calc(2 * 176rpx + 1 * 8rpx);\n\toverflow-y: auto;\n\t-webkit-overflow-scrolling: touch;\n}\n\n.g-wrapper {\n\tposition: relative;\n\twidth: 176rpx;\n\theight: 176rpx;\n}\n\n.g {\n\twidth: 176rpx;\n\theight: 176rpx;\n\tborder-radius: 12rpx;\n\tbackground: transparent;\n\tborder: 4rpx solid #2c2c2c;\n\tbox-sizing: border-box;\n}\n\n.g.add {\n\tbackground: #fff;\n\tcolor: #888;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 64rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n}\n\n.g-delete {\n\tposition: absolute;\n\ttop: -8rpx;\n\tright: -8rpx;\n\twidth: 32rpx;\n\theight: 32rpx;\n\tbackground: #ff4757;\n\tcolor: #fff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 24rpx;\n\tfont-weight: bold;\n\tborder: 2rpx solid #fff;\n\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\n\tz-index: 10;\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/petDetail/petDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onLoad","api","reactive","compressImage","uploadImage","computed"],"mappings":"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"}