{"version":3,"file":"createRecord.js","sources":["pages/createRecord/createRecord.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY3JlYXRlUmVjb3JkL2NyZWF0ZVJlY29yZC52dWU"],"sourcesContent":["<template>\n    <view class=\"page\">\n\n        <view class=\"card textarea-card\">\n            <textarea class=\"textarea\" v-model=\"content\" placeholder=\"请输入内容\" placeholder-class=\"ph\" :maxlength=\"200\" />\n        </view>\n\n        <picker :range=\"types\" :value=\"typeIndex\" @change=\"onTypeChange\">\n            <view class=\"card row\">\n                <text class=\"row-label\">类型</text>\n                <view class=\"row-right\">\n                    <text class=\"row-value\">{{ currentType }}</text>\n                    <text class=\"row-arrow\">›</text>\n                </view>\n            </view>\n        </picker>\n\n        <view class=\"card row\">\n            <text class=\"row-label\">日期</text>\n            <view class=\"row-right\">\n                <text class=\"row-value\">{{ dateDisplay }}</text>\n                <text class=\"row-arrow\">›</text>\n            </view>\n            <view class=\"tap-picker\" @tap=\"openCalendar\"></view>\n        </view>\n\n        <picker mode=\"time\" :value=\"time\" @change=\"onTimeChange\">\n            <view class=\"card row\">\n                <text class=\"row-label\">时间</text>\n                <view class=\"row-right\">\n                    <text class=\"row-value\">{{ timeDisplay }}</text>\n                    <text class=\"row-arrow\">›</text>\n                </view>\n            </view>\n        </picker>\n\n        <!-- 日历弹窗 -->\n        <view v-if=\"showCal\" class=\"modal-mask\" @tap=\"closeCalendar\">\n            <view class=\"modal-center\" @tap.stop>\n                <CalendarSelector v-model=\"tempDates\" :multiple=\"false\" />\n                <view class=\"modal-actions\">\n                    <button class=\"btn ghost\" @tap=\"closeCalendar\">取消</button>\n                    <button class=\"btn\" @tap=\"confirmCalendar\">保存</button>\n                </view>\n            </view>\n        </view>\n\n\n\n        <button class=\"save-btn\" @tap=\"submit\">保存</button>\n\n        <!-- no visible native pickers; rows use full-area transparent pickers above -->\n    </view>\n\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport CalendarSelector from '@/components/CalendarSelector.vue'\n\nconst now = new Date()\nconst yyyy = now.getFullYear()\nconst mm = String(now.getMonth() + 1).padStart(2, '0')\nconst dd = String(now.getDate()).padStart(2, '0')\nconst hh = String(now.getHours()).padStart(2, '0')\nconst mi = String(now.getMinutes()).padStart(2, '0')\n\nconst content = ref('')\nconst types = ref(['日常提醒', '洗护提醒', '清洁提醒', '用药提醒'])\nconst typeIndex = ref(0)\nconst time = ref(`${hh}:${mi}`)\nconst selectedDates = ref([`${yyyy}-${mm}-${dd}`])\nconst showCal = ref(false)\nconst tempDates = ref([])\n\nonLoad(() => {\n    uni.setNavigationBarTitle({ title: '添加提醒' })\n    uni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\n})\n\nconst currentType = computed(() => types.value[typeIndex.value])\nconst timeDisplay = computed(() => time.value)\nconst dateDisplay = computed(() => {\n    if (!selectedDates.value || selectedDates.value.length === 0) return '请选择日期'\n    if (selectedDates.value.length === 1) return selectedDates.value[0]\n    return `${selectedDates.value[0]} 等${selectedDates.value.length}天`\n})\n\nfunction onTypeChange(e) { typeIndex.value = Number(e.detail?.value || 0) }\nfunction onTimeChange(e) { time.value = e.detail.value }\nfunction openCalendar() { tempDates.value = [...selectedDates.value]; showCal.value = true }\nfunction closeCalendar() { showCal.value = false }\nfunction confirmCalendar() { selectedDates.value = [...tempDates.value]; showCal.value = false }\nfunction submit() {\n    try {\n        uni.setStorageSync('lastReminderDraft', {\n            content: content.value,\n            type: currentType.value,\n            time: time.value,\n            dates: selectedDates.value\n        })\n    } catch (e) { }\n    uni.showToast({ title: '已保存', icon: 'success' })\n    setTimeout(() => { uni.navigateBack() }, 300)\n}\n</script>\n\n<style scoped>\n.page {\n    min-height: 100vh;\n    padding: 24rpx;\n    background: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n}\n\n.card {\n    background: #fff;\n    border-radius: 24rpx;\n    border: 4rpx solid #2c2c2c;\n    margin-bottom: 20rpx;\n}\n\n.textarea-card {\n    padding: 28rpx 28rpx 28rpx 16rpx;\n    font-size: 32rpx;\n}\n\n.textarea {\n    width: 100%;\n    min-height: 420rpx;\n    font-size: 28rpx;\n    color: #1a1a1a;\n}\n\n.ph {\n    color: #bdbdbd;\n}\n\n.row {\n    height: 112rpx;\n    display: flex;\n    align-items: center;\n    padding: 0 24rpx;\n    position: relative;\n}\n\n.row-label {\n    font-size: 28rpx;\n    color: #1a1a1a;\n}\n\n.row-right {\n    margin-left: auto;\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n}\n\n.row-value {\n    color: #3b3b3b;\n    font-size: 28rpx;\n}\n\n.row-arrow {\n    font-weight: 700;\n    color: #2c2c2c;\n}\n\n.save-btn {\n    margin-top: 30rpx;\n    background: #ffe046;\n    color: #1a1a1a;\n    border: 4rpx solid #2c2c2c;\n    border-radius: 999rpx;\n    height: 100rpx;\n    line-height: 100rpx;\n    font-weight: 700;\n}\n\n/* full-row transparent pickers to capture taps */\n.tap-picker {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    opacity: 0;\n    z-index: 10;\n}\n\n.tap-picker.half.left {\n    right: 50%;\n}\n\n.tap-picker.half.right {\n    left: 50%;\n}\n\n/* modal */\n.modal-mask {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.35);\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n    z-index: 999;\n}\n\n.modal-sheet {\n    width: 92%;\n    margin-bottom: 32rpx;\n    background: transparent;\n}\n\n.modal-center {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 92%;\n}\n\n.modal-actions {\n    margin-top: 16rpx;\n    display: flex;\n    gap: 16rpx;\n    justify-content: flex-end;\n}\n\n.btn.ghost {\n    background: #fff;\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/createRecord/createRecord.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","computed"],"mappings":";;;;;AA2DA,MAAM,mBAAmB,MAAW;;;;AAEpC,UAAM,MAAM,oBAAI,KAAM;AACtB,UAAM,OAAO,IAAI,YAAa;AAC9B,UAAM,KAAK,OAAO,IAAI,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACrD,UAAM,KAAK,OAAO,IAAI,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAChD,UAAM,KAAK,OAAO,IAAI,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACjD,UAAM,KAAK,OAAO,IAAI,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AAEnD,UAAM,UAAUA,cAAG,IAAC,EAAE;AACtB,UAAM,QAAQA,cAAG,IAAC,CAAC,QAAQ,QAAQ,QAAQ,MAAM,CAAC;AAClD,UAAM,YAAYA,cAAG,IAAC,CAAC;AACvB,UAAM,OAAOA,cAAG,IAAC,GAAG,EAAE,IAAI,EAAE,EAAE;AAC9B,UAAM,gBAAgBA,cAAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC;AACjD,UAAM,UAAUA,cAAG,IAAC,KAAK;AACzB,UAAM,YAAYA,cAAG,IAAC,EAAE;AAExBC,kBAAAA,OAAO,MAAM;AACTC,oBAAAA,MAAI,sBAAsB,EAAE,OAAO,OAAM,CAAE;AAC3CA,oBAAG,MAAC,sBAAsB,EAAE,YAAY,WAAW,iBAAiB,WAAW;AAAA,IACnF,CAAC;AAED,UAAM,cAAcC,cAAQ,SAAC,MAAM,MAAM,MAAM,UAAU,KAAK,CAAC;AAC/D,UAAM,cAAcA,cAAQ,SAAC,MAAM,KAAK,KAAK;AAC7C,UAAM,cAAcA,cAAQ,SAAC,MAAM;AAC/B,UAAI,CAAC,cAAc,SAAS,cAAc,MAAM,WAAW;AAAG,eAAO;AACrE,UAAI,cAAc,MAAM,WAAW;AAAG,eAAO,cAAc,MAAM,CAAC;AAClE,aAAO,GAAG,cAAc,MAAM,CAAC,CAAC,KAAK,cAAc,MAAM,MAAM;AAAA,IACnE,CAAC;AAED,aAAS,aAAa,GAAG;;AAAE,gBAAU,QAAQ,SAAO,OAAE,WAAF,mBAAU,UAAS,CAAC;AAAA,IAAG;AAC3E,aAAS,aAAa,GAAG;AAAE,WAAK,QAAQ,EAAE,OAAO;AAAA,IAAO;AACxD,aAAS,eAAe;AAAE,gBAAU,QAAQ,CAAC,GAAG,cAAc,KAAK;AAAG,cAAQ,QAAQ;AAAA,IAAM;AAC5F,aAAS,gBAAgB;AAAE,cAAQ,QAAQ;AAAA,IAAO;AAClD,aAAS,kBAAkB;AAAE,oBAAc,QAAQ,CAAC,GAAG,UAAU,KAAK;AAAG,cAAQ,QAAQ;AAAA,IAAO;AAChG,aAAS,SAAS;AACd,UAAI;AACAD,sBAAG,MAAC,eAAe,qBAAqB;AAAA,UACpC,SAAS,QAAQ;AAAA,UACjB,MAAM,YAAY;AAAA,UAClB,MAAM,KAAK;AAAA,UACX,OAAO,cAAc;AAAA,QACjC,CAAS;AAAA,MACT,SAAa,GAAG;AAAA,MAAG;AACfA,oBAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAC/C,iBAAW,MAAM;AAAEA,sBAAAA,MAAI,aAAc;AAAA,MAAA,GAAI,GAAG;AAAA,IAChD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA,GAAG,WAAW,eAAe;"}