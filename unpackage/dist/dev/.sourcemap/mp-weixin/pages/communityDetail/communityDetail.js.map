{"version":3,"file":"communityDetail.js","sources":["pages/communityDetail/communityDetail.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tbXVuaXR5RGV0YWlsL2NvbW11bml0eURldGFpbC52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\" :style=\"dynamicTopPadding\">\n\t\t<view class=\"card\">\n\t\t\t<view class=\"card-hd\">\n\t\t\t\t<image class=\"avatar\" :src=\"getUserAvatarSrc(post.avatar)\" :key=\"`post-avatar-${avatarUpdateTrigger}`\" mode=\"aspectFill\" />\n\t\t\t\t<view class=\"title-meta\">\n\t\t\t\t\t<text class=\"nickname\">{{ post.user }}</text>\n\t\t\t\t\t<text class=\"sub\">{{ post.pet }}｜{{ post.breed }}</text>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"time\">{{ post.time }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"card-bd\">\n\t\t\t\t<text v-if=\"post.title\" class=\"post-title\">{{ post.title }}</text>\n\t\t\t\t<text class=\"content\">{{ post.text }}</text>\n\t\t\t\t<view class=\"pics\" v-if=\"post.images && post.images.length\">\n\t\t\t\t\t<image class=\"pic\" v-for=\"(img, i) in post.images\" :key=\"i\" :src=\"img\" mode=\"aspectFill\" @tap.stop=\"previewImages(post.images, i)\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"card-ft\">\n\t\t\t\t<view class=\"ft-item\">\n\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/community/share.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>{{ post.shares }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"ft-item\">\n\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/community/emoji.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>{{ comments.length }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"ft-item\" @tap.stop=\"likePost\">\n\t\t\t\t\t<image class=\"ft-icon\"\n\t\t\t\t\t\t:src=\"post.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\"\n\t\t\t\t\t\tmode=\"widthFix\" />\n\t\t\t\t\t<text>{{ post.likes }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view v-if=\"post.userId === currentUserId\" class=\"ft-delete-btn\" @tap.stop=\"confirmDeletePost\">\n\t\t\t\t\t<image class=\"ft-delete-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 评论区域 - 叠卡效果 -->\n\t\t<view class=\"comments-section\">\n\t\t\t<view class=\"comments-card\">\n\t\t\t\t<view class=\"comments-card-bg bg1\"></view>\n\t\t\t\t<view class=\"comments-card-body\">\n\t\t\t\t\t<!-- 评论标题 -->\n\t\t\t\t\t<view class=\"comment-header\">\n\t\t\t\t\t\t<view class=\"comment-tag\">\n\t\t\t\t\t\t\t<text class=\"comment-title\">全部评论</text>\n                            <text class=\"comment-count\">{{ totalComments }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 评论列表 -->\n\t\t\t\t\t<view class=\"comment-list\">\n\t\t\t\t\t\t<view class=\"comment-item\" v-for=\"comment in comments\" :key=\"comment.id\">\n\t\t\t\t\t\t\t<view class=\"comment-user\">\n\t\t\t\t\t\t\t\t<image class=\"c-avatar\" :src=\"getUserAvatarSrc(comment.avatar)\" :key=\"`comment-avatar-${comment.id}-${avatarUpdateTrigger}`\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t<view class=\"c-info\">\n\t\t\t\t\t\t\t\t\t<view class=\"c-row\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"c-column\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-name\">{{ comment.user }}</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-role\" v-if=\"comment.petName\">{{ comment.petName }}｜{{\n\t\t\t\t\t\t\t\t\t\t\t\tcomment.petBreed }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"c-text\">{{ comment.text }}</text>\n\t\t\t\t\t\t\t<view class=\"c-actions\">\n\t\t\t\t\t\t\t\t<view class=\"c-actions-left\">\n\t\t\t\t\t\t\t\t\t<text class=\"c-time\">{{ comment.time }}</text>\n\t\t\t\t\t\t\t\t\t<text class=\"c-reply\" @tap.stop=\"startReply(comment)\">回复</text>\n\t\t\t\t\t\t\t</view>\n                                <view class=\"c-actions-right\">\n                                    <view class=\"c-like-btn\" @tap.stop=\"likeComment(comment)\">\n\t\t\t\t\t\t\t\t\t\t<image class=\"c-like-icon\"\n\t\t\t\t\t\t\t\t\t\t\t:src=\"comment.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\"\n\t\t\t\t\t\t\t\t\t\t\tmode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t\t<text class=\"c-like-count\" v-if=\"comment.likes > 0\">{{ comment.likes }}</text>\n\t\t\t\t\t\t</view>\n                                    <view v-if=\"comment.isSelf\" class=\"c-delete-btn\" @tap.stop=\"confirmDeleteComment(comment)\">\n                                        <image class=\"c-delete-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n                                    </view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<!-- 回复列表（按评论单独展开/收起） -->\n\t\t\t\t\t\t\t<view class=\"reply-list\"\n\t\t\t\t\t\t\t\tv-if=\"comment.showReplies && comment.replies && comment.replies.length > 0\">\n\t\t\t\t\t\t\t\t<view class=\"reply-item\"\n\t\t\t\t\t\t\t\t\tv-for=\"reply in comment.replies.slice(0, comment.expandedReplies || 0)\"\n\t\t\t\t\t\t\t\t\t:key=\"reply.id\">\n\t\t\t\t\t\t\t\t\t<view class=\"reply-user\">\n\t\t\t\t\t\t\t\t<image class=\"r-avatar\" :src=\"getUserAvatarSrc(reply.avatar)\" :key=\"`reply-avatar-${reply.id}-${avatarUpdateTrigger}`\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t\t\t<view class=\"r-info\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"r-row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"r-column\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ reply.user }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"reply.replyToUser\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"color:#999; font-size:22rpx; margin-left:8rpx;\">▶ {{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treply.replyToUser }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-role\" v-if=\"reply.petName\">{{ reply.petName }}｜{{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treply.petBreed }}</text>\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<text class=\"r-text\">{{ reply.content }}</text>\n\t\t\t\t\t\t\t\t\t<view class=\"r-actions\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"r-actions-left\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-time\">{{ reply.time }}</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-reply\"\n\t\t\t\t\t\t\t\t\t\t\t\t@tap.stop=\"startReplyToReply(comment, reply)\">回复</text>\n                                        </view>\n\t\t\t\t\t\t\t\t\t\t<view class=\"r-actions-right\">\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"r-like-btn\" @tap.stop=\"likeCommentReply(reply)\">\n\t\t\t\t\t\t\t\t\t\t\t\t<image class=\"r-like-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:src=\"reply.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tmode=\"widthFix\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"r-like-count\" v-if=\"reply.likes > 0\">{{ reply.likes\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}</text>\n\t\t\t\t\t\t\t\t\t\t\t</view>\n                                            <view v-if=\"reply.userId === currentUserId\" class=\"c-delete-btn\" @tap.stop=\"confirmDeleteReply(comment, reply)\">\n                                                <image class=\"c-delete-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n                                            </view>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t</view>\n\n\t\t\t\t\t\t\t<!-- 回复展开/收起按钮（每条评论独立，放在回复列表外以便收起后仍可见） -->\n\t\t\t\t\t\t\t<view class=\"reply-expand\" v-if=\"comment.replies && comment.replies.length > 0\">\n\t\t\t\t\t\t\t\t<view v-if=\"!comment.showReplies\" class=\"expand-btn\" @tap=\"toggleReplies(comment)\">\n\t\t\t\t\t\t\t\t\t<text class=\"expand-text\">展开{{ comment.replies.length }}条回复</text>\n\t\t\t\t\t\t\t\t\t<text class=\"expand-arrow\">↓</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view v-else class=\"expand-buttons\">\n\t\t\t\t\t\t\t\t\t<view v-if=\"(comment.expandedReplies || 0) < comment.replies.length\"\n\t\t\t\t\t\t\t\t\t\tclass=\"expand-more-btn\" @tap=\"expandMoreReplies(comment)\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-text\">展开更多</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-arrow\">↓</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t<view class=\"collapse-btn\" @tap=\"collapseReplies(comment)\">\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-text\">收起</text>\n\t\t\t\t\t\t\t\t\t\t<text class=\"expand-arrow\">↑</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 占位高度，避免内容被底部栏遮挡（真机更可靠） -->\n\t\t<view class=\"bottom-safe-spacer\"></view>\n\n\t\t<!-- 底部操作栏 -->\n\t\t<view class=\"bottom-bar\"\n\t\t\tstyle=\"padding: 24rpx 24rpx !important; padding-bottom: calc(24rpx + env(safe-area-inset-bottom)) !important; padding-bottom: calc(24rpx + constant(safe-area-inset-bottom)) !important;\">\n\t\t\t<view class=\"action-buttons\">\n\t\t\t\t<view class=\"action-btn\" @tap=\"sharePost\">\n\t\t\t\t\t<image class=\"action-icon\" src=\"/static/community/share.png\" mode=\"widthFix\" />\n\t\t\t\t</view>\n\t\t\t<view class=\"action-btn\" @tap=\"likePost\">\n\t\t\t\t\t<image class=\"action-icon\"\n\t\t\t\t\t\t:src=\"post.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\"\n\t\t\t\t\t\tmode=\"widthFix\" />\n\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"comment-input\" @tap.stop>\n\t\t\t\t<input class=\"input-field\" type=\"text\" :placeholder=\"getInputPlaceholder()\"\n\t\t\t\t\tplaceholder-class=\"input-placeholder\" v-model=\"commentText\"\n\t\t\t\t\t:focus=\"replyingToComment !== null || replyingToReply !== null\" @confirm=\"submitComment\"\n\t\t\t\t\tref=\"inputRef\" />\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { reactive, ref, onMounted, nextTick, computed } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\n\n// 动态顶部内边距\nconst dynamicTopPadding = ref('')\nonMounted(async () => {\n\ttry {\n\t\tconst info = uni.getSystemInfoSync()\n\t\tconst statusBar = info.statusBarHeight || 0\n\t\tconst screenW = info.screenWidth || 375\n\t\tconst rpxToPx = (rpx) => (rpx * screenW) / 750\n\t\tconst topPx = 15\n\t\tdynamicTopPadding.value = `padding-top:${topPx}px;`\n\n\t\t// 加载当前用户信息与宠物信息\n\t\ttry {\n\t\t\tconst profile = await api.getProfile()\n\t\t\tif (profile && profile.id) currentUserId.value = profile.id\n\t\t} catch (e) { }\n\t\ttry {\n\t\t\tconst pets = await api.getPets()\n\t\t\tconst petsList = Array.isArray(pets) ? pets : (pets.data || [])\n\t\t\tif (petsList.length > 0) {\n\t\t\t\tcurrentUserPet.value = petsList[0] // 使用第一个宠物\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('获取宠物信息失败:', e)\n\t\t}\n\t} catch (e) {\n\t\tdynamicTopPadding.value = ''\n\t}\n})\n\nconst post = reactive({ id: '', user: '昵称', text: '这是一条圈子动态内容。', cover: '/static/logo.png', likes: 0, avatar: '/static/logo.png', pet: '', breed: '', images: [], shares: 0, isLiked: false, time: '' })\nconst commentText = ref('')\nconst comments = reactive([])\nconst currentUserId = ref('') // 当前登录用户ID\n// 顶层评论 + 各评论的回复总数\nconst totalComments = computed(() => {\n    try {\n        return comments.reduce((sum, c) => sum + 1 + ((c.replies && c.replies.length) || 0), 0)\n    } catch (_) {\n        return comments.length\n    }\n})\nconst currentUserPet = ref(null) // 当前用户的宠物信息\nconst replyingToComment = ref(null) // 正在回复的评论\nconst replyingToReply = ref(null) // 正在回复的回复\n// 取消全局评论展开/收起，按评论单独控制\nconst inputRef = ref(null) // 输入框引用\n\n// 用户头像缓存与下载（与社区页一致）\nconst avatarCache = new Map()\nconst avatarUpdateTrigger = ref(0) // 用于触发响应式更新\n\nfunction getUserAvatarSrc(url) {\n\tif (!url) return '/static/user/user.png'\n\tlet normalized = url\n\tif (normalized.startsWith('/uploads/')) {\n\t\tnormalized = `https://pet-api.zbinli.cn${normalized}`\n\t}\n\tif (normalized.startsWith('http://pet-api.zbinli.cn')) {\n\t\tnormalized = normalized.replace('http://pet-api.zbinli.cn', 'https://pet-api.zbinli.cn')\n\t}\n\tnormalized = normalized.replace('://pet-api.zbinli.cn:80', '://pet-api.zbinli.cn')\n\tif (normalized.startsWith('wxfile://') || normalized.startsWith('/static/')) return normalized\n\tif (avatarCache.has(normalized)) return avatarCache.get(normalized)\n\tuni.downloadFile({\n\t\turl: normalized,\n\t\tsuccess: (res) => {\n\t\t\tif (res.statusCode === 200 && res.tempFilePath) {\n\t\t\t\tavatarCache.set(normalized, res.tempFilePath)\n\t\t\t\t// 触发响应式更新\n\t\t\t\tavatarUpdateTrigger.value++\n\t\t\t} else {\n\t\t\t\tavatarCache.set(normalized, '/static/user/user.png')\n\t\t\t\tavatarUpdateTrigger.value++\n\t\t\t}\n\t\t},\n\t\tfail: () => {\n\t\t\tavatarCache.set(normalized, '/static/user/user.png')\n\t\t\tavatarUpdateTrigger.value++\n\t\t}\n\t})\n\treturn '/static/user/user.png'\n}\n\nasync function loadDetail(id) {\n\ttry {\n\t\tconst f = await api.getFeed(id)\n\t\tconst user = f.User || {}\n\t\tconst pet = f.Pet || {}\n\t\tpost.id = f.id\n\t\tpost.userId = f.userId || f.User?.id || ''\n\t\tpost.user = user.nickname || '昵称'\n\t\tpost.pet = pet.name || ''\n\t\tpost.breed = pet.breed || ''\n\t\tpost.text = f.text || ''\n\t\tpost.avatar = user.avatarUrl || '/static/logo.png'\n\t\tpost.images = Array.isArray(f.images) ? f.images : []\n\t\tpost.cover = post.images[0] ? post.images[0] : (f.cover || '/static/logo.png')\n\t\tpost.likes = f.likes || 0\n\t\tpost.shares = f.shares || 0\n\t\tpost.isLiked = f.isLiked || false // 添加点赞状态\n\t\t// 提取标题（从tags字段中获取第一个标签作为标题）\n\t\tlet title = ''\n\t\tif (f.tags && Array.isArray(f.tags) && f.tags.length > 0) {\n\t\t\ttitle = f.tags[0]\n\t\t} else if (f.tags && typeof f.tags === 'string') {\n\t\t\ttry {\n\t\t\t\tconst parsedTags = JSON.parse(f.tags)\n\t\t\t\tif (Array.isArray(parsedTags) && parsedTags.length > 0) {\n\t\t\t\t\ttitle = parsedTags[0]\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// 如果解析失败，忽略\n\t\t\t}\n\t\t}\n\t\tpost.title = title ? `#${title}` : ''\n\t\t// 处理时间显示\n\t\tif (f.createdAt) {\n\t\t\tconst created = new Date(f.createdAt)\n\t\t\tconst now = new Date()\n\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\tif (minutesDiff < 1) {\n\t\t\t\tpost.time = '刚刚'\n\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\tpost.time = `${minutesDiff}分钟前`\n\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\tpost.time = `${hoursDiff}小时前`\n\t\t\t} else {\n\t\t\t\t// 超过24小时显示具体时间\n\t\t\t\tpost.time = `${created.getHours().toString().padStart(2, '0')}:${created.getMinutes().toString().padStart(2, '0')}`\n\t\t\t}\n\t\t} else {\n\t\t\tpost.time = ''\n\t\t}\n\t\t// 加载评论数据\n\t\tawait loadComments(id)\n\t} catch (e) {\n\t\tuni.showToast({ title: '加载失败', icon: 'none' })\n\t}\n}\n\nonLoad((query) => {\n\tconst eventChannel = getCurrentPages().pop()?.getOpenerEventChannel?.()\n\tlet incoming = null\n\ttry {\n\t\teventChannel && eventChannel.on('post', (data) => { incoming = data })\n\t} catch (e) { }\n\t// 如果带有 id 则请求详情，否则用事件数据填充\n\tsetTimeout(() => {\n\t\tif ((query && query.id) || (incoming && incoming.id)) {\n\t\t\tloadDetail((query && query.id) || incoming.id)\n\t\t} else if (incoming) {\n\t\t\tpost.id = incoming.id || ''\n\t\t\tpost.user = incoming.user || '昵称'\n\t\t\tpost.pet = incoming.pet || ''\n\t\t\tpost.breed = incoming.breed || ''\n\t\t\tpost.text = incoming.text || ''\n\t\t\tpost.avatar = incoming.avatar || '/static/logo.png'\n\t\t\tpost.images = Array.isArray(incoming.images) ? incoming.images : []\n\t\t\tpost.cover = post.images[0] ? post.images[0] : (incoming.cover || '/static/logo.png')\n\t\t\tpost.likes = incoming.likes || 0\n\t\t\tpost.shares = incoming.shares || 0\n\t\t}\n\t}, 0)\n})\n\n// 分享动态\nfunction sharePost() {\n\tuni.showToast({\n\t\ttitle: '分享功能开发中',\n\t\ticon: 'none'\n\t})\n}\n// 删除动态\nasync function confirmDeletePost() {\n    try {\n        await new Promise((resolve, reject) => {\n            uni.showModal({\n                title: '删除确认',\n                content: '确定要删除这条动态吗？删除后将无法恢复。',\n                confirmText: '删除',\n                confirmColor: '#e64340',\n                success: async (res) => {\n                    if (res.confirm) {\n                        try {\n                            await api.deleteFeed(post.id)\n                            uni.showToast({ title: '已删除', icon: 'success' })\n                            // 返回上一页\n                            setTimeout(() => {\n                                uni.navigateBack()\n                            }, 1500)\n                            resolve(true)\n                        } catch (e) {\n                            uni.showToast({ title: '删除失败', icon: 'none' })\n                            reject(e)\n                        }\n                    } else {\n                        resolve(false)\n                    }\n                }\n            })\n        })\n    } catch (_) {}\n}\n\n// 删除评论\nasync function confirmDeleteComment(comment) {\n    try {\n        await new Promise((resolve, reject) => {\n            uni.showModal({\n                title: '删除确认',\n                content: '确定要删除这条评论及其回复吗？',\n                confirmText: '删除',\n                confirmColor: '#e64340',\n                success: async (res) => {\n                    if (res.confirm) {\n                        try {\n                            await api.deleteComment(comment.id)\n                            const idx = comments.findIndex(c => c.id === comment.id)\n                            if (idx !== -1) comments.splice(idx, 1)\n                            try { if (post && typeof post.shares !== 'undefined') {} } catch(_) {}\n                            uni.showToast({ title: '已删除', icon: 'success' })\n                            resolve(true)\n                        } catch (e) {\n                            uni.showToast({ title: '删除失败', icon: 'none' })\n                            reject(e)\n                        }\n                    } else {\n                        resolve(false)\n                    }\n                }\n            })\n        })\n    } catch (_) {}\n}\n\n// 点赞动态\nasync function likePost() {\n\ttry {\n\t\tconst result = await api.likeFeed(post.id)\n\t\tif (result) {\n\t\t\t// 更新点赞数量和状态\n\t\t\tpost.likes = result.likes\n\t\t\tpost.isLiked = result.isLiked\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: post.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('点赞操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 加载评论数据\nasync function loadComments(feedId) {\n\ttry {\n\t\tconst commentsData = await api.getComments(feedId)\n\t\tcomments.splice(0, comments.length, ...commentsData.map((c) => {\n\t\t\t// 处理评论时间显示\n\t\t\tlet commentTime = ''\n\t\t\tif (c.createdAt) {\n\t\t\t\tconst created = new Date(c.createdAt)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\t\tif (minutesDiff < 1) {\n\t\t\t\t\tcommentTime = '刚刚'\n\t\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\t\tcommentTime = `${minutesDiff}分钟前`\n\t\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\t\tcommentTime = `${hoursDiff}小时前`\n\t\t\t\t} else {\n\t\t\t\t\tcommentTime = `${created.getHours().toString().padStart(2, '0')}:${created.getMinutes().toString().padStart(2, '0')}`\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 处理回复数据\n\t\t\tconst replies = (c.replies || []).map((r) => {\n\t\t\t\tlet replyTime = ''\n\t\t\t\tif (r.createdAt) {\n\t\t\t\t\tconst created = new Date(r.createdAt)\n\t\t\t\t\tconst now = new Date()\n\t\t\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\t\t\tif (minutesDiff < 1) {\n\t\t\t\t\t\treplyTime = '刚刚'\n\t\t\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\t\t\treplyTime = `${minutesDiff}分钟前`\n\t\t\t\t\t} else if (minutesDiff < 1440) {\n\t\t\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\t\t\treplyTime = `${hoursDiff}小时前`\n\t\t\t\t\t} else {\n\t\t\t\t\t\treplyTime = `${created.getHours().toString().padStart(2, '0')}:${created.getMinutes().toString().padStart(2, '0')}`\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tid: r.id,\n\t\t\t\t\tuserId: r.userId,\n\t\t\t\t\tuser: r.User?.nickname || '用户',\n\t\t\t\t\tpetName: r.Pet?.name || '',\n\t\t\t\t\tpetBreed: r.Pet?.breed || '',\n\t\t\t\t\ttime: replyTime,\n\t\t\t\t\tavatar: r.User?.avatarUrl || '/static/logo.png',\n\t\t\t\t\tcontent: r.content,\n\t\t\t\t\tlikes: r.likes || 0,\n\t\t\t\t\tisLiked: r.isLiked || false,\n\t\t\t\t\treplyToUser: r.replyToUser || '',\n\t\t\t\t\tshowReplies: false,\n\t\t\t\t\texpandedReplies: 3\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn {\n\t\t\t\tid: c.id,\n\t\t\t\tuserId: c.userId,\n\t\t\t\tuser: c.User?.nickname || '用户',\n\t\t\t\tpetName: c.Pet?.name || '',\n\t\t\t\tpetBreed: c.Pet?.breed || '',\n\t\t\t\ttime: commentTime,\n\t\t\t\tavatar: c.User?.avatarUrl || '/static/logo.png',\n\t\t\t\ttext: c.text,\n\t\t\t\tlikes: c.likes || 0,\n\t\t\t\tisLiked: c.isLiked || false,\n\t\t\t\tisSelf: currentUserId.value ? (c.userId === currentUserId.value) : false,\n\t\t\t\treplies: replies,\n\t\t\t\tshowReplies: false,\n\t\t\t\texpandedReplies: 0\n\t\t\t}\n\t\t}))\n\t\t// 如果存在上次回复的评论ID，则自动展开该条评论的回复区\n\t\ttry {\n\t\t\tconst lastId = uni.getStorageSync('lastRepliedCommentId')\n\t\t\tif (lastId) {\n\t\t\t\tconst target = comments.find(c => c.id === lastId)\n\t\t\t\tif (target) {\n\t\t\t\t\ttarget.showReplies = true\n\t\t\t\t\ttarget.expandedReplies = Math.min(Math.max(target.expandedReplies || 0, 3), target.replies.length)\n\t\t\t\t}\n\t\t\t\tuni.removeStorageSync('lastRepliedCommentId')\n\t\t\t}\n\t\t} catch (_) { }\n\t} catch (e) {\n\t\tconsole.error('加载评论失败:', e)\n\t}\n}\n\n// 开始回复评论\nfunction startReply(comment) {\n\treplyingToComment.value = comment\n\treplyingToReply.value = null\n\tcommentText.value = ''\n\t// 聚焦输入框\n\tnextTick(() => {\n\t\tif (inputRef.value) {\n\t\t\tinputRef.value.focus()\n\t\t}\n\t})\n}\n\n// 开始回复回复\nfunction startReplyToReply(comment, reply) {\n\treplyingToComment.value = comment\n\treplyingToReply.value = reply\n\tcommentText.value = ''\n\t// 聚焦输入框\n\tnextTick(() => {\n\t\tif (inputRef.value) {\n\t\t\tinputRef.value.focus()\n\t\t}\n\t})\n}\n\n// 取消回复\nfunction cancelReply() {\n\treplyingToComment.value = null\n\treplyingToReply.value = null\n\tcommentText.value = ''\n\tif (inputRef.value) {\n\t\tinputRef.value.blur()\n\t}\n}\n\n// 获取输入框占位符\nfunction getInputPlaceholder() {\n\tif (replyingToReply.value) {\n\t\treturn `回复 ${replyingToReply.value.user}：`\n\t} else if (replyingToComment.value) {\n\t\treturn `回复 ${replyingToComment.value.user}：`\n\t} else {\n\t\treturn '输入你的评论'\n\t}\n}\n\n// 提交评论\nasync function submitComment() {\n\tif (!commentText.value.trim()) {\n\t\tuni.showToast({ title: '请输入评论内容', icon: 'none' })\n\t\treturn\n\t}\n\ttry {\n\t\t// 如果是回复评论或回复回复，创建回复\n\t\tif (replyingToComment.value) {\n\t\t\tconst replyData = {\n\t\t\t\ttext: commentText.value.trim(),\n\t\t\t\tpetId: currentUserPet.value?.id || null,\n\t\t\t\treplyToUserId: replyingToReply.value ? replyingToReply.value.userId : (replyingToComment.value ? replyingToComment.value.userId : null)\n\t\t\t}\n\n\t\t\tconst r = await api.createCommentReply(replyingToComment.value.id, replyData)\n\n\t\t\t// 处理新回复的时间格式\n\t\t\tlet replyTime = '刚刚'\n\t\t\tif (r.createdAt) {\n\t\t\t\tconst created = new Date(r.createdAt)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\n\t\t\t\tif (minutesDiff < 1) {\n\t\t\t\t\treplyTime = '刚刚'\n\t\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\t\treplyTime = `${minutesDiff}分钟前`\n\t\t\t\t} else if (minutesDiff < 1440) {\n\t\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\t\treplyTime = `${hoursDiff}小时前`\n\t\t\t\t} else {\n\t\t\t\t\treplyTime = `${created.getHours().toString().padStart(2, '0')}:${created.getMinutes().toString().padStart(2, '0')}`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst newReply = {\n\t\t\t\tid: r.id,\n\t\t\t\tuser: r.User?.nickname || '我',\n\t\t\t\tpetName: r.Pet?.name || '',\n\t\t\t\tpetBreed: r.Pet?.breed || '',\n\t\t\t\ttime: replyTime,\n\t\t\t\tavatar: r.User?.avatarUrl || '/static/logo.png',\n\t\t\t\tcontent: r.content,\n\t\t\t\tlikes: 0,\n\t\t\t\tisLiked: false,\n\t\t\t\treplyToUser: r.replyToUser || (replyingToReply.value ? replyingToReply.value.user : (replyingToComment.value ? replyingToComment.value.user : '')),\n\t\t\t\tshowReplies: false,\n\t\t\t\texpandedReplies: 3\n\t\t\t}\n\n\t\t\t// 将新回复添加到对应评论的回复列表中\n\t\t\tconst comment = comments.find(c => c.id === replyingToComment.value.id)\n\t\t\tif (comment) {\n\t\t\t\tcomment.replies.unshift(newReply)\n\t\t\t\t// 新回复后自动展开该评论的回复区域，并保证至少显示3条\n\t\t\t\tcomment.showReplies = true\n\t\t\t\tcomment.expandedReplies = Math.min(Math.max((comment.expandedReplies || 0), 3) + 1, comment.replies.length)\n\t\t\t\ttry { uni.setStorageSync('lastRepliedCommentId', comment.id) } catch (_) { }\n\t\t\t}\n\n\t\t\tcommentText.value = ''\n\t\t\treplyingToComment.value = null\n\t\t\treplyingToReply.value = null\n\t\t\tuni.showToast({ title: '回复提交成功', icon: 'success' })\n\t\t} else {\n\t\t\t// 创建主评论\n\t\t\tconst commentData = {\n\t\t\t\ttext: commentText.value.trim(),\n\t\t\t\tpetId: currentUserPet.value?.id || null\n\t\t\t}\n\n\t\t\tconst c = await api.createComment(post.id, commentData)\n\n\t\t\t// 处理新评论的时间格式\n\t\t\tlet commentTime = '刚刚'\n\t\t\tif (c.createdAt) {\n\t\t\t\tconst created = new Date(c.createdAt)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\n\t\t\t\tif (minutesDiff < 1) {\n\t\t\t\t\tcommentTime = '刚刚'\n\t\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\t\tcommentTime = `${minutesDiff}分钟前`\n\t\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\t\tcommentTime = `${hoursDiff}小时前`\n\t\t\t\t} else {\n\t\t\t\t\tcommentTime = `${created.getHours().toString().padStart(2, '0')}:${created.getMinutes().toString().padStart(2, '0')}`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst newComment = {\n\t\t\tid: c.id,\n\t\t\tuser: c.User?.nickname || '我',\n\t\t\t\tpetName: c.Pet?.name || '',\n\t\t\t\tpetBreed: c.Pet?.breed || '',\n\t\t\t\ttime: commentTime,\n\t\t\tavatar: c.User?.avatarUrl || '/static/logo.png',\n\t\t\ttext: c.text,\n\t\t\t\tlikes: 0,\n\t\t\t\tisLiked: false,\n\t\t\t\treplies: [],\n\t\t\t\tshowReplies: false,\n\t\t\t\texpandedReplies: 3\n\t\t\t}\n\n\t\t\tcomments.push(newComment)\n\t\tcommentText.value = ''\n\t\tuni.showToast({ title: '评论提交成功', icon: 'success' })\n\t\t}\n\t} catch (e) {\n\t\tuni.showToast({ title: '提交失败', icon: 'none' })\n\t}\n}\n\n// 点赞评论\nasync function likeComment(comment) {\n\ttry {\n\t\tconst result = await api.likeComment(comment.id)\n\t\tif (result) {\n\t\t\t// 更新评论的点赞数量和状态\n\t\t\tcomment.likes = result.likes\n\t\t\tcomment.isLiked = result.isLiked\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: comment.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('点赞评论失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 展开评论\nfunction toggleComments() {\n\tshowComments.value = true\n\texpandedComments.value = Math.min(3, comments.length)\n}\n\n// 展开更多评论\nfunction expandMoreComments() {\n\texpandedComments.value = Math.min(expandedComments.value + 10, comments.length)\n}\n\n// 收起评论\nfunction collapseComments() {\n\tshowComments.value = false\n\texpandedComments.value = 0\n}\n\n// 点赞评论回复\nasync function likeCommentReply(reply) {\n\ttry {\n\t\tconst result = await api.likeCommentReply(reply.id)\n\t\tif (result) {\n\t\t\t// 更新回复的点赞数量和状态\n\t\t\treply.likes = result.likes\n\t\t\treply.isLiked = result.isLiked\n\n\t\t\tuni.showToast({\n\t\t\t\ttitle: reply.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('点赞回复失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 删除回复\nasync function confirmDeleteReply(comment, reply) {\n    try {\n        await new Promise((resolve, reject) => {\n            uni.showModal({\n                title: '删除确认',\n                content: '确定要删除这条回复吗？',\n                confirmText: '删除',\n                confirmColor: '#e64340',\n                success: async (res) => {\n                    if (res.confirm) {\n                        try {\n                            await api.deleteCommentReply(reply.id)\n                            const idx = comment.replies.findIndex(r => r.id === reply.id)\n                            if (idx !== -1) comment.replies.splice(idx, 1)\n                            uni.showToast({ title: '已删除', icon: 'success' })\n                            resolve(true)\n                        } catch (e) {\n                            uni.showToast({ title: '删除失败', icon: 'none' })\n                            reject(e)\n                        }\n                    } else {\n                        resolve(false)\n                    }\n                }\n            })\n        })\n    } catch (_) {}\n}\n// 展开回复\nfunction toggleReplies(comment) {\n\tcomment.showReplies = true\n\tcomment.expandedReplies = Math.min(3, comment.replies.length)\n}\n\n// 展开更多回复\nfunction expandMoreReplies(comment) {\n\tcomment.expandedReplies = Math.min((comment.expandedReplies || 0) + 10, comment.replies.length)\n}\n\n// 收起回复\nfunction collapseReplies(comment) {\n\tcomment.showReplies = false\n\tcomment.expandedReplies = 0\n}\n\n// 预览图片\nfunction previewImages(images, current) {\n\tif (!images || images.length === 0) return\n\t\n\tuni.previewImage({\n\t\tcurrent: current,\n\t\turls: images,\n\t\tsuccess: () => {\n\t\t\tconsole.log('图片预览成功')\n\t\t},\n\t\tfail: (err) => {\n\t\t\tconsole.error('图片预览失败:', err)\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '图片预览失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t})\n}\n</script>\n\n<style scoped>\n.page {\n\tpadding: 24rpx;\n\t/* 动态计算顶部间距，避免真机调试时env不生效 */\n\tpadding-bottom: 36rpx;\n\t/* 改为基础内边距，具体高度由占位视图控制 */\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n}\n\n.card {\n\twidth: 600rpx;\n\tbackground: #fff;\n\tborder-radius: 24rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tpadding: 25rpx 35rpx;\n\tbox-shadow: 0 8rpx 0 #2c2c2c;\n\tmargin: 0 auto;\n}\n\n.card-hd {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.title-meta {\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.nickname {\n\tfont-size: 30rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.sub {\n\tdisplay: block;\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n\tmargin-top: 4rpx;\n}\n\n.time {\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n}\n\n.card-bd {\n\tmargin-top: 10rpx;\n}\n\n.post-title {\n\tdisplay: block;\n\tcolor: #82919c;\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tmargin: 16rpx 0 8rpx 0;\n\tline-height: 1.4;\n}\n\n.content {\n\tdisplay: block;\n\tcolor: #333;\n\tline-height: 1.6;\n\tmargin: 24rpx 0;\n\tfont-size: 26rpx;\n}\n\n.pics {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgap: 12rpx;\n}\n\n.pic {\n\twidth: 100%;\n\theight: 200rpx;\n\tbackground: #f3f3f3;\n\tborder-radius: 12rpx;\n\tcursor: pointer;\n\ttransition: transform 0.2s ease;\n}\n\n.pic:active {\n\ttransform: scale(0.98);\n}\n\n.card-ft {\n\tmargin-top: 18rpx;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 8rpx;\n\tcolor: #555;\n\tfont-size: 28rpx;\n}\n\n.ft-item {\n\tbackground: #fff;\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 999rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.ft-icon {\n\twidth: 24rpx;\n\theight: 24rpx;\n}\n\n.ft-delete-btn {\n\tbackground: #fff;\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 999rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-left: 8rpx;\n}\n\n.ft-delete-icon {\n\twidth: 24rpx;\n\theight: 24rpx;\n}\n\n/* 评论区域 - 叠卡效果 */\n.comments-section {\n\tmargin-top: 50rpx;\n\tposition: relative;\n}\n\n.comments-card {\n\tposition: relative;\n}\n\n.comments-card-bg {\n\tposition: absolute;\n\tleft: 8rpx;\n\tright: 8rpx;\n\theight: 100%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.comments-card-bg.bg1 {\n\ttop: -2rpx;\n\twidth: 625rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%) rotate(-2deg);\n\tz-index: 0;\n}\n\n.comments-card-body {\n\twidth: 625rpx;\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tz-index: 1;\n\tmargin: 0 auto;\n}\n\n.comment-header {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tmargin-bottom: 20rpx;\n\tpadding-bottom: 0;\n\tborder-bottom: none;\n\t/* top: -20rpx; */\n}\n\n.comment-tag {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tbackground: #333333;\n\tcolor: #fff;\n\tpadding: 16rpx 24rpx;\n\ttransform: rotate(-3deg);\n\tborder-radius: 0;\n\tbox-shadow: 0 6rpx 12rpx rgba(0, 0, 0, 0.3);\n\tmargin-left: 8rpx;\n}\n\n.comment-tag::before {\n\tcontent: '';\n\tposition: absolute;\n\tleft: -10rpx;\n\ttop: 0;\n\twidth: 0;\n\theight: 0;\n\tborder-top: 0 solid transparent;\n\tborder-bottom: 100% solid transparent;\n\tborder-right: 10rpx solid #333333;\n}\n\n.comment-tag::after {\n\tcontent: '';\n\tposition: absolute;\n\tright: -10rpx;\n\ttop: 0;\n\twidth: 0;\n\theight: 0;\n\tborder-top: 100% solid transparent;\n\tborder-bottom: 0 solid transparent;\n\tborder-left: 10rpx solid #333333;\n}\n\n.comment-title {\n\tfont-weight: 600;\n\tfont-size: 30rpx;\n\tcolor: #fff;\n\tmargin-right: 12rpx;\n\tletter-spacing: 1rpx;\n}\n\n.comment-count {\n\tfont-weight: 500;\n\tfont-size: 26rpx;\n\tcolor: #fff;\n\tletter-spacing: 0.5rpx;\n}\n\n.comment-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.comment-item {\n\twidth: 590rpx;\n\tborder: 1rpx solid #e9e9e9;\n\tborder-radius: 12rpx;\n\tpadding: 16rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.comment-item:last-child {\n\tmargin-bottom: 0;\n}\n\n.comment-user {\n\tdisplay: flex;\n\tgap: 14rpx;\n\tmargin-bottom: 18rpx;\n}\n\n.c-avatar {\n\twidth: 70rpx;\n\theight: 70rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.c-info {\n\tflex: 1;\n}\n\n.c-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.c-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.c-name {\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tfont-size: 28rpx;\n}\n\n.c-role {\n\tdisplay: block;\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n\tmargin-top: 4rpx;\n}\n\n.c-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-top: 6rpx;\n}\n\n.c-actions-left {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 16rpx;\n}\n\n.c-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 16rpx;\n}\n\n.c-reply {\n\tfont-size: 22rpx;\n\tcolor: #999;\n\tflex-shrink: 0;\n}\n\n.c-like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 6rpx;\n\tpadding: 8rpx 12rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 20rpx;\n}\n\n.c-delete-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 48rpx;\n    height: 48rpx;\n    margin-left: 8rpx;\n}\n\n.c-delete-icon {\n    width: 28rpx;\n    height: 28rpx;\n}\n\n.c-like-icon {\n\twidth: 20rpx;\n\theight: 20rpx;\n}\n\n.c-like-count {\n\tfont-size: 22rpx;\n\tcolor: #666;\n}\n\n.c-time {\n\tcolor: #777;\n\tfont-size: 24rpx;\n}\n\n.c-text {\n\tdisplay: block;\n\tmargin-bottom: 10rpx;\n\tcolor: #1a1a1a;\n\tline-height: 1.7;\n\tfont-size: 26rpx;\n}\n\n.reply-box {\n\tbackground: #f8f8f8;\n\tborder: 2rpx solid #e0e0e0;\n\tborder-radius: 12rpx;\n\tpadding: 28rpx 18rpx;\n\tmargin-top: 12rpx;\n}\n\n.reply-row {\n\tmargin-bottom: 16rpx;\n\tfont-size: 24rpx;\n}\n\n.reply-row:last-child {\n\tmargin-bottom: 0;\n}\n\n.r-name {\n\tcolor: #1a1a1a;\n\tfont-weight: 600;\n}\n\n.r-text {\n\tcolor: #333;\n}\n\n.view-all {\n\tdisplay: block;\n\tcolor: #6b6b6b;\n\tmargin-top: 6rpx;\n\tfont-size: 24rpx;\n\ttext-align: center;\n}\n\n/* 评论展开/收起按钮 */\n.comment-expand {\n\tmargin-top: 20rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.expand-btn,\n.expand-more-btn,\n.collapse-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n\tpadding: 0;\n\tbackground: transparent;\n\tborder: none;\n\tborder-radius: 0;\n\tmargin: 0 8rpx;\n}\n\n.expand-buttons {\n\tdisplay: flex;\n\tgap: 16rpx;\n}\n\n.expand-text {\n\tfont-size: 24rpx;\n\tcolor: #666;\n}\n\n.expand-arrow {\n\tfont-size: 20rpx;\n\tcolor: #999;\n}\n\n/* 回复列表样式 */\n.reply-list {\n\tmargin-top: 18rpx;\n\tpadding-left: 32rpx;\n\tborder-left: none;\n\tgap: 16rpx;\n}\n\n.reply-item {\n\tmargin-top: 12rpx;\n\tpadding-top: 12rpx;\n\tpadding-bottom: 0;\n\tborder-bottom: none;\n}\n\n.reply-item:last-child {\n\tborder-bottom: none;\n\tmargin-bottom: 0;\n\tpadding-bottom: 0;\n}\n\n.reply-user {\n\tdisplay: flex;\n\tgap: 10rpx;\n\tmargin-bottom: 8rpx;\n}\n\n.r-avatar {\n\twidth: 48rpx;\n\theight: 48rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.r-info {\n\tflex: 1;\n}\n\n.r-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 6rpx;\n}\n\n.r-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 8rpx;\n}\n\n.r-name {\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tfont-size: 24rpx;\n}\n\n.r-role {\n\tdisplay: block;\n\tcolor: #7a7a7a;\n\tfont-size: 20rpx;\n\tmargin-top: 2rpx;\n}\n\n.r-text {\n\tdisplay: block;\n\tmargin-bottom: 8rpx;\n\tcolor: #1a1a1a;\n\tline-height: 1.6;\n\tfont-size: 24rpx;\n}\n\n.r-actions {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-top: 4rpx;\n}\n\n.r-actions-left {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.r-actions-right {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n}\n\n.r-reply {\n\tfont-size: 20rpx;\n\tcolor: #999;\n\tflex-shrink: 0;\n}\n\n.r-like-btn {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 4rpx;\n\tpadding: 6rpx 10rpx;\n\tbackground: #f5f5f5;\n\tborder-radius: 16rpx;\n}\n\n.r-like-icon {\n\twidth: 18rpx;\n\theight: 18rpx;\n}\n\n.r-like-count {\n\tfont-size: 20rpx;\n\tcolor: #666;\n}\n\n.r-time {\n\tcolor: #777;\n\tfont-size: 20rpx;\n}\n\n/* 回复展开/收起按钮 */\n.reply-expand {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-top: 12rpx;\n    padding: 8rpx 0;\n    cursor: pointer;\n}\n\n/* 底部操作栏 */\n.bottom-bar {\n\tposition: fixed !important;\n\tbottom: 0 !important;\n\tleft: 0 !important;\n\tright: 0 !important;\n\tbackground: #fff !important;\n\tborder-top: 4rpx solid #2c2c2c !important;\n\tpadding: 20rpx 24rpx !important;\n\tpadding-bottom: calc(40rpx + env(safe-area-inset-bottom)) !important;\n\tpadding-bottom: calc(40rpx + constant(safe-area-inset-bottom)) !important;\n\tdisplay: flex !important;\n\talign-items: center !important;\n\tgap: 16rpx !important;\n\tz-index: 100 !important;\n}\n\n.action-buttons {\n\tdisplay: flex;\n\tgap: 12rpx;\n}\n\n.action-btn {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: #f5f5f5;\n\tborder: 2rpx solid #2c2c2c;\n\tborder-radius: 50%;\n}\n\n.action-icon {\n\twidth: 32rpx;\n\theight: 32rpx;\n\ttransition: all 0.3s ease;\n}\n\n\n.comment-input {\n\tflex: 1;\n\tmax-width: 500rpx;\n}\n\n.input-field {\n\twidth: 100%;\n\theight: 60rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 30rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tcolor: #333;\n}\n\n.input-placeholder {\n\tcolor: #bbb;\n\tfont-size: 28rpx;\n}\n\n/* 底部占位高度，匹配底部栏实际高度（含安全区） */\n.bottom-safe-spacer {\n\theight: calc(88rpx + env(safe-area-inset-bottom));\n\theight: calc(88rpx + constant(safe-area-inset-bottom));\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/communityDetail/communityDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","api","reactive","computed","onLoad","_a","_b","_c","_d","nextTick"],"mappings":";;;;;;;AA8LA,UAAM,oBAAoBA,cAAG,IAAC,EAAE;AAChCC,kBAAAA,UAAU,YAAY;AACrB,UAAI;AACH,cAAM,OAAOC,cAAG,MAAC,kBAAmB;AACpC,cAAM,YAAY,KAAK,mBAAmB;AAC1C,cAAM,UAAU,KAAK,eAAe;AACpC,cAAM,UAAU,CAAC,QAAS,MAAM,UAAW;AAC3C,cAAM,QAAQ;AACd,0BAAkB,QAAQ,eAAe,KAAK;AAG9C,YAAI;AACH,gBAAM,UAAU,MAAMC,UAAG,IAAC,WAAY;AACtC,cAAI,WAAW,QAAQ;AAAI,0BAAc,QAAQ,QAAQ;AAAA,QAC5D,SAAW,GAAG;AAAA,QAAG;AACf,YAAI;AACH,gBAAM,OAAO,MAAMA,UAAG,IAAC,QAAS;AAChC,gBAAM,WAAW,MAAM,QAAQ,IAAI,IAAI,OAAQ,KAAK,QAAQ;AAC5D,cAAI,SAAS,SAAS,GAAG;AACxB,2BAAe,QAAQ,SAAS,CAAC;AAAA,UACjC;AAAA,QACD,SAAQ,GAAG;AACXD,wBAAAA,MAAA,MAAA,SAAA,oDAAc,aAAa,CAAC;AAAA,QAC5B;AAAA,MACD,SAAQ,GAAG;AACX,0BAAkB,QAAQ;AAAA,MAC1B;AAAA,IACF,CAAC;AAED,UAAM,OAAOE,cAAAA,SAAS,EAAE,IAAI,IAAI,MAAM,MAAM,MAAM,eAAe,OAAO,oBAAoB,OAAO,GAAG,QAAQ,oBAAoB,KAAK,IAAI,OAAO,IAAI,QAAQ,CAAA,GAAI,QAAQ,GAAG,SAAS,OAAO,MAAM,GAAE,CAAE;AACvM,UAAM,cAAcJ,cAAG,IAAC,EAAE;AAC1B,UAAM,WAAWI,cAAQ,SAAC,EAAE;AAC5B,UAAM,gBAAgBJ,cAAG,IAAC,EAAE;AAE5B,UAAM,gBAAgBK,cAAQ,SAAC,MAAM;AACjC,UAAI;AACA,eAAO,SAAS,OAAO,CAAC,KAAK,MAAM,MAAM,KAAM,EAAE,WAAW,EAAE,QAAQ,UAAW,IAAI,CAAC;AAAA,MACzF,SAAQ,GAAG;AACR,eAAO,SAAS;AAAA,MACnB;AAAA,IACL,CAAC;AACD,UAAM,iBAAiBL,cAAG,IAAC,IAAI;AAC/B,UAAM,oBAAoBA,cAAG,IAAC,IAAI;AAClC,UAAM,kBAAkBA,cAAG,IAAC,IAAI;AAEhC,UAAM,WAAWA,cAAG,IAAC,IAAI;AAGzB,UAAM,cAAc,oBAAI,IAAK;AAC7B,UAAM,sBAAsBA,cAAG,IAAC,CAAC;AAEjC,aAAS,iBAAiB,KAAK;AAC9B,UAAI,CAAC;AAAK,eAAO;AACjB,UAAI,aAAa;AACjB,UAAI,WAAW,WAAW,WAAW,GAAG;AACvC,qBAAa,4BAA4B,UAAU;AAAA,MACnD;AACD,UAAI,WAAW,WAAW,0BAA0B,GAAG;AACtD,qBAAa,WAAW,QAAQ,4BAA4B,2BAA2B;AAAA,MACvF;AACD,mBAAa,WAAW,QAAQ,2BAA2B,sBAAsB;AACjF,UAAI,WAAW,WAAW,WAAW,KAAK,WAAW,WAAW,UAAU;AAAG,eAAO;AACpF,UAAI,YAAY,IAAI,UAAU;AAAG,eAAO,YAAY,IAAI,UAAU;AAClEE,oBAAAA,MAAI,aAAa;AAAA,QAChB,KAAK;AAAA,QACL,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,eAAe,OAAO,IAAI,cAAc;AAC/C,wBAAY,IAAI,YAAY,IAAI,YAAY;AAE5C,gCAAoB;AAAA,UACxB,OAAU;AACN,wBAAY,IAAI,YAAY,uBAAuB;AACnD,gCAAoB;AAAA,UACpB;AAAA,QACD;AAAA,QACD,MAAM,MAAM;AACX,sBAAY,IAAI,YAAY,uBAAuB;AACnD,8BAAoB;AAAA,QACpB;AAAA,MACH,CAAE;AACD,aAAO;AAAA,IACR;AAEA,mBAAe,WAAW,IAAI;;AAC7B,UAAI;AACH,cAAM,IAAI,MAAMC,cAAI,QAAQ,EAAE;AAC9B,cAAM,OAAO,EAAE,QAAQ,CAAE;AACzB,cAAM,MAAM,EAAE,OAAO,CAAE;AACvB,aAAK,KAAK,EAAE;AACZ,aAAK,SAAS,EAAE,YAAU,OAAE,SAAF,mBAAQ,OAAM;AACxC,aAAK,OAAO,KAAK,YAAY;AAC7B,aAAK,MAAM,IAAI,QAAQ;AACvB,aAAK,QAAQ,IAAI,SAAS;AAC1B,aAAK,OAAO,EAAE,QAAQ;AACtB,aAAK,SAAS,KAAK,aAAa;AAChC,aAAK,SAAS,MAAM,QAAQ,EAAE,MAAM,IAAI,EAAE,SAAS,CAAE;AACrD,aAAK,QAAQ,KAAK,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC,IAAK,EAAE,SAAS;AAC3D,aAAK,QAAQ,EAAE,SAAS;AACxB,aAAK,SAAS,EAAE,UAAU;AAC1B,aAAK,UAAU,EAAE,WAAW;AAE5B,YAAI,QAAQ;AACZ,YAAI,EAAE,QAAQ,MAAM,QAAQ,EAAE,IAAI,KAAK,EAAE,KAAK,SAAS,GAAG;AACzD,kBAAQ,EAAE,KAAK,CAAC;AAAA,QACnB,WAAa,EAAE,QAAQ,OAAO,EAAE,SAAS,UAAU;AAChD,cAAI;AACH,kBAAM,aAAa,KAAK,MAAM,EAAE,IAAI;AACpC,gBAAI,MAAM,QAAQ,UAAU,KAAK,WAAW,SAAS,GAAG;AACvD,sBAAQ,WAAW,CAAC;AAAA,YACpB;AAAA,UACD,SAAQ,GAAG;AAAA,UAEX;AAAA,QACD;AACD,aAAK,QAAQ,QAAQ,IAAI,KAAK,KAAK;AAEnC,YAAI,EAAE,WAAW;AAChB,gBAAM,UAAU,IAAI,KAAK,EAAE,SAAS;AACpC,gBAAM,MAAM,oBAAI,KAAM;AACtB,gBAAM,WAAW,IAAI,QAAO,IAAK,QAAQ,QAAS;AAClD,gBAAM,cAAc,KAAK,MAAM,YAAY,MAAO,GAAG;AACrD,cAAI,cAAc,GAAG;AACpB,iBAAK,OAAO;AAAA,UAChB,WAAc,cAAc,IAAI;AAC5B,iBAAK,OAAO,GAAG,WAAW;AAAA,UAC9B,WAAc,cAAc,MAAM;AAC9B,kBAAM,YAAY,KAAK,MAAM,cAAc,EAAE;AAC7C,iBAAK,OAAO,GAAG,SAAS;AAAA,UAC5B,OAAU;AAEN,iBAAK,OAAO,GAAG,QAAQ,SAAQ,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,aAAa,SAAU,EAAC,SAAS,GAAG,GAAG,CAAC;AAAA,UACjH;AAAA,QACJ,OAAS;AACN,eAAK,OAAO;AAAA,QACZ;AAED,cAAM,aAAa,EAAE;AAAA,MACrB,SAAQ,GAAG;AACXD,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAA,MAC7C;AAAA,IACF;AAEAI,kBAAM,OAAC,CAAC,UAAU;;AACjB,YAAM,gBAAe,2BAAe,EAAG,IAAG,MAArB,mBAAyB,0BAAzB;AACrB,UAAI,WAAW;AACf,UAAI;AACH,wBAAgB,aAAa,GAAG,QAAQ,CAAC,SAAS;AAAE,qBAAW;AAAA,SAAM;AAAA,MACvE,SAAU,GAAG;AAAA,MAAG;AAEf,iBAAW,MAAM;AAChB,YAAK,SAAS,MAAM,MAAQ,YAAY,SAAS,IAAK;AACrD,qBAAY,SAAS,MAAM,MAAO,SAAS,EAAE;AAAA,QAC7C,WAAU,UAAU;AACpB,eAAK,KAAK,SAAS,MAAM;AACzB,eAAK,OAAO,SAAS,QAAQ;AAC7B,eAAK,MAAM,SAAS,OAAO;AAC3B,eAAK,QAAQ,SAAS,SAAS;AAC/B,eAAK,OAAO,SAAS,QAAQ;AAC7B,eAAK,SAAS,SAAS,UAAU;AACjC,eAAK,SAAS,MAAM,QAAQ,SAAS,MAAM,IAAI,SAAS,SAAS,CAAE;AACnE,eAAK,QAAQ,KAAK,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC,IAAK,SAAS,SAAS;AAClE,eAAK,QAAQ,SAAS,SAAS;AAC/B,eAAK,SAAS,SAAS,UAAU;AAAA,QACjC;AAAA,MACD,GAAE,CAAC;AAAA,IACL,CAAC;AAGD,aAAS,YAAY;AACpBJ,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAE;AAAA,IACF;AAEA,mBAAe,oBAAoB;AAC/B,UAAI;AACA,cAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACnCA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,cAAc;AAAA,YACd,SAAS,OAAO,QAAQ;AACpB,kBAAI,IAAI,SAAS;AACb,oBAAI;AACA,wBAAMC,cAAI,WAAW,KAAK,EAAE;AAC5BD,gCAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAE/C,6BAAW,MAAM;AACbA,kCAAAA,MAAI,aAAc;AAAA,kBACrB,GAAE,IAAI;AACP,0BAAQ,IAAI;AAAA,gBACf,SAAQ,GAAG;AACRA,gCAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC7C,yBAAO,CAAC;AAAA,gBACX;AAAA,cACzB,OAA2B;AACH,wBAAQ,KAAK;AAAA,cAChB;AAAA,YACJ;AAAA,UACjB,CAAa;AAAA,QACb,CAAS;AAAA,MACT,SAAa,GAAG;AAAA,MAAE;AAAA,IAClB;AAGA,mBAAe,qBAAqB,SAAS;AACzC,UAAI;AACA,cAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACnCA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,cAAc;AAAA,YACd,SAAS,OAAO,QAAQ;AACpB,kBAAI,IAAI,SAAS;AACb,oBAAI;AACA,wBAAMC,cAAI,cAAc,QAAQ,EAAE;AAClC,wBAAM,MAAM,SAAS,UAAU,OAAK,EAAE,OAAO,QAAQ,EAAE;AACvD,sBAAI,QAAQ;AAAI,6BAAS,OAAO,KAAK,CAAC;AACtC,sBAAI;AAAE,wBAAI,QAAQ,OAAO,KAAK,WAAW,aAAa;AAAA,oBAAE;AAAA,kBAAA,SAAS,GAAG;AAAA,kBAAE;AACtED,gCAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAC/C,0BAAQ,IAAI;AAAA,gBACf,SAAQ,GAAG;AACRA,gCAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC7C,yBAAO,CAAC;AAAA,gBACX;AAAA,cACzB,OAA2B;AACH,wBAAQ,KAAK;AAAA,cAChB;AAAA,YACJ;AAAA,UACjB,CAAa;AAAA,QACb,CAAS;AAAA,MACT,SAAa,GAAG;AAAA,MAAE;AAAA,IAClB;AAGA,mBAAe,WAAW;AACzB,UAAI;AACH,cAAM,SAAS,MAAMC,UAAAA,IAAI,SAAS,KAAK,EAAE;AACzC,YAAI,QAAQ;AAEX,eAAK,QAAQ,OAAO;AACpB,eAAK,UAAU,OAAO;AAEtBD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,KAAK,UAAU,QAAQ;AAAA,YAC9B,MAAM;AAAA,YACN,UAAU;AAAA,UACd,CAAI;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,oDAAA,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AAAA,IACF;AAGA,mBAAe,aAAa,QAAQ;AACnC,UAAI;AACH,cAAM,eAAe,MAAMC,cAAI,YAAY,MAAM;AACjD,iBAAS,OAAO,GAAG,SAAS,QAAQ,GAAG,aAAa,IAAI,CAAC,MAAM;;AAE9D,cAAI,cAAc;AAClB,cAAI,EAAE,WAAW;AAChB,kBAAM,UAAU,IAAI,KAAK,EAAE,SAAS;AACpC,kBAAM,MAAM,oBAAI,KAAM;AACtB,kBAAM,WAAW,IAAI,QAAO,IAAK,QAAQ,QAAS;AAClD,kBAAM,cAAc,KAAK,MAAM,YAAY,MAAO,GAAG;AACrD,gBAAI,cAAc,GAAG;AACpB,4BAAc;AAAA,YACnB,WAAe,cAAc,IAAI;AAC5B,4BAAc,GAAG,WAAW;AAAA,YACjC,WAAe,cAAc,MAAM;AAC9B,oBAAM,YAAY,KAAK,MAAM,cAAc,EAAE;AAC7C,4BAAc,GAAG,SAAS;AAAA,YAC/B,OAAW;AACN,4BAAc,GAAG,QAAQ,SAAQ,EAAG,WAAW,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,YACnH;AAAA,UACD;AAED,gBAAM,WAAW,EAAE,WAAW,CAAA,GAAI,IAAI,CAAC,MAAM;;AAC5C,gBAAI,YAAY;AAChB,gBAAI,EAAE,WAAW;AAChB,oBAAM,UAAU,IAAI,KAAK,EAAE,SAAS;AACpC,oBAAM,MAAM,oBAAI,KAAM;AACtB,oBAAM,WAAW,IAAI,QAAO,IAAK,QAAQ,QAAS;AAClD,oBAAM,cAAc,KAAK,MAAM,YAAY,MAAO,GAAG;AACrD,kBAAI,cAAc,GAAG;AACpB,4BAAY;AAAA,cAClB,WAAgB,cAAc,IAAI;AAC5B,4BAAY,GAAG,WAAW;AAAA,cAChC,WAAgB,cAAc,MAAM;AAC9B,sBAAM,YAAY,KAAK,MAAM,cAAc,EAAE;AAC7C,4BAAY,GAAG,SAAS;AAAA,cAC9B,OAAY;AACN,4BAAY,GAAG,QAAQ,SAAQ,EAAG,WAAW,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,cACjH;AAAA,YACD;AACD,mBAAO;AAAA,cACN,IAAI,EAAE;AAAA,cACN,QAAQ,EAAE;AAAA,cACV,QAAMI,MAAA,EAAE,SAAF,gBAAAA,IAAQ,aAAY;AAAA,cAC1B,WAASC,MAAA,EAAE,QAAF,gBAAAA,IAAO,SAAQ;AAAA,cACxB,YAAUC,MAAA,EAAE,QAAF,gBAAAA,IAAO,UAAS;AAAA,cAC1B,MAAM;AAAA,cACN,UAAQC,MAAA,EAAE,SAAF,gBAAAA,IAAQ,cAAa;AAAA,cAC7B,SAAS,EAAE;AAAA,cACX,OAAO,EAAE,SAAS;AAAA,cAClB,SAAS,EAAE,WAAW;AAAA,cACtB,aAAa,EAAE,eAAe;AAAA,cAC9B,aAAa;AAAA,cACb,iBAAiB;AAAA,YACjB;AAAA,UACL,CAAI;AACD,iBAAO;AAAA,YACN,IAAI,EAAE;AAAA,YACN,QAAQ,EAAE;AAAA,YACV,QAAM,OAAE,SAAF,mBAAQ,aAAY;AAAA,YAC1B,WAAS,OAAE,QAAF,mBAAO,SAAQ;AAAA,YACxB,YAAU,OAAE,QAAF,mBAAO,UAAS;AAAA,YAC1B,MAAM;AAAA,YACN,UAAQ,OAAE,SAAF,mBAAQ,cAAa;AAAA,YAC7B,MAAM,EAAE;AAAA,YACR,OAAO,EAAE,SAAS;AAAA,YAClB,SAAS,EAAE,WAAW;AAAA,YACtB,QAAQ,cAAc,QAAS,EAAE,WAAW,cAAc,QAAS;AAAA,YACnE;AAAA,YACA,aAAa;AAAA,YACb,iBAAiB;AAAA,UACjB;AAAA,QACJ,CAAG,CAAC;AAEF,YAAI;AACH,gBAAM,SAASR,cAAAA,MAAI,eAAe,sBAAsB;AACxD,cAAI,QAAQ;AACX,kBAAM,SAAS,SAAS,KAAK,OAAK,EAAE,OAAO,MAAM;AACjD,gBAAI,QAAQ;AACX,qBAAO,cAAc;AACrB,qBAAO,kBAAkB,KAAK,IAAI,KAAK,IAAI,OAAO,mBAAmB,GAAG,CAAC,GAAG,OAAO,QAAQ,MAAM;AAAA,YACjG;AACDA,0BAAG,MAAC,kBAAkB,sBAAsB;AAAA,UAC5C;AAAA,QACJ,SAAW,GAAG;AAAA,QAAG;AAAA,MACf,SAAQ,GAAG;AACXA,sBAAAA,MAAA,MAAA,SAAA,oDAAc,WAAW,CAAC;AAAA,MAC1B;AAAA,IACF;AAGA,aAAS,WAAW,SAAS;AAC5B,wBAAkB,QAAQ;AAC1B,sBAAgB,QAAQ;AACxB,kBAAY,QAAQ;AAEpBS,oBAAAA,WAAS,MAAM;AACd,YAAI,SAAS,OAAO;AACnB,mBAAS,MAAM,MAAO;AAAA,QACtB;AAAA,MACH,CAAE;AAAA,IACF;AAGA,aAAS,kBAAkB,SAAS,OAAO;AAC1C,wBAAkB,QAAQ;AAC1B,sBAAgB,QAAQ;AACxB,kBAAY,QAAQ;AAEpBA,oBAAAA,WAAS,MAAM;AACd,YAAI,SAAS,OAAO;AACnB,mBAAS,MAAM,MAAO;AAAA,QACtB;AAAA,MACH,CAAE;AAAA,IACF;AAaA,aAAS,sBAAsB;AAC9B,UAAI,gBAAgB,OAAO;AAC1B,eAAO,MAAM,gBAAgB,MAAM,IAAI;AAAA,MACzC,WAAY,kBAAkB,OAAO;AACnC,eAAO,MAAM,kBAAkB,MAAM,IAAI;AAAA,MAC3C,OAAQ;AACN,eAAO;AAAA,MACP;AAAA,IACF;AAGA,mBAAe,gBAAgB;;AAC9B,UAAI,CAAC,YAAY,MAAM,QAAQ;AAC9BT,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAChD;AAAA,MACA;AACD,UAAI;AAEH,YAAI,kBAAkB,OAAO;AAC5B,gBAAM,YAAY;AAAA,YACjB,MAAM,YAAY,MAAM,KAAM;AAAA,YAC9B,SAAO,oBAAe,UAAf,mBAAsB,OAAM;AAAA,YACnC,eAAe,gBAAgB,QAAQ,gBAAgB,MAAM,SAAU,kBAAkB,QAAQ,kBAAkB,MAAM,SAAS;AAAA,UAClI;AAED,gBAAM,IAAI,MAAMC,cAAI,mBAAmB,kBAAkB,MAAM,IAAI,SAAS;AAG5E,cAAI,YAAY;AAChB,cAAI,EAAE,WAAW;AAChB,kBAAM,UAAU,IAAI,KAAK,EAAE,SAAS;AACpC,kBAAM,MAAM,oBAAI,KAAM;AACtB,kBAAM,WAAW,IAAI,QAAO,IAAK,QAAQ,QAAS;AAClD,kBAAM,cAAc,KAAK,MAAM,YAAY,MAAO,GAAG;AAErD,gBAAI,cAAc,GAAG;AACpB,0BAAY;AAAA,YACjB,WAAe,cAAc,IAAI;AAC5B,0BAAY,GAAG,WAAW;AAAA,YAC/B,WAAe,cAAc,MAAM;AAC9B,oBAAM,YAAY,KAAK,MAAM,cAAc,EAAE;AAC7C,0BAAY,GAAG,SAAS;AAAA,YAC7B,OAAW;AACN,0BAAY,GAAG,QAAQ,SAAQ,EAAG,WAAW,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,YACjH;AAAA,UACD;AAED,gBAAM,WAAW;AAAA,YAChB,IAAI,EAAE;AAAA,YACN,QAAM,OAAE,SAAF,mBAAQ,aAAY;AAAA,YAC1B,WAAS,OAAE,QAAF,mBAAO,SAAQ;AAAA,YACxB,YAAU,OAAE,QAAF,mBAAO,UAAS;AAAA,YAC1B,MAAM;AAAA,YACN,UAAQ,OAAE,SAAF,mBAAQ,cAAa;AAAA,YAC7B,SAAS,EAAE;AAAA,YACX,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa,EAAE,gBAAgB,gBAAgB,QAAQ,gBAAgB,MAAM,OAAQ,kBAAkB,QAAQ,kBAAkB,MAAM,OAAO;AAAA,YAC9I,aAAa;AAAA,YACb,iBAAiB;AAAA,UACjB;AAGD,gBAAM,UAAU,SAAS,KAAK,OAAK,EAAE,OAAO,kBAAkB,MAAM,EAAE;AACtE,cAAI,SAAS;AACZ,oBAAQ,QAAQ,QAAQ,QAAQ;AAEhC,oBAAQ,cAAc;AACtB,oBAAQ,kBAAkB,KAAK,IAAI,KAAK,IAAK,QAAQ,mBAAmB,GAAI,CAAC,IAAI,GAAG,QAAQ,QAAQ,MAAM;AAC1G,gBAAI;AAAED,4BAAAA,MAAI,eAAe,wBAAwB,QAAQ,EAAE;AAAA,YAAC,SAAU,GAAG;AAAA,YAAG;AAAA,UAC5E;AAED,sBAAY,QAAQ;AACpB,4BAAkB,QAAQ;AAC1B,0BAAgB,QAAQ;AACxBA,wBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,WAAW;AAAA,QACrD,OAAS;AAEN,gBAAM,cAAc;AAAA,YACnB,MAAM,YAAY,MAAM,KAAM;AAAA,YAC9B,SAAO,oBAAe,UAAf,mBAAsB,OAAM;AAAA,UACnC;AAED,gBAAM,IAAI,MAAMC,UAAG,IAAC,cAAc,KAAK,IAAI,WAAW;AAGtD,cAAI,cAAc;AAClB,cAAI,EAAE,WAAW;AAChB,kBAAM,UAAU,IAAI,KAAK,EAAE,SAAS;AACpC,kBAAM,MAAM,oBAAI,KAAM;AACtB,kBAAM,WAAW,IAAI,QAAO,IAAK,QAAQ,QAAS;AAClD,kBAAM,cAAc,KAAK,MAAM,YAAY,MAAO,GAAG;AAErD,gBAAI,cAAc,GAAG;AACpB,4BAAc;AAAA,YACnB,WAAe,cAAc,IAAI;AAC5B,4BAAc,GAAG,WAAW;AAAA,YACjC,WAAe,cAAc,MAAM;AAC9B,oBAAM,YAAY,KAAK,MAAM,cAAc,EAAE;AAC7C,4BAAc,GAAG,SAAS;AAAA,YAC/B,OAAW;AACN,4BAAc,GAAG,QAAQ,SAAQ,EAAG,WAAW,SAAS,GAAG,GAAG,CAAC,IAAI,QAAQ,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,CAAC;AAAA,YACnH;AAAA,UACD;AAED,gBAAM,aAAa;AAAA,YACnB,IAAI,EAAE;AAAA,YACN,QAAM,OAAE,SAAF,mBAAQ,aAAY;AAAA,YACzB,WAAS,OAAE,QAAF,mBAAO,SAAQ;AAAA,YACxB,YAAU,OAAE,QAAF,mBAAO,UAAS;AAAA,YAC1B,MAAM;AAAA,YACP,UAAQ,OAAE,SAAF,mBAAQ,cAAa;AAAA,YAC7B,MAAM,EAAE;AAAA,YACP,OAAO;AAAA,YACP,SAAS;AAAA,YACT,SAAS,CAAE;AAAA,YACX,aAAa;AAAA,YACb,iBAAiB;AAAA,UACjB;AAED,mBAAS,KAAK,UAAU;AACzB,sBAAY,QAAQ;AACpBD,wBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,WAAW;AAAA,QACjD;AAAA,MACD,SAAQ,GAAG;AACXA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAAA,MAC7C;AAAA,IACF;AAGA,mBAAe,YAAY,SAAS;AACnC,UAAI;AACH,cAAM,SAAS,MAAMC,UAAAA,IAAI,YAAY,QAAQ,EAAE;AAC/C,YAAI,QAAQ;AAEX,kBAAQ,QAAQ,OAAO;AACvB,kBAAQ,UAAU,OAAO;AAEzBD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,QAAQ,UAAU,QAAQ;AAAA,YACjC,MAAM;AAAA,YACN,UAAU;AAAA,UACd,CAAI;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,oDAAA,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AAAA,IACF;AAoBA,mBAAe,iBAAiB,OAAO;AACtC,UAAI;AACH,cAAM,SAAS,MAAMC,UAAAA,IAAI,iBAAiB,MAAM,EAAE;AAClD,YAAI,QAAQ;AAEX,gBAAM,QAAQ,OAAO;AACrB,gBAAM,UAAU,OAAO;AAEvBD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,MAAM,UAAU,QAAQ;AAAA,YAC/B,MAAM;AAAA,YACN,UAAU;AAAA,UACd,CAAI;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAAA,MAAc,MAAA,SAAA,oDAAA,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AAAA,IACF;AAGA,mBAAe,mBAAmB,SAAS,OAAO;AAC9C,UAAI;AACA,cAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AACnCA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO;AAAA,YACP,SAAS;AAAA,YACT,aAAa;AAAA,YACb,cAAc;AAAA,YACd,SAAS,OAAO,QAAQ;AACpB,kBAAI,IAAI,SAAS;AACb,oBAAI;AACA,wBAAMC,cAAI,mBAAmB,MAAM,EAAE;AACrC,wBAAM,MAAM,QAAQ,QAAQ,UAAU,OAAK,EAAE,OAAO,MAAM,EAAE;AAC5D,sBAAI,QAAQ;AAAI,4BAAQ,QAAQ,OAAO,KAAK,CAAC;AAC7CD,gCAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAC/C,0BAAQ,IAAI;AAAA,gBACf,SAAQ,GAAG;AACRA,gCAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ;AAC7C,yBAAO,CAAC;AAAA,gBACX;AAAA,cACzB,OAA2B;AACH,wBAAQ,KAAK;AAAA,cAChB;AAAA,YACJ;AAAA,UACjB,CAAa;AAAA,QACb,CAAS;AAAA,MACT,SAAa,GAAG;AAAA,MAAE;AAAA,IAClB;AAEA,aAAS,cAAc,SAAS;AAC/B,cAAQ,cAAc;AACtB,cAAQ,kBAAkB,KAAK,IAAI,GAAG,QAAQ,QAAQ,MAAM;AAAA,IAC7D;AAGA,aAAS,kBAAkB,SAAS;AACnC,cAAQ,kBAAkB,KAAK,KAAK,QAAQ,mBAAmB,KAAK,IAAI,QAAQ,QAAQ,MAAM;AAAA,IAC/F;AAGA,aAAS,gBAAgB,SAAS;AACjC,cAAQ,cAAc;AACtB,cAAQ,kBAAkB;AAAA,IAC3B;AAGA,aAAS,cAAc,QAAQ,SAAS;AACvC,UAAI,CAAC,UAAU,OAAO,WAAW;AAAG;AAEpCA,oBAAAA,MAAI,aAAa;AAAA,QAChB;AAAA,QACA,MAAM;AAAA,QACN,SAAS,MAAM;AACdA,wBAAAA,MAAA,MAAA,OAAA,oDAAY,QAAQ;AAAA,QACpB;AAAA,QACD,MAAM,CAAC,QAAQ;AACdA,wBAAAA,MAAA,MAAA,SAAA,oDAAc,WAAW,GAAG;AAC5BA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACV,CAAI;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACr0BA,GAAG,WAAW,eAAe;"}