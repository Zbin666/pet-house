{"version":3,"file":"communityDetail.js","sources":["pages/communityDetail/communityDetail.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tbXVuaXR5RGV0YWlsL2NvbW11bml0eURldGFpbC52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\" :style=\"dynamicTopPadding\">\n\t\t<view class=\"card\">\n\t\t\t<view class=\"card-hd\">\n\t\t\t\t<image class=\"avatar\" :src=\"post.avatar\" mode=\"aspectFill\" />\n\t\t\t\t<view class=\"title-meta\">\n\t\t\t\t\t<text class=\"nickname\">{{ post.user }}</text>\n\t\t\t\t\t<text class=\"sub\">{{ post.pet }}｜{{ post.breed }}</text>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"time\">{{ post.time }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"card-bd\">\n\t\t\t\t<text v-if=\"post.title\" class=\"post-title\">{{ post.title }}</text>\n\t\t\t\t<text class=\"content\">{{ post.text }}</text>\n\t\t\t\t<view class=\"pics\" v-if=\"post.images && post.images.length\">\n\t\t\t\t\t<image class=\"pic\" v-for=\"(img, i) in post.images\" :key=\"i\" :src=\"img\" mode=\"aspectFill\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"card-ft\">\n\t\t\t\t<view class=\"ft-item\">\n\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/community/share.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>{{ post.shares }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"ft-item\">\n\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/community/emoji.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>{{ comments.length }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"ft-item\" @tap.stop=\"likePost\">\n\t\t\t\t\t<image class=\"ft-icon\" :src=\"post.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t<text>{{ post.likes }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 评论区域 - 叠卡效果 -->\n\t\t<view class=\"comments-section\">\n\t\t\t<view class=\"comments-card\">\n\t\t\t\t<view class=\"comments-card-bg bg1\"></view>\n\t\t\t\t<view class=\"comments-card-body\">\n\t\t\t\t\t<!-- 评论标题 -->\n\t\t\t\t\t<view class=\"comment-header\">\n\t\t\t\t\t\t<view class=\"comment-tag\">\n\t\t\t\t\t\t\t<text class=\"comment-title\">全部评论</text>\n\t\t\t\t\t\t\t<text class=\"comment-count\">{{ comments.length }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\n\t\t\t\t\t<!-- 评论列表 -->\n\t\t\t\t\t<view class=\"comment-list\">\n\t\t\t\t\t\t<view class=\"comment-item\" v-for=\"c in comments\" :key=\"c.id\">\n\t\t\t\t\t\t\t<view class=\"comment-user\">\n\t\t\t\t\t\t\t\t<image class=\"c-avatar\" :src=\"c.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t\t\t<view class=\"c-info\">\n\t\t\t\t\t\t\t\t\t<view class=\"c-row\">\n\t\t\t\t\t\t\t\t\t\t<view class=\"c-column\">\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-name\">{{ c.user }}</text>\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"c-role\" v-if=\"c.petName\">{{ c.petName }}｜{{ c.petBreed }}</text>\n\t\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t\t\t<text class=\"c-time\">{{ c.time }}</text>\n\t\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<text class=\"c-text\">{{ c.text }}</text>\n\t\t\t\t\t\t\t<view class=\"reply-box\" v-if=\"c.replies && c.replies.length\">\n\t\t\t\t\t\t\t\t<view class=\"reply-row\" v-for=\"(r, ri) in c.replies\" :key=\"ri\">\n\t\t\t\t\t\t\t\t\t<text class=\"r-name\">{{ r.user }}：</text>\n\t\t\t\t\t\t\t\t\t<text class=\"r-text\">{{ r.text }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"view-all\">查看全部回复</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 占位高度，避免内容被底部栏遮挡（真机更可靠） -->\n\t\t<view class=\"bottom-safe-spacer\"></view>\n\n\t\t<!-- 底部操作栏 -->\n\t\t<view class=\"bottom-bar\" style=\"padding: 24rpx 24rpx !important; padding-bottom: calc(24rpx + env(safe-area-inset-bottom)) !important; padding-bottom: calc(24rpx + constant(safe-area-inset-bottom)) !important;\">\n\t\t\t<view class=\"action-buttons\">\n\t\t\t\t<view class=\"action-btn\" @tap=\"sharePost\">\n\t\t\t\t\t<image class=\"action-icon\" src=\"/static/community/share.png\" mode=\"widthFix\" />\n\t\t\t\t</view>\n\t\t\t<view class=\"action-btn\" @tap=\"likePost\">\n\t\t\t\t<image class=\"action-icon\" :src=\"post.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"comment-input\">\n\t\t\t\t<input \n\t\t\t\t\tclass=\"input-field\" \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tplaceholder=\"输入你的回答\" \n\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\tv-model=\"commentText\"\n\t\t\t\t\t@confirm=\"submitComment\"\n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { reactive, ref, onMounted } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\n\n// 动态顶部内边距\nconst dynamicTopPadding = ref('')\nonMounted(async () => {\n\ttry {\n\t\tconst info = uni.getSystemInfoSync()\n\t\tconst statusBar = info.statusBarHeight || 0\n\t\tconst screenW = info.screenWidth || 375\n\t\tconst rpxToPx = (rpx) => (rpx * screenW) / 750\n\t\tconst topPx = 15\n\t\tdynamicTopPadding.value = `padding-top:${topPx}px;`\n\t\t\n\t\t// 加载当前用户的宠物信息\n\t\ttry {\n\t\t\tconst pets = await api.getPets()\n\t\t\tconst petsList = Array.isArray(pets) ? pets : (pets.data || [])\n\t\t\tif (petsList.length > 0) {\n\t\t\t\tcurrentUserPet.value = petsList[0] // 使用第一个宠物\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error('获取宠物信息失败:', e)\n\t\t}\n\t} catch (e) {\n\t\tdynamicTopPadding.value = ''\n\t}\n})\n\nconst post = reactive({ id: '', user: '昵称', text: '这是一条圈子动态内容。', cover: '/static/logo.png', likes: 0, avatar: '/static/logo.png', pet: '', breed: '', images: [], shares: 0, isLiked: false, time: '' })\nconst commentText = ref('')\nconst comments = reactive([])\nconst currentUserPet = ref(null) // 当前用户的宠物信息\n\nasync function loadDetail(id) {\n\ttry {\n\t\tconst f = await api.getFeed(id)\n\t\tconst user = f.User || {}\n\t\tconst pet = f.Pet || {}\n\t\tpost.id = f.id\n\t\tpost.user = user.nickname || '昵称'\n\t\tpost.pet = pet.name || ''\n\t\tpost.breed = pet.breed || ''\n\t\tpost.text = f.text || ''\n\t\tpost.avatar = user.avatarUrl || '/static/logo.png'\n\t\tpost.images = Array.isArray(f.images) ? f.images : []\n\t\tpost.cover = post.images[0] ? post.images[0] : (f.cover || '/static/logo.png')\n\t\tpost.likes = f.likes || 0\n\t\tpost.shares = f.shares || 0\n\t\tpost.isLiked = f.isLiked || false // 添加点赞状态\n\t\t\n\t\t// 提取标题（从tags字段中获取第一个标签作为标题）\n\t\tlet title = ''\n\t\tif (f.tags && Array.isArray(f.tags) && f.tags.length > 0) {\n\t\t\ttitle = f.tags[0]\n\t\t} else if (f.tags && typeof f.tags === 'string') {\n\t\t\ttry {\n\t\t\t\tconst parsedTags = JSON.parse(f.tags)\n\t\t\t\tif (Array.isArray(parsedTags) && parsedTags.length > 0) {\n\t\t\t\t\ttitle = parsedTags[0]\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// 如果解析失败，忽略\n\t\t\t}\n\t\t}\n\t\tpost.title = title ? `#${title}` : ''\n\t\t// 处理时间显示\n\t\tif (f.createdAt) {\n\t\t\tconst created = new Date(f.createdAt)\n\t\t\tconst now = new Date()\n\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\t\n\t\t\tif (minutesDiff < 1) {\n\t\t\t\tpost.time = '刚刚'\n\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\tpost.time = `${minutesDiff}分钟前`\n\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\tpost.time = `${hoursDiff}小时前`\n\t\t\t} else {\n\t\t\t\t// 超过24小时显示具体时间\n\t\t\t\tpost.time = `${created.getHours().toString().padStart(2,'0')}:${created.getMinutes().toString().padStart(2,'0')}`\n\t\t\t}\n\t\t} else {\n\t\t\tpost.time = ''\n\t\t}\n\t\tcomments.splice(0, comments.length, ...((f.Comments || []).map((c) => {\n\t\t\t// 处理评论时间显示\n\t\t\tlet commentTime = ''\n\t\t\tif (c.createdAt) {\n\t\t\t\tconst created = new Date(c.createdAt)\n\t\t\t\tconst now = new Date()\n\t\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\t\t\n\t\t\t\tif (minutesDiff < 1) {\n\t\t\t\t\tcommentTime = '刚刚'\n\t\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\t\tcommentTime = `${minutesDiff}分钟前`\n\t\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\t\tcommentTime = `${hoursDiff}小时前`\n\t\t\t\t} else {\n\t\t\t\t\tcommentTime = `${created.getHours().toString().padStart(2,'0')}:${created.getMinutes().toString().padStart(2,'0')}`\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tid: c.id,\n\t\t\t\tuser: c.User?.nickname || '用户',\n\t\t\t\tpetName: c.Pet?.name || '',\n\t\t\t\tpetBreed: c.Pet?.breed || '',\n\t\t\t\ttime: commentTime,\n\t\t\t\tavatar: c.User?.avatarUrl || '/static/logo.png',\n\t\t\t\ttext: c.text,\n\t\t\t\treplies: []\n\t\t\t}\n\t\t})))\n\t} catch (e) {\n\t\tuni.showToast({ title: '加载失败', icon: 'none' })\n\t}\n}\n\nonLoad(() => {\n\tconst eventChannel = getCurrentPages().pop()?.getOpenerEventChannel?.()\n\tlet incoming = null\n\ttry {\n\t\teventChannel && eventChannel.on('post', (data) => { incoming = data })\n\t} catch (e) { }\n\t// 如果带有 id 则请求详情，否则用事件数据填充\n\tsetTimeout(() => {\n\t\tif (incoming && incoming.id) {\n\t\t\tloadDetail(incoming.id)\n\t\t} else if (incoming) {\n\t\t\tpost.id = incoming.id || ''\n\t\t\tpost.user = incoming.user || '昵称'\n\t\t\tpost.pet = incoming.pet || ''\n\t\t\tpost.breed = incoming.breed || ''\n\t\t\tpost.text = incoming.text || ''\n\t\t\tpost.avatar = incoming.avatar || '/static/logo.png'\n\t\t\tpost.images = Array.isArray(incoming.images) ? incoming.images : []\n\t\t\tpost.cover = post.images[0] ? post.images[0] : (incoming.cover || '/static/logo.png')\n\t\t\tpost.likes = incoming.likes || 0\n\t\t\tpost.shares = incoming.shares || 0\n\t\t}\n\t}, 0)\n})\n\n// 分享动态\nfunction sharePost() {\n\tuni.showToast({\n\t\ttitle: '分享功能开发中',\n\t\ticon: 'none'\n\t})\n}\n\n// 点赞动态\nasync function likePost() {\n\ttry {\n\t\tconst result = await api.likeFeed(post.id)\n\t\tif (result) {\n\t\t\t// 更新点赞数量和状态\n\t\t\tpost.likes = result.likes\n\t\t\tpost.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: post.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('点赞操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 提交评论\nasync function submitComment() {\n\tif (!commentText.value.trim()) {\n\t\tuni.showToast({ title: '请输入评论内容', icon: 'none' })\n\t\treturn\n\t}\n\ttry {\n\t\tconst c = await api.createComment(post.id, { text: commentText.value.trim() })\n\t\t// 处理新评论的时间格式，与动态时间格式保持一致\n\t\tlet commentTime = '刚刚'\n\t\tif (c.createdAt) {\n\t\t\tconst created = new Date(c.createdAt)\n\t\t\tconst now = new Date()\n\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\t\n\t\t\tif (minutesDiff < 1) {\n\t\t\t\tcommentTime = '刚刚'\n\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\tcommentTime = `${minutesDiff}分钟前`\n\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\tcommentTime = `${hoursDiff}小时前`\n\t\t\t} else {\n\t\t\t\t// 超过24小时显示具体时间\n\t\t\t\tcommentTime = `${created.getHours().toString().padStart(2,'0')}:${created.getMinutes().toString().padStart(2,'0')}`\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomments.push({\n\t\t\tid: c.id,\n\t\t\tuser: c.User?.nickname || '我',\n\t\t\tpetName: currentUserPet.value?.name || '',\n\t\t\tpetBreed: currentUserPet.value?.breed || '',\n\t\t\ttime: commentTime,\n\t\t\tavatar: c.User?.avatarUrl || '/static/logo.png',\n\t\t\ttext: c.text,\n\t\t\treplies: []\n\t\t})\n\t\tcommentText.value = ''\n\t\tuni.showToast({ title: '评论提交成功', icon: 'success' })\n\t} catch (e) {\n\t\tuni.showToast({ title: '评论失败', icon: 'none' })\n\t}\n}\n</script>\n\n<style scoped>\n.page {\n\tpadding: 24rpx;\n\t/* 动态计算顶部间距，避免真机调试时env不生效 */\n\tpadding-bottom: 36rpx; /* 改为基础内边距，具体高度由占位视图控制 */\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n}\n\n.card {\n\twidth: 600rpx;\n\tbackground: #fff;\n\tborder-radius: 24rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tpadding: 25rpx 35rpx;\n\tbox-shadow: 0 8rpx 0 #2c2c2c;\n\tmargin: 0 auto;\n}\n\n.card-hd {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.title-meta {\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.nickname {\n\tfont-size: 30rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.sub {\n\tdisplay: block;\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n\tmargin-top: 4rpx;\n}\n\n.time {\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n}\n\n.card-bd {\n\tmargin-top: 10rpx;\n}\n\n.post-title {\n\tdisplay: block;\n\tcolor: #82919c;\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tmargin: 16rpx 0 8rpx 0;\n\tline-height: 1.4;\n}\n\n.content {\n\tdisplay: block;\n\tcolor: #333;\n\tline-height: 1.6;\n\tmargin: 24rpx 0;\n\tfont-size: 26rpx;\n}\n\n.pics {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgap: 12rpx;\n}\n\n.pic {\n\twidth: 100%;\n\theight: 200rpx;\n\tbackground: #f3f3f3;\n\tborder-radius: 12rpx;\n}\n\n.card-ft {\n\tmargin-top: 18rpx;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 8rpx;\n\tcolor: #555;\n\tfont-size: 28rpx;\n}\n\n.ft-item {\n\tbackground: #fff;\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 999rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.ft-icon {\n\twidth: 24rpx;\n\theight: 24rpx;\n}\n\n/* 评论区域 - 叠卡效果 */\n.comments-section {\n\tmargin-top: 50rpx;\n\tposition: relative;\n}\n\n.comments-card {\n\tposition: relative;\n}\n\n.comments-card-bg {\n\tposition: absolute;\n\tleft: 8rpx;\n\tright: 8rpx;\n\theight: 100%;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbackground: #fff;\n\tz-index: 0;\n\tpointer-events: none;\n}\n\n.comments-card-bg.bg1 {\n\ttop: -2rpx;\n\twidth: 625rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%) rotate(-2deg);\n\tz-index: 0;\n}\n\n.comments-card-body {\n\twidth: 625rpx;\n\tposition: relative;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tpadding: 20rpx;\n\tz-index: 1;\n\tmargin: 0 auto;\n}\n\n.comment-header {\n\tdisplay: flex;\n\talign-items: flex-start;\n\tmargin-bottom: 20rpx;\n\tpadding-bottom: 16rpx;\n\tborder-bottom: 2rpx solid #e9e9e9;\n}\n\n.comment-tag {\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tbackground: #333333;\n\tcolor: #fff;\n\tpadding: 16rpx 24rpx;\n\ttransform: rotate(-3deg);\n\tborder-radius: 0;\n\tbox-shadow: 0 6rpx 12rpx rgba(0, 0, 0, 0.3);\n\tmargin-left: 8rpx;\n}\n\n.comment-tag::before {\n\tcontent: '';\n\tposition: absolute;\n\tleft: -10rpx;\n\ttop: 0;\n\twidth: 0;\n\theight: 0;\n\tborder-top: 0 solid transparent;\n\tborder-bottom: 100% solid transparent;\n\tborder-right: 10rpx solid #333333;\n}\n\n.comment-tag::after {\n\tcontent: '';\n\tposition: absolute;\n\tright: -10rpx;\n\ttop: 0;\n\twidth: 0;\n\theight: 0;\n\tborder-top: 100% solid transparent;\n\tborder-bottom: 0 solid transparent;\n\tborder-left: 10rpx solid #333333;\n}\n\n.comment-title {\n\tfont-weight: 600;\n\tfont-size: 30rpx;\n\tcolor: #fff;\n\tmargin-right: 12rpx;\n\tletter-spacing: 1rpx;\n}\n\n.comment-count {\n\tfont-weight: 500;\n\tfont-size: 26rpx;\n\tcolor: #fff;\n\tletter-spacing: 0.5rpx;\n}\n\n.comment-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n\tpadding: 0 20rpx;\n}\n\n.comment-item {\n\tpadding-bottom: 16rpx;\n\tborder-bottom: 1rpx solid #f0f0f0;\n}\n\n.comment-item:last-child {\n\tborder-bottom: none;\n\tpadding-bottom: 0;\n}\n\n.comment-user {\n\tdisplay: flex;\n\tgap: 14rpx;\n\tmargin-bottom: 18rpx;\n}\n\n.c-avatar {\n\twidth: 70rpx;\n\theight: 70rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.c-info {\n\tflex: 1;\n}\n\n.c-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.c-column {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.c-name {\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tfont-size: 28rpx;\n}\n\n.c-role {\n\tdisplay: block;\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n\tmargin-top: 4rpx;\n}\n\n.c-time {\n\tmargin-left: auto;\n\tcolor: #777;\n\tfont-size: 24rpx;\n}\n\n.c-text {\n\tdisplay: block;\n\tmargin-bottom: 20rpx;\n\tcolor: #1a1a1a;\n\tline-height: 1.7;\n\tfont-size: 26rpx;\n}\n\n.reply-box {\n\tbackground: #f8f8f8;\n\tborder: 2rpx solid #e0e0e0;\n\tborder-radius: 12rpx;\n\tpadding: 28rpx 18rpx;\n\tmargin-top: 12rpx;\n}\n\n.reply-row {\n\tmargin-bottom: 16rpx;\n\tfont-size: 24rpx;\n}\n\n.reply-row:last-child {\n\tmargin-bottom: 0;\n}\n\n.r-name {\n\tcolor: #1a1a1a;\n\tfont-weight: 600;\n}\n\n.r-text {\n\tcolor: #333;\n}\n\n.view-all {\n\tdisplay: block;\n\tcolor: #6b6b6b;\n\tmargin-top: 6rpx;\n\tfont-size: 24rpx;\n\ttext-align: center;\n}\n\n/* 底部操作栏 */\n.bottom-bar {\n\tposition: fixed !important;\n\tbottom: 0 !important;\n\tleft: 0 !important;\n\tright: 0 !important;\n\tbackground: #fff !important;\n\tborder-top: 4rpx solid #2c2c2c !important;\n\tpadding: 20rpx 24rpx !important;\n\tpadding-bottom: calc(40rpx + env(safe-area-inset-bottom)) !important;\n\tpadding-bottom: calc(40rpx + constant(safe-area-inset-bottom)) !important;\n\tdisplay: flex !important;\n\talign-items: center !important;\n\tgap: 16rpx !important;\n\tz-index: 100 !important;\n}\n\n.action-buttons {\n\tdisplay: flex;\n\tgap: 12rpx;\n}\n\n.action-btn {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground: #f5f5f5;\n\tborder: 2rpx solid #2c2c2c;\n\tborder-radius: 50%;\n}\n\n.action-icon {\n\twidth: 32rpx;\n\theight: 32rpx;\n\ttransition: all 0.3s ease;\n}\n\n\n.comment-input {\n\tflex: 1;\n\tmax-width: 500rpx;\n}\n\n.input-field {\n\twidth: 100%;\n\theight: 60rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 30rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tcolor: #333;\n}\n\n.input-placeholder {\n\tcolor: #bbb;\n\tfont-size: 28rpx;\n}\n\n/* 底部占位高度，匹配底部栏实际高度（含安全区） */\n.bottom-safe-spacer {\n\theight: calc(88rpx + env(safe-area-inset-bottom));\n\theight: calc(88rpx + constant(safe-area-inset-bottom));\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/communityDetail/communityDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","api","reactive","onLoad"],"mappings":"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"}