{"version":3,"file":"editPet.js","sources":["pages/editPet/editPet.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZWRpdFBldC9lZGl0UGV0LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<!-- 叠纸卡片感觉的容器 -->\n\t\t<view class=\"sheet\">\n\t\t\t<view class=\"sheet-bg bg1\"></view>\n\t\t\t<view class=\"sheet-body\">\n\t\t\t\t<!-- 头像与基本信息 -->\n\t\t\t\t<view class=\"header\">\n\t\t\t\t\t<view class=\"avatar-wrap\" @tap=\"pickAvatar\">\n\t\t\t\t\t\t<image v-if=\"form.avatar\" class=\"avatar\" :src=\"form.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t\t<view v-else class=\"avatar placeholder\">+</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"kv\">\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">姓名：</text><input class=\"v input\" v-model=\"form.name\" placeholder=\"请输入昵称\" /></view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">年龄(月)：</text><input class=\"v input\" type=\"number\" v-model.number=\"form.months\" placeholder=\"例如 7\" /></view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">体重(kg)：</text><input class=\"v input\" type=\"digit\" v-model=\"form.weight\" placeholder=\"例如 2.4\" /></view>\n\t\t\t\t\t\t<view class=\"kv-row\">\n\t\t\t\t\t\t\t<text class=\"k\">性别：</text>\n\t\t\t\t\t\t\t<picker :range=\"genders\" :value=\"genderIndex\" @change=\"onGenderChange\">\n\t\t\t\t\t\t\t\t<view class=\"picker v\">{{ genders[genderIndex] }}</view>\n\t\t\t\t\t\t\t</picker>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">品种：</text><input class=\"v input\" v-model=\"form.breed\" placeholder=\"如 布偶猫\" /></view>\n\t\t\t\t\t\t<view class=\"kv-row\"><text class=\"k\">颜色：</text><input class=\"v input\" v-model=\"form.color\" placeholder=\"如 白橘\" /></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- 绝育/日期 -->\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">是否绝育：</text>\n\t\t\t\t\t<switch class=\"v\" :checked=\"form.neutered\" @change=\"e=>form.neutered=e.detail.value\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">生日：</text>\n\t\t\t\t\t<picker mode=\"date\" :value=\"form.birthday\" @change=\"e=>form.birthday=e.detail.value\"><view class=\"picker v\">{{ form.birthday || '选择日期' }}</view></picker>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">在一起：</text>\n\t\t\t\t\t<picker mode=\"date\" :value=\"form.startTogether\" @change=\"e=>form.startTogether=e.detail.value\"><view class=\"picker v\">{{ form.startTogether || '选择日期' }}</view></picker>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- 疫苗 -->\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">接种疫苗：</text>\n\t\t\t\t\t<view class=\"vaccines\">\n\t\t\t\t\t\t<checkbox-group @change=\"onVaccinesChange\">\n\t\t\t\t\t\t\t<label v-for=\"opt in vaccineOptions\" :key=\"opt\" class=\"ck\">\n\t\t\t\t\t\t\t\t<checkbox :value=\"opt\" :checked=\"form.vaccines.includes(opt)\" />\n\t\t\t\t\t\t\t\t<text>{{ opt }}</text>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</checkbox-group>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- 性格描述 -->\n\t\t\t\t<view class=\"row icon-row\">\n\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t<text class=\"k big\">性格：</text>\n\t\t\t\t\t<textarea class=\"v textarea\" v-model=\"form.temperament\" placeholder=\"例如：慵懒，不爱动，还有点小傲娇\"/>\n\t\t\t\t</view>\n\n\t\t\t\t<view class=\"divider-h\"></view>\n\n\t\t\t\t<!-- 日常照片 -->\n\t\t\t\t<view class=\"photos\">\n\t\t\t\t\t<view class=\"photos-title\">\n\t\t\t\t\t\t<image class=\"bullet\" src=\"/static/user/fish.png\" />\n\t\t\t\t\t\t<text class=\"k big\">日常照片：</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"gallery\">\n\t\t\t\t\t\t<image v-for=\"(g,i) in form.gallery\" :key=\"i\" class=\"g\" :src=\"g\" mode=\"aspectFill\" />\n\t\t\t\t\t\t<view class=\"g add\" @tap=\"pickGallery\">+</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\n\t\t\t\t<button class=\"save-btn\" @tap=\"save\">保存</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { reactive, ref } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\n\nconst genders = ref(['女生','男生'])\nconst genderIndex = ref(0)\n\nconst vaccineOptions = ref(['已接种猫三联疫苗','已接种狂犬疫苗'])\n\nconst form = reactive({\n\tname: '',\n\tmonths: '',\n\tweight: '',\n\tgender: 'female',\n\tbreed: '',\n\tcolor: '',\n\tneutered: false,\n\tbirthday: '',\n\tstartTogether: '',\n\tavatar: '',\n\tvaccines: [],\n\ttemperament: '',\n\tgallery: []\n})\n\nonLoad(() => {\n\tuni.setNavigationBarTitle({ title: '添加/编辑宠物' })\n\tuni.setNavigationBarColor({ frontColor: '#000000', backgroundColor: '#fff1a8' })\n})\n\nfunction onGenderChange(e){\n\tgenderIndex.value = Number(e.detail.value || 0)\n\tform.gender = genderIndex.value === 1 ? 'male' : 'female'\n}\n\nfunction onVaccinesChange(e){\n\tform.vaccines = e.detail.value || []\n}\n\nfunction pickAvatar(){\n\tuni.chooseImage({ count: 1, sizeType: ['compressed'], success: res => { form.avatar = res.tempFilePaths[0] } })\n}\n\nfunction pickGallery(){\n\tuni.chooseImage({ count: 6, sizeType: ['compressed'], success: res => { form.gallery = form.gallery.concat(res.tempFilePaths).slice(0,6) } })\n}\n\nfunction save(){\n\t// 简单持久化到本地，实际可替换为后端接口\n\ttry{ uni.setStorageSync('petProfileDraft', JSON.stringify(form)) } catch(e){}\n\tuni.showToast({ title: '已保存', icon: 'success' })\n\tsetTimeout(() => uni.navigateBack(), 400)\n}\n</script>\n\n<style scoped>\n.page { min-height: 100vh; padding: 24rpx; padding-top: calc(70rpx + env(safe-area-inset-top)); padding-top: calc(70rpx + constant(safe-area-inset-top)); background: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%); }\n\n.sheet { position: relative; }\n.sheet-bg { position: absolute; left: 12rpx; right: 12rpx; top: -10rpx; height: 96%; border: 4rpx solid #2c2c2c; border-radius: 32rpx; background: #fff; transform: rotate(-2deg); }\n.sheet-body { position: relative; background: #fff; border: 4rpx solid #2c2c2c; border-radius: 32rpx; padding: 28rpx; z-index: 1; }\n\n.header { display: flex; gap: 24rpx; }\n.avatar-wrap { width: 240rpx; height: 240rpx; border: 4rpx solid #2c2c2c; border-radius: 16rpx; background: #f5f5f5; display: flex; align-items: center; justify-content: center; }\n.avatar { width: 100%; height: 100%; border-radius: 12rpx; }\n.placeholder { font-size: 64rpx; font-weight: 700; color: #888; }\n\n.kv { flex: 1; display: flex; flex-direction: column; gap: 18rpx; justify-content: center; }\n.kv-row { display: grid; grid-template-columns: 160rpx 1fr; align-items: center; column-gap: 8rpx; }\n.k { font-weight: 700; }\n.v { font-size: 30rpx; }\n.input { background: #fff; border: 4rpx solid #2c2c2c; border-radius: 12rpx; padding: 12rpx 16rpx; }\n.picker { background: #fff; border: 4rpx solid #2c2c2c; border-radius: 12rpx; padding: 12rpx 16rpx; }\n\n.divider-h { height: 2rpx; background: #e9e9e9; margin: 28rpx 0; }\n\n.row { display: grid; grid-template-columns: 44rpx 200rpx 1fr; align-items: center; column-gap: 12rpx; }\n/* 相邻的图标行之间增加竖向间距 */\n.row.icon-row + .row.icon-row { margin-top: 16rpx; }\n.bullet { width: 44rpx; height: 44rpx; }\n.big { font-size: 30rpx; }\n\n.vaccines .ck { display: inline-flex; align-items: center; gap: 8rpx; margin-right: 16rpx; margin-bottom: 8rpx; }\n\n.textarea { width: 100%; max-width: 100%; box-sizing: border-box; min-height: 120rpx; border: 4rpx solid #2c2c2c; border-radius: 12rpx; padding: 12rpx 16rpx; background: #fff; }\n\n.photos { border: 4rpx solid #2c2c2c; border-radius: 16rpx; padding: 16rpx; background: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%); }\n.photos-title { display: flex; align-items: center; gap: 12rpx; margin-bottom: 12rpx; }\n.gallery { display: grid; grid-template-columns: repeat(3, 180rpx); gap: 8rpx; justify-content: start; }\n.g { width: 180rpx; height: 180rpx; border: 4rpx solid #2c2c2c; border-radius: 12rpx; background: #f6f6f6; display: flex; align-items: center; justify-content: center; }\n.g.add { background: #fff; color: #888; font-size: 64rpx; }\n\n.save-btn { margin-top: 20rpx; background: #ffe046; color: #1a1a1a; border: 4rpx solid #2c2c2c; border-radius: 999rpx; height: 96rpx; line-height: 96rpx; font-weight: 700; }\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/editPet/editPet.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","onLoad","uni"],"mappings":";;;;;;AA+FA,UAAM,UAAUA,cAAG,IAAC,CAAC,MAAK,IAAI,CAAC;AAC/B,UAAM,cAAcA,cAAG,IAAC,CAAC;AAEzB,UAAM,iBAAiBA,cAAG,IAAC,CAAC,YAAW,SAAS,CAAC;AAEjD,UAAM,OAAOC,cAAAA,SAAS;AAAA,MACrB,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,OAAO;AAAA,MACP,UAAU;AAAA,MACV,UAAU;AAAA,MACV,eAAe;AAAA,MACf,QAAQ;AAAA,MACR,UAAU,CAAE;AAAA,MACZ,aAAa;AAAA,MACb,SAAS,CAAE;AAAA,IACZ,CAAC;AAEDC,kBAAAA,OAAO,MAAM;AACZC,oBAAAA,MAAI,sBAAsB,EAAE,OAAO,UAAS,CAAE;AAC9CA,oBAAG,MAAC,sBAAsB,EAAE,YAAY,WAAW,iBAAiB,WAAW;AAAA,IAChF,CAAC;AAED,aAAS,eAAe,GAAE;AACzB,kBAAY,QAAQ,OAAO,EAAE,OAAO,SAAS,CAAC;AAC9C,WAAK,SAAS,YAAY,UAAU,IAAI,SAAS;AAAA,IAClD;AAEA,aAAS,iBAAiB,GAAE;AAC3B,WAAK,WAAW,EAAE,OAAO,SAAS,CAAE;AAAA,IACrC;AAEA,aAAS,aAAY;AACpBA,oBAAG,MAAC,YAAY,EAAE,OAAO,GAAG,UAAU,CAAC,YAAY,GAAG,SAAS,SAAO;AAAE,aAAK,SAAS,IAAI,cAAc,CAAC;AAAA,MAAC,GAAI;AAAA,IAC/G;AAEA,aAAS,cAAa;AACrBA,0BAAI,YAAY,EAAE,OAAO,GAAG,UAAU,CAAC,YAAY,GAAG,SAAS,SAAO;AAAE,aAAK,UAAU,KAAK,QAAQ,OAAO,IAAI,aAAa,EAAE,MAAM,GAAE,CAAC;AAAA,MAAC,GAAI;AAAA,IAC7I;AAEA,aAAS,OAAM;AAEd,UAAG;AAAEA,sBAAG,MAAC,eAAe,mBAAmB,KAAK,UAAU,IAAI,CAAC;AAAA,MAAC,SAAS,GAAE;AAAA,MAAE;AAC7EA,oBAAG,MAAC,UAAU,EAAE,OAAO,OAAO,MAAM,WAAW;AAC/C,iBAAW,MAAMA,cAAAA,MAAI,aAAY,GAAI,GAAG;AAAA,IACzC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9IA,GAAG,WAAW,eAAe;"}