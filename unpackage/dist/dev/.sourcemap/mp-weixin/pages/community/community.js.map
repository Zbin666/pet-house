{"version":3,"file":"community.js","sources":["pages/community/community.vue","../../HBuilderX.4.57/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tbXVuaXR5L2NvbW11bml0eS52dWU"],"sourcesContent":["<template>\n\t<view class=\"page\" :style=\"dynamicTopPadding\">\n\n\n\t\t<!-- 吊牌标签 -->\n\t\t<view class=\"hanger\">\n\t\t\t<view class=\"rope\"></view>\n\t\t\t<view class=\"signs\">\n\t\t\t\t<view :class=\"['sign', topTab === 'square' ? 'active' : '']\" @tap=\"switchTab('square')\">\n\t\t\t\t\t<image v-if=\"topTab === 'square'\" class=\"sign-badge\" src=\"/static/community/ischoose.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>广场</text>\n\t\t\t\t</view>\n\t\t\t\t<view :class=\"['sign', topTab === 'qa' ? 'active' : '']\" @tap=\"switchTab('qa')\">\n\t\t\t\t\t<image v-if=\"topTab === 'qa'\" class=\"sign-badge\" src=\"/static/community/ischoose.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>问答</text>\n\t\t\t\t</view>\n\t\t\t\t<view :class=\"['sign', topTab === 'science' ? 'active' : '']\" @tap=\"switchTab('science')\">\n\t\t\t\t\t<image v-if=\"topTab === 'science'\" class=\"sign-badge\" src=\"/static/community/ischoose.png\" mode=\"widthFix\" />\n\t\t\t\t\t<text>科普</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 搜索框 -->\n\t\t<view class=\"search\">\n\t\t\t<image class=\"search-ico-img\" src=\"/static/community/search.png\" mode=\"widthFix\" />\n\t\t\t<input \n\t\t\t\tclass=\"search-input\" \n\t\t\t\ttype=\"text\" \n\t\t\t\tplaceholder=\"输入你想搜索的内容\" \n\t\t\t\tplaceholder-class=\"ph\"\n\t\t\t\tv-model=\"searchText\"\n\t\t\t\t@confirm=\"handleSearch\"\n\t\t\t\t@input=\"handleSearchInput\"\n\t\t\t/>\n\t\t\t<view v-if=\"searchText\" class=\"search-clear\" @tap.stop=\"clearSearch\">\n\t\t\t\t<text>✕</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 类目 tabs -->\n\t\t<scroll-view class=\"categories\" scroll-x v-if=\"topTab === 'square'\">\n\t\t\t<view v-for=\"c in categories\" :key=\"c.key\" :class=\"['cat', currentCategory === c.key ? 'on' : '']\"\n\t\t\t\t@tap=\"selectCategory(c.key)\">{{ c.name }}</view>\n\t\t</scroll-view>\n\n\t\t<!-- 动态列表（广场） -->\n\t\t<view class=\"feed\" v-if=\"topTab === 'square'\">\n\t\t\t<view class=\"card\" v-for=\"post in posts\" :key=\"post.id\" @tap=\"goDetail(post)\">\n\t\t\t\t<view class=\"card-hd\">\n\t\t\t\t\t<image class=\"avatar\" :src=\"post.avatar\" mode=\"aspectFill\" />\n\t\t\t\t\t<view class=\"title-meta\">\n\t\t\t\t\t\t<text class=\"nickname\">{{ post.user }}</text>\n\t\t\t\t\t\t<text class=\"sub\">{{ post.pet }}｜{{ post.breed }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"time\">{{ post.time }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"card-bd\">\n\t\t\t\t\t<text v-if=\"post.title\" class=\"post-title\">{{ post.title }}</text>\n\t\t\t\t\t<text class=\"content\">{{ post.text }}</text>\n\t\t\t\t\t<view class=\"pics\" v-if=\"post.images && post.images.length\">\n\t\t\t\t\t\t<image class=\"pic\" v-for=\"(img, i) in post.images\" :key=\"i\" :src=\"img\" mode=\"aspectFill\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"card-ft\" @tap.stop=\"noop\">\n\t\t\t\t\t<view class=\"ft-item\">\n\t\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/community/share.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t<text>{{ post.shares }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"ft-item\">\n\t\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/community/emoji.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t<text>{{ post.comments }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"ft-item\" @tap.stop=\"toggleLike(post)\">\n\t\t\t\t\t\t<image class=\"ft-icon\" :src=\"post.isLiked ? '/static/community/good-active.png' : '/static/community/good.png'\" mode=\"widthFix\" />\n\t\t\t\t\t\t<text>{{ post.likes }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view v-if=\"post.isOwner\" class=\"ft-item delete-item\" @tap.stop=\"deletePost(post)\">\n\t\t\t\t\t\t<image class=\"ft-icon\" src=\"/static/user/delete.png\" mode=\"widthFix\" />\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 科普列表 -->\n\t\t<view class=\"science-feed\" v-if=\"topTab === 'science'\">\n\t\t\t<view class=\"science-item\" v-for=\"a in sciencePosts\" :key=\"a.id\" @tap=\"goScienceDetail(a)\">\n\t\t\t\t<view class=\"s-card\">\n\t\t\t\t\t<view class=\"s-thumb\">\n\t\t\t\t\t\t<image class=\"s-thumb-img\" :src=\"a.cover\" mode=\"aspectFill\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"s-content\">\n\t\t\t\t\t\t<text class=\"s-title\">{{ a.title }}</text>\n\t\t\t\t\t\t<text class=\"s-reads\">{{ a.reads }}个阅读</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 问答列表 -->\n\t\t<view class=\"qa-feed\" v-if=\"topTab === 'qa'\">\n\t\t\t<view class=\"qa-card\" v-for=\"qa in qaPosts\" :key=\"qa.id\" @tap=\"goQADetail(qa)\">\n\t\t\t\t<!-- 问题标题 -->\n\t\t\t\t<view class=\"qa-header\">\n\t\t\t\t\t<view class=\"urgent-tag\" v-if=\"qa.isUrgent\">\n\t\t\t\t\t\t<text class=\"urgent-text\">急</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"qa-title\">{{ qa.title }}</text>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 标签 -->\n\t\t\t\t<view class=\"qa-tags\" v-if=\"qa.tags && qa.tags.length > 0\">\n\t\t\t\t\t<text class=\"qa-tag\" v-for=\"tag in qa.tags\" :key=\"tag\">#{{ tag }}</text>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 虚线分隔 -->\n\t\t\t\t<view class=\"qa-divider\"></view>\n\n\t\t\t\t<!-- 最高点赞评论或最早评论或未回答状态 -->\n\t\t\t\t<view class=\"qa-content\" v-if=\"qa.hasAnswer && qa.topAnswer\">\n\t\t\t\t\t<view class=\"top-answer-info\">\n\t\t\t\t\t\t<image class=\"top-answer-avatar\" :src=\"qa.topAnswer.user.avatarUrl || '/static/logo.png'\" mode=\"aspectFill\" />\n\t\t\t\t\t\t<view class=\"top-answer-meta\">\n\t\t\t\t\t\t\t<text class=\"top-answer-user\">{{ qa.topAnswer.user.nickname }}</text>\n\t\t\t\t\t\t\t<text class=\"top-answer-pet\" v-if=\"qa.topAnswer.pet\">{{ qa.topAnswer.pet.name }}｜{{ qa.topAnswer.pet.breed }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"top-answer-likes\" v-if=\"qa.topAnswer.isTopLiked\">\n\t\t\t\t\t\t\t<image class=\"like-icon\" src=\"/static/community/good-active.png\" mode=\"widthFix\" />\n\t\t\t\t\t\t\t<text class=\"like-count\">{{ qa.topAnswer.likes }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"top-answer-badge\" v-else>\n\t\t\t\t\t\t\t<text class=\"badge-text\">最早</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"top-answer-content\">{{ qa.topAnswer.content.length > 50 ? qa.topAnswer.content.substring(0, 50) + '...' : qa.topAnswer.content }}</text>\n\t\t\t\t\t<view class=\"view-all-answers\" @tap.stop=\"goQADetail(qa)\">\n\t\t\t\t\t\t<text class=\"view-all-text\">查看所有{{ qa.answerCount }}条回答</text>\n\t\t\t\t\t\t<text class=\"arrow\">→</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"qa-content\" v-else-if=\"qa.hasAnswer\">\n\t\t\t\t\t<view class=\"view-all-answers\" @tap.stop=\"goQADetail(qa)\">\n\t\t\t\t\t\t<text class=\"view-all-text\">查看所有{{ qa.answerCount }}条回答</text>\n\t\t\t\t\t\t<text class=\"arrow\">→</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"qa-content\" v-else>\n\t\t\t\t\t<text class=\"no-answer\">暂时还没有人回答</text>\n\t\t\t\t</view>\n\n\t\t\t\t<!-- 统计信息 -->\n\t\t\t\t<view class=\"qa-stats\">\n\t\t\t\t\t<text class=\"stat-text\">{{ qa.answerCount }}个回答</text>\n\t\t\t\t\t<text class=\"stat-text\">{{ qa.readCount }}个阅读</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 浮动添加按钮 -->\n\t\t<view class=\"floating-add-btn\" v-if=\"topTab !== 'science'\" @tap=\"goToCreate\">\n\t\t\t<image class=\"add-icon\" src=\"/static/record/add.png\" mode=\"widthFix\" />\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { onShow } from '@dcloudio/uni-app'\nimport { api } from '@/utils/api.js'\n\nconst topTab = ref('square')\nconst currentUser = ref(null)\nconst searchText = ref('')\nconst isSearching = ref(false)\n\n// 动态顶部内边距\nconst dynamicTopPadding = ref('')\nonMounted(async () => {\n\ttry {\n\t\tconst info = uni.getSystemInfoSync()\n\t\tconst statusBar = info.statusBarHeight || 0\n\t\tconst screenW = info.screenWidth || 375\n\t\tconst rpxToPx = (rpx) => (rpx * screenW) / 750\n\t\tconst topPx = Math.round(statusBar * 0.35)\n\t\tdynamicTopPadding.value = `padding-top:${topPx}px;`\n\t} catch (e) {\n\t\tdynamicTopPadding.value = ''\n\t}\n\t\n\t// 获取当前用户信息\n\ttry {\n\t\tconst userProfile = await api.getProfile()\n\t\tcurrentUser.value = userProfile\n\t} catch (e) {\n\t\tconsole.error('获取用户信息失败:', e)\n\t}\n\t\n\t// 初次进入加载广场数据\n\tloadFeeds()\n\t// 加载问答数据\n\tloadQuestions()\n\t// 监听刷新事件\n\ttry { uni.$on('feeds:refresh', () => { if (topTab.value === 'square') loadFeeds() }) } catch (e) {}\n\t// 监听问答刷新事件\n\ttry { uni.$on('qa:refresh', () => { if (topTab.value === 'qa') loadQuestions() }) } catch (e) {}\n})\n\n// 页面显示时刷新数据\nonShow(() => {\n\t// 如果当前在问答标签页，刷新问答数据\n\tif (topTab.value === 'qa') {\n\t\tloadQuestions()\n\t}\n\t// 如果当前在广场标签页，刷新动态数据\n\telse if (topTab.value === 'square') {\n\t\tloadFeeds()\n\t}\n})\nconst categories = ref([\n\t{ key: 'rec', name: '推荐' },\n\t{ key: 'daily', name: '生活日常' },\n\t{ key: 'dress', name: '宠物穿搭' },\n\t{ key: 'care', name: '养护分享' },\n\t{ key: 'fun', name: '搞笑日常' }\n])\nconst currentCategory = ref('rec')\n\nconst posts = ref([])\n\nasync function loadFeeds(params = {}) {\n\ttry {\n\t\tconst res = await api.getFeeds({ page: 1, limit: 20, ...params })\n\t\tconst list = Array.isArray(res) ? res : (res.feeds || res.data || [])\n\t\t\n\t\tposts.value = list.map((f) => {\n\t\t\tconst user = f.User || {}\n\t\t\tconst pet = f.Pet || {}\n\t\t\tconst imgs = Array.isArray(f.images) ? f.images : []\n\t\t\tconst created = f.createdAt ? new Date(f.createdAt) : null\n\t\t\t// 获取本地时间，确保时区正确\n\t\t\tconst now = new Date()\n\t\t\tconst timeDiff = now.getTime() - created.getTime()\n\t\t\tconst minutesDiff = Math.floor(timeDiff / (1000 * 60))\n\t\t\t\n\t\t\tlet time = '刚刚'\n\t\t\tif (minutesDiff < 1) {\n\t\t\t\ttime = '刚刚'\n\t\t\t} else if (minutesDiff < 60) {\n\t\t\t\ttime = `${minutesDiff}分钟前`\n\t\t\t} else if (minutesDiff < 1440) { // 24小时\n\t\t\t\tconst hoursDiff = Math.floor(minutesDiff / 60)\n\t\t\t\ttime = `${hoursDiff}小时前`\n\t\t\t} else {\n\t\t\t\t// 超过24小时显示具体时间\n\t\t\t\ttime = `${created.getHours().toString().padStart(2,'0')}:${created.getMinutes().toString().padStart(2,'0')}`\n\t\t\t}\n\t\t\t\n\t\t\t// 提取标题（从tags字段中获取第一个标签作为标题）\n\t\t\tlet title = ''\n\t\t\tif (f.tags && Array.isArray(f.tags) && f.tags.length > 0) {\n\t\t\t\ttitle = f.tags[0]\n\t\t\t} else if (f.tags && typeof f.tags === 'string') {\n\t\t\t\ttry {\n\t\t\t\t\tconst parsedTags = JSON.parse(f.tags)\n\t\t\t\t\tif (Array.isArray(parsedTags) && parsedTags.length > 0) {\n\t\t\t\t\t\ttitle = parsedTags[0]\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// 如果解析失败，忽略\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tid: f.id,\n\t\t\t\tuserId: f.userId, // 添加动态作者ID\n\t\t\t\tuser: user.nickname || '用户',\n\t\t\t\tpet: pet.name || '',\n\t\t\t\tbreed: pet.breed || '',\n\t\t\t\ttime,\n\t\t\t\ttitle: title ? `#${title}` : '',\n\t\t\t\ttext: f.text || '',\n\t\t\t\tavatar: user.avatarUrl || '/static/logo.png',\n\t\t\t\timages: imgs,\n\t\t\t\tlikes: f.likes || 0,\n\t\t\t\tcomments: typeof f.commentsCount === 'number' ? f.commentsCount : (Array.isArray(f.Comments) ? f.Comments.length : 0),\n\t\t\t\tshares: f.shares || 0,\n\t\t\t\tisOwner: currentUser.value && f.userId === currentUser.value.id, // 判断是否为作者\n\t\t\t\tisLiked: f.isLiked || false // 添加点赞状态\n\t\t\t}\n\t\t})\n\t} catch (e) {\n\t\tposts.value = []\n\t}\n}\n\n// 加载问答数据\nasync function loadQuestions(params = {}) {\n\ttry {\n\t\tconst res = await api.getQuestions({ page: 1, limit: 20, ...params })\n\t\tconst list = Array.isArray(res) ? res : (res.questions || res.data || [])\n\t\t\n\t\t// 处理问答数据\n\t\tqaPosts.value = list.map(q => {\n\t\t\tconsole.log('处理问答数据:', q)\n\t\t\tconsole.log('topAnswer数据:', q.topAnswer)\n\t\t\t\n\t\t\t// 时间格式化\n\t\t\tlet time = '刚刚'\n\t\t\tif (q.createdAt) {\n\t\t\t\tconst created = new Date(q.createdAt)\n\t\t\t\tconst month = created.getUTCMonth() + 1\n\t\t\t\tconst date = created.getUTCDate()\n\t\t\t\tconst hours = created.getUTCHours().toString().padStart(2, '0')\n\t\t\t\tconst minutes = created.getUTCMinutes().toString().padStart(2, '0')\n\t\t\t\ttime = `${month}/${date} ${hours}:${minutes}`\n\t\t\t}\n\t\t\t\n\t\t\t// 处理标签\n\t\t\tlet tags = []\n\t\t\tif (q.tags) {\n\t\t\t\ttry {\n\t\t\t\t\ttags = typeof q.tags === 'string' ? JSON.parse(q.tags) : q.tags\n\t\t\t\t\tif (!Array.isArray(tags)) {\n\t\t\t\t\t\ttags = []\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\ttags = []\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconst processedQ = {\n\t\t\t\tid: q.id,\n\t\t\t\ttitle: q.title,\n\t\t\t\tisUrgent: q.isUrgent,\n\t\t\t\thasAnswer: q.answerCount > 0,\n\t\t\t\ttopAnswer: q.topAnswer || null,\n\t\t\t\tanswerCount: q.answerCount || 0,\n\t\t\t\treadCount: q.views || 0,\n\t\t\t\ttime: time,\n\t\t\t\ttags: tags\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('处理后的问答数据:', processedQ)\n\t\t\treturn processedQ\n\t\t})\n\t} catch (e) {\n\t\tconsole.error('加载问答数据失败:', e)\n\t\tqaPosts.value = []\n\t}\n}\n\n// 问答数据\nconst qaPosts = ref([])\n\n// 科普数据\nconst sciencePosts = ref([\n\t{ id: 's1', title: '猫咪的20种肢体语言～快来速查🔎 终于知道猫猫心里在想什么了', reads: 50, cover: '/static/logo.png' },\n\t{ id: 's2', title: '狗狗防暑保命清单', reads: 36, cover: '/static/logo.png' },\n\t{ id: 's3', title: '如何训练猫咪使用猫砂盆？新手铲屎官必看指南', reads: 28, cover: '/static/logo.png' },\n\t{ id: 's4', title: '狗狗疫苗时间表：从幼犬到成年的完整接种计划', reads: 42, cover: '/static/logo.png' },\n\t{ id: 's5', title: '猫咪发情期护理：如何安全度过发情季节', reads: 33, cover: '/static/logo.png' },\n\t{ id: 's6', title: '狗狗皮肤病预防与治疗：常见皮肤病识别手册', reads: 67, cover: '/static/logo.png' },\n\t{ id: 's7', title: '猫咪营养需求分析：不同年龄阶段的饮食搭配', reads: 45, cover: '/static/logo.png' },\n\t{ id: 's8', title: '狗狗行为训练：从基础指令到高级技巧', reads: 39, cover: '/static/logo.png' }\n])\n\nfunction selectCategory(key) { \n\tcurrentCategory.value = key \n\t// 如果需要按类目过滤，将 key 作为标签传给后端\n\tif (topTab.value === 'square') {\n\t\tconst categoryParam = key === 'rec' ? undefined : key\n\t\tloadFeeds(categoryParam ? { category: categoryParam } : {})\n\t}\n}\n\nfunction switchTab(tab) {\n\ttopTab.value = tab\n\tif (tab === 'square' && posts.value.length === 0) {\n\t\tloadFeeds()\n\t} else if (tab === 'qa' && qaPosts.value.length === 0) {\n\t\tloadQuestions()\n\t}\n}\n\nfunction goDetail(post) {\n\tuni.navigateTo({\n\t\turl: '/pages/communityDetail/communityDetail',\n\t\tsuccess: (res) => {\n\t\t\ttry {\n\t\t\t\tres.eventChannel.emit('post', post)\n\t\t\t} catch (e) { }\n\t\t}\n\t})\n}\nfunction goQADetail(qa) {\n\tuni.navigateTo({\n\t\turl: '/pages/questionDetail/questionDetail',\n\t\tsuccess: (res) => {\n\t\t\ttry {\n\t\t\t\tres.eventChannel.emit('qa', qa)\n\t\t\t} catch (e) { }\n\t\t}\n\t})\n}\nfunction goScienceDetail(article) {\n\tuni.navigateTo({\n\t\turl: '/pages/scienceDetail/scienceDetail',\n\t\tsuccess: (res) => {\n\t\t\ttry {\n\t\t\t\tres.eventChannel.emit('science', article)\n\t\t\t} catch (e) { }\n\t\t}\n\t})\n}\nfunction goToCreate() { uni.navigateTo({ url: '/pages/createCommunity/createCommunity' }) }\nfunction noop() { }\n\n// 切换点赞状态\nasync function toggleLike(post) {\n\tif (!currentUser.value) {\n\t\tuni.showToast({\n\t\t\ttitle: '请先登录',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn\n\t}\n\t\n\ttry {\n\t\tconst result = await api.likeFeed(post.id)\n\t\tif (result) {\n\t\t\t// 更新点赞数量和状态\n\t\t\tpost.likes = result.likes\n\t\t\tpost.isLiked = result.isLiked\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: post.isLiked ? '已点赞' : '已取消点赞',\n\t\t\t\ticon: 'none',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('点赞操作失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 删除动态\nasync function deletePost(post) {\n\ttry {\n\t\tuni.showModal({\n\t\t\ttitle: '确认删除',\n\t\t\tcontent: '确定要删除这条动态吗？删除后无法恢复。',\n\t\t\tconfirmText: '删除',\n\t\t\tcancelText: '取消',\n\t\t\tconfirmColor: '#ff4757',\n\t\t\tsuccess: async (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait api.deleteFeed(post.id)\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// 从列表中移除已删除的动态\n\t\t\t\t\t\tconst index = posts.value.findIndex(p => p.id === post.id)\n\t\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\t\tposts.value.splice(index, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('删除动态失败:', error)\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '删除失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t} catch (error) {\n\t\tconsole.error('删除动态失败:', error)\n\t\tuni.showToast({\n\t\t\ttitle: '删除失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 搜索处理\nfunction handleSearch() {\n\tif (!searchText.value.trim()) return\n\t\n\tisSearching.value = true\n\tif (topTab.value === 'square') {\n\t\tloadFeeds({ search: searchText.value.trim() })\n\t} else if (topTab.value === 'qa') {\n\t\tloadQuestions({ search: searchText.value.trim() })\n\t}\n}\n\n// 搜索输入处理（防抖）\nlet searchTimeout = null\nfunction handleSearchInput() {\n\tif (searchTimeout) {\n\t\tclearTimeout(searchTimeout)\n\t}\n\t\n\tsearchTimeout = setTimeout(() => {\n\t\tif (searchText.value.trim()) {\n\t\t\thandleSearch()\n\t\t} else {\n\t\t\t// 如果搜索框为空，重新加载数据\n\t\t\tif (topTab.value === 'square') {\n\t\t\t\tloadFeeds()\n\t\t\t} else if (topTab.value === 'qa') {\n\t\t\t\tloadQuestions()\n\t\t\t}\n\t\t\tisSearching.value = false\n\t\t}\n\t}, 500) // 500ms 防抖\n}\n\n// 清除搜索\nfunction clearSearch() {\n\tconsole.log('清除搜索被调用')\n\tsearchText.value = ''\n\tisSearching.value = false\n\tif (topTab.value === 'square') {\n\t\tloadFeeds()\n\t} else if (topTab.value === 'qa') {\n\t\tloadQuestions()\n\t}\n\tconsole.log('搜索文本已清除:', searchText.value)\n}\n</script>\n\n<style scoped>\n.page {\n\tpadding: 24rpx 32rpx;\n\t/* 动态计算顶部间距，避免真机调试时env不生效 */\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #fff1a8 0%, #fff3c9 32%, #fff7e3 68%, #fffaf1 100%);\n}\n\n/* 顶部 */\n.topbar {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin-bottom: 16rpx;\n}\n\n.left {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n\tcolor: #2c2c2c;\n}\n\n.brand {\n\tfont-size: 36rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.right {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tcolor: #2c2c2c;\n}\n\n/* 吊牌 */\n.hanger {\n\tposition: relative;\n\tmargin: 8rpx 0 10rpx;\n}\n\n.rope {\n\theight: 8rpx;\n\tbackground: linear-gradient(90deg, #2c2c2c 0%, #4a4a4a 50%, #2c2c2c 100%);\n\tborder-radius: 8rpx;\n\tbox-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.3);\n\tposition: relative;\n}\n\n.rope::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: -2rpx;\n\tleft: 0;\n\tright: 0;\n\theight: 4rpx;\n\tbackground: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);\n\tborder-radius: 4rpx;\n}\n\n.signs {\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tmargin-top: -5rpx;\n\tgap: 8rpx;\n}\n\n.sign {\n\tposition: relative;\n\twidth: 160rpx;\n\theight: 90rpx;\n\tbackground: #fffbea;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx 16rpx 20rpx 20rpx;\n\tbox-shadow: 0 8rpx 0 #2c2c2c, 0 4rpx 8rpx rgba(0, 0, 0, 0.2);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\ttransform: rotate(-8deg);\n\ttransition: all 0.3s ease;\n}\n\n.sign-badge {\n\tposition: absolute;\n\ttop: -38rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\twidth: 62rpx;\n\theight: 62rpx;\n\tz-index: 2;\n\tpointer-events: none;\n}\n\n.sign::before {\n\tcontent: '';\n\tposition: absolute;\n\ttop: -8rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\twidth: 24rpx;\n\theight: 16rpx;\n\tbackground: #2c2c2c;\n\tborder-radius: 12rpx;\n\tbox-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.3);\n}\n\n.sign::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: -4rpx;\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\twidth: 16rpx;\n\theight: 12rpx;\n\tbackground: #fffbea;\n\tborder-radius: 8rpx;\n\tborder: 2rpx solid #2c2c2c;\n}\n\n.sign.active {\n\tbackground: #ffe48a;\n\ttransform: rotate(-8deg) scale(1.05);\n\tbox-shadow: 0 10rpx 0 #2c2c2c, 0 6rpx 12rpx rgba(0, 0, 0, 0.3);\n}\n\n.sign.active::after {\n\tbackground: #ffe48a;\n\tborder-color: #2c2c2c;\n}\n\n.sign text {\n\tfont-weight: 600;\n\tfont-size: 28rpx;\n\tcolor: #2c2c2c;\n\ttext-shadow: 0 1rpx 2rpx rgba(0, 0, 0, 0.1);\n}\n\n/* 搜索 */\n.search {\n\tmargin: 45rpx 0 10rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 999rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 16rpx 20rpx;\n}\n\n.search-ico {\n\tdisplay: none;\n}\n\n.search-ico-img {\n\twidth: 32rpx;\n\theight: 32rpx;\n\tmargin-right: 12rpx;\n}\n\n.search-input {\n\tflex: 1;\n\tfont-size: 28rpx;\n}\n\n.ph {\n\tcolor: #bbb;\n}\n\n.search-clear {\n\twidth: 42rpx;\n\theight: 42rpx;\n\tbackground: #ddd;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-left: 12rpx;\n}\n\n.search-clear text {\n\tcolor: #666;\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n}\n\n/* 类目 */\n.categories {\n\twhite-space: nowrap;\n\tdisplay: flex;\n\tmargin: 30rpx 0 30rpx;\n}\n\n.cat {\n\tdisplay: inline-flex;\n\tpadding: 10rpx 18rpx;\n\tbackground: #fff7d6;\n\tcolor: #2c2c2c;\n\tborder-radius: 999rpx;\n\tmargin-right: 16rpx;\n\tfont-size: 24rpx;\n}\n\n.cat.on {\n\tbackground: #ffec99;\n\tfont-weight: 600;\n}\n\n/* 动态卡片 */\n.feed {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 35rpx;\n}\n\n.card {\n\tbackground: #fff;\n\tborder-radius: 24rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tpadding: 25rpx 35rpx;\n\tbox-shadow: 0 8rpx 0 #2c2c2c;\n}\n\n.card-hd {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.avatar {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tborder-radius: 50%;\n\tborder: 2rpx solid #2c2c2c;\n\tbackground: #f5f5f5;\n}\n\n.title-meta {\n\tflex: 1;\n\tmargin-left: 12rpx;\n}\n\n.nickname {\n\tfont-size: 30rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n}\n\n.sub {\n\tdisplay: block;\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n\tmargin-top: 4rpx;\n}\n\n.time {\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n}\n\n.card-bd {\n\tmargin-top: 10rpx;\n}\n\n.post-title {\n\tdisplay: block;\n\tcolor: #82919c;\n\tfont-size: 28rpx;\n\tfont-weight: 600;\n\tmargin: 16rpx 0 0rpx 0;\n\tline-height: 1.4;\n}\n\n.content {\n\tdisplay: block;\n\tcolor: #333;\n\tline-height: 1.6;\n\tmargin: 24rpx 0;\n\tfont-size: 26rpx;\n}\n\n.pics {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(3, 1fr);\n\tgap: 12rpx;\n}\n\n.pic {\n\twidth: 100%;\n\theight: 200rpx;\n\tbackground: #f3f3f3;\n\tborder-radius: 12rpx;\n}\n\n.card-ft {\n\tmargin-top: 18rpx;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 8rpx;\n\tcolor: #555;\n\tfont-size: 28rpx;\n}\n\n.ft-item {\n\tbackground: #fff;\n\tpadding: 8rpx 16rpx;\n\tborder-radius: 999rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 8rpx;\n}\n\n.ft-icon {\n\twidth: 24rpx;\n\theight: 24rpx;\n}\n\n.delete-item {\n\tbackground: #ffebee !important;\n\tborder: 2rpx solid #ffcdd2 !important;\n}\n\n.delete-item .ft-icon {\n\tfilter: hue-rotate(0deg) saturate(1.5) brightness(0.8);\n}\n\n.floating-add-btn {\n\tposition: fixed;\n\tright: -2rpx;\n\tbottom: 120rpx;\n\twidth: 120rpx;\n\theight: 60rpx;\n\tz-index: 10;\n}\n\n.add-icon {\n\twidth: 80%;\n\theight: 80%;\n\ttransform: rotate(-30deg);\n\ttransform-origin: center center;\n}\n\n/* 问答样式 */\n.qa-feed {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n\tmargin-top: 20rpx;\n}\n\n.qa-card {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 20rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tpadding: 24rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n}\n\n/* 左右装饰圆点（与分隔线对齐） */\n.qa-card::before,\n.qa-card::after {\n\tcontent: '';\n\tposition: absolute;\n\ttop: 120rpx;\n\t/* 与标题区高度匹配，必要时微调 */\n\twidth: 22rpx;\n\theight: 22rpx;\n\tbackground: #2c2c2c;\n\tborder-radius: 50%;\n\tbox-shadow: 0 0 0 6rpx #fff;\n\t/* 白色描边，营造镂空效果 */\n}\n\n.qa-card::before {\n\tleft: -12rpx;\n}\n\n.qa-card::after {\n\tright: -12rpx;\n}\n\n.qa-header {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 16rpx;\n}\n\n.urgent-tag {\n\twidth: 32rpx;\n\theight: 32rpx;\n\tbackground: #ff6b35;\n\tborder-radius: 6rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-shrink: 0;\n}\n\n.urgent-text {\n\tcolor: #fff;\n\tfont-size: 20rpx;\n\tfont-weight: 600;\n}\n\n.qa-title {\n\tfont-size: 32rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n\tline-height: 1.4;\n\tflex: 1;\n\tpadding: 12rpx 8rpx 10rpx 0;\n}\n\n.qa-tags {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tgap: 8rpx;\n\tmargin: 12rpx 0;\n}\n\n.qa-tag {\n\tbackground: #f0f8ff;\n\tcolor: #4a90e2;\n\tfont-size: 22rpx;\n\tpadding: 4rpx 12rpx;\n\tborder-radius: 12rpx;\n\tborder: 1rpx solid #d0e7ff;\n}\n\n.qa-divider {\n\theight: 0;\n\tborder-top: 6rpx dashed #2c2c2c;\n\tmargin: 18rpx 0;\n}\n\n.qa-content {\n\tmargin-bottom: 16rpx;\n}\n\n.top-answer-info {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 12rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.top-answer-avatar {\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tbackground: #f5f5f5;\n\tborder: 2rpx solid #2c2c2c;\n}\n\n.top-answer-meta {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.top-answer-user {\n\tfont-size: 24rpx;\n\tfont-weight: 600;\n\tcolor: #2c2c2c;\n}\n\n.top-answer-pet {\n\tfont-size: 20rpx;\n\tcolor: #7a7a7a;\n\tmargin-top: 2rpx;\n}\n\n.top-answer-likes {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 4rpx;\n\tbackground: #f0f8ff;\n\tpadding: 6rpx 12rpx;\n\tborder-radius: 16rpx;\n\tborder: 1rpx solid #d0e7ff;\n}\n\n.like-icon {\n\twidth: 16rpx;\n\theight: 16rpx;\n}\n\n.like-count {\n\tfont-size: 20rpx;\n\tcolor: #4a90e2;\n\tfont-weight: 600;\n}\n\n.top-answer-badge {\n\tbackground: #f0f9ff;\n\tpadding: 6rpx 12rpx;\n\tborder-radius: 16rpx;\n\tborder: 1rpx solid #bae6fd;\n}\n\n.badge-text {\n\tfont-size: 20rpx;\n\tcolor: #0ea5e9;\n\tfont-weight: 600;\n}\n\n.top-answer-content {\n\tfont-size: 26rpx;\n\tcolor: #333;\n\tline-height: 1.5;\n\tdisplay: block;\n\tmargin-bottom: 12rpx;\n}\n\n.view-all-answers {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tbackground: #f8f9fa;\n\tpadding: 12rpx 16rpx;\n\tborder-radius: 12rpx;\n\tborder: 1rpx solid #e9ecef;\n}\n\n.view-all-text {\n\tfont-size: 24rpx;\n\tcolor: #4a90e2;\n\tfont-weight: 500;\n}\n\n.arrow {\n\tfont-size: 24rpx;\n\tcolor: #4a90e2;\n\tfont-weight: bold;\n\tline-height: 1;\n}\n\n.no-answer {\n\tfont-size: 26rpx;\n\tcolor: #bbb;\n\ttext-align: center;\n\tpadding: 20rpx 0;\n}\n\n.qa-stats {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tgap: 20rpx;\n}\n\n.stat-text {\n\tfont-size: 22rpx;\n\tcolor: #999;\n}\n\n/* 科普卡片样式 */\n.science-feed {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 18rpx;\n}\n\n.science-item {\n\tdisplay: flex;\n}\n\n.s-card {\n\tposition: relative;\n\twidth: 420rpx;\n\tmargin-left: 40rpx;\n\tbackground: #fff;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 16rpx;\n\tbox-shadow: 0 6rpx 0 #2c2c2c;\n\tpadding: 20rpx 20rpx 20rpx 200rpx;\n\tmin-height: 160rpx;\n\tmargin-top: 28rpx;\n}\n\n.s-thumb {\n\tposition: absolute;\n\tleft: -30rpx;\n\ttop: -24rpx;\n\twidth: 180rpx;\n\theight: 180rpx;\n\tborder: 4rpx solid #2c2c2c;\n\tborder-radius: 12rpx;\n\toverflow: hidden;\n\tbackground: #8ce1ff;\n\tbox-shadow: 0 4rpx 0 #2c2c2c;\n\tz-index: 10;\n}\n\n.s-thumb-img {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.s-content {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\theight: 100%;\n\twidth: 416rpx;\n}\n\n.s-title {\n\tfont-size: 28rpx;\n\tfont-weight: 700;\n\tcolor: #2c2c2c;\n\tline-height: 1.6;\n\tmargin-bottom: 12rpx;\n}\n\n.s-reads {\n\tcolor: #7a7a7a;\n\tfont-size: 24rpx;\n}\n</style>\n","import MiniProgramPage from 'E:/Uni-App-file/pet-house/pages/community/community.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","api","onShow"],"mappings":"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"}