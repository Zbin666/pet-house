"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/api.js"),n=e.defineComponent({__name:"scienceDetail",setup(n){const o=e.ref("");e.onMounted((()=>{try{const t=e.index.getSystemInfoSync(),n=(t.statusBarHeight,t.screenWidth,15);o.value=`padding-top:${n}px;`}catch(t){o.value=""}}));const a=e.reactive({id:"",title:"åŠ è½½ä¸­...",reads:0,content:"æ­£åœ¨åŠ è½½æ–‡ç« å†…å®¹...",images:[],author:{name:"ç§‘æ™®å®˜",avatar:"/static/logo.png"},createdAt:"",updatedAt:""});function i(e){return!(!e||"string"!=typeof e)&&/<[^>]+>/.test(e)}async function r(n){var o,i;try{console.log("ðŸ” å¼€å§‹åŠ è½½æ–‡ç« è¯¦æƒ…ï¼ŒID:",n);const e=await t.api.getArticle(n);console.log("ðŸ“¡ æ–‡ç« è¯¦æƒ…APIè¿”å›ž:",e);let r=e.content;r&&null!==r||(r=e.title||"æš‚æ— å†…å®¹",console.log("âš ï¸ æ–‡ç« contentä¸ºnullï¼Œä½¿ç”¨titleä½œä¸ºå†…å®¹:",r)),Object.assign(a,{id:e.id||n,title:e.title||"æ— æ ‡é¢˜",reads:e.reads||0,content:r,cover:e.cover||"/static/logo.png",images:e.images||[],author:{name:(null==(o=e.author)?void 0:o.name)||"ç§‘æ™®å®˜",avatar:(null==(i=e.author)?void 0:i.avatar)||"/static/logo.png"},createdAt:e.createdAt||"",updatedAt:e.updatedAt||""}),console.log("âœ… æ–‡ç« è¯¦æƒ…åŠ è½½å®Œæˆ:",a)}catch(r){console.error("âŒ åŠ è½½æ–‡ç« è¯¦æƒ…å¤±è´¥:",r),e.index.showToast({title:"åŠ è½½å¤±è´¥",icon:"none"})}}return e.onLoad((t=>{var n,o;try{if(e.index.setNavigationBarTitle({title:"ç§‘æ™®è¯¦æƒ…"}),e.index.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#fff1a8"}),t.id)r(t.id);else try{const e=null==(o=null==(n=getCurrentPages().pop())?void 0:n.getOpenerEventChannel)?void 0:o.call(n);e&&e.on("science",(e=>{Object.assign(a,e),e.id&&r(e.id)}))}catch(i){console.error("èŽ·å–æ–‡ç« æ•°æ®å¤±è´¥:",i)}}catch(i){console.error("é¡µé¢åŠ è½½å¤±è´¥:",i)}})),(t,n)=>e.e({a:e.t(a.title),b:e.t(a.reads),c:i(a.content)},i(a.content)?{d:a.content}:{e:e.t(a.content)},{f:a.images&&a.images.length},a.images&&a.images.length?{g:e.f(a.images,((t,n,o)=>({a:n,b:t,c:e.o((n=>{return o=t,i=a.images,void e.index.previewImage({current:o,urls:i});var o,i}),n)})))}:{},{h:e.s(o.value)})}}),o=e._export_sfc(n,[["__scopeId","data-v-6ce3e9ff"]]);wx.createPage(o);
